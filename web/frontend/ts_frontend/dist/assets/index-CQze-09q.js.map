{"version":3,"file":"index-CQze-09q.js","sources":["../../src/utils/dom.ts","../../src/router/router.ts","../../src/services/api.ts","../../src/state/auth.ts","../../src/services/imageUpload.ts","../../src/components/ProfileImageUpload.ts","../../src/components/ProfileModal.ts","../../src/components/SocialModal.ts","../../src/components/Navbar.ts","../../src/components/AuthModal.ts","../../src/components/AuthGuard.ts","../../src/pages/HomePage.ts","../../src/pages/PlayPage.ts","../../src/App.ts","../../src/main.ts"],"sourcesContent":["export function createElement(\n  tag: string, \n  attributes: Record<string, string> = {}, \n  children: (HTMLElement | string)[] = []\n): HTMLElement {\n  const element = document.createElement(tag);\n  \n  if (attributes) {\n    Object.entries(attributes).forEach(([key, value]) => {\n      (element as any)[key] = value;\n    });\n  }\n\n  if (children && children.length > 0 && !attributes?.innerHTML) {\n    children.forEach(child => {\n      if (typeof child === 'string') {\n        element.appendChild(document.createTextNode(child));\n      } else {\n        element.appendChild(child);\n      }\n    });\n  }  return element;\n}\n\nexport function createButton(\n  text: string, \n  className: string = '', \n  onClick?: () => void\n): HTMLButtonElement {\n  const button = createElement('button', { \n    className: `${className} focus:outline-none`,\n    innerHTML: text\n  }) as HTMLButtonElement;\n  \n  if (onClick) {\n    button.addEventListener('click', onClick);\n  }\n  \n  return button;\n}\n\nexport function createInput(\n  type: string = 'text', \n  placeholder: string = '', \n  className: string = ''\n): HTMLInputElement {\n  return createElement('input', {\n    type,\n    placeholder,\n    className: `${className} focus:outline-none`\n  }) as HTMLInputElement;\n}\n\nexport function clearElement(element: HTMLElement): void {\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n}\n\nexport function renderTo(element: HTMLElement, container: HTMLElement): void {\n  clearElement(container);\n  container.appendChild(element);\n}\n","import { Route } from '../types/index.js';\n\nexport class Router {\n  private routes: Route[] = [];\n  private currentPath: string = '/';\n\n  constructor() {\n    window.addEventListener('popstate', () => {\n      this.handleRoute();\n    });\n    \n    this.currentPath = window.location.pathname;\n  }\n\n  addRoute(path: string, handler: () => void, requiresAuth: boolean = false): void {\n    this.routes.push({ path, handler, requiresAuth });\n  }\n\n  navigate(path: string): void {\n    this.currentPath = path;\n    window.history.pushState({}, '', path);\n    this.handleRoute();\n  }\n\n  handleRoute(): void {\n    const route = this.routes.find(r => r.path === this.currentPath);\n    if (route) {\n      route.handler();\n    } else {\n      this.navigate('/');\n    }\n  }\n\n  getCurrentPath(): string {\n    return this.currentPath;\n  }\n\n  start(): void {\n    this.handleRoute();\n  }\n}\n\nexport const router = new Router();\n","import { LoginRequest, RegisterRequest, AuthResponse } from '../types/index.js';\n\nconst API_BASE_URL = '/api';\n\nexport class ApiService {\n  private token: string | null = null;\n\n  constructor() {\n    this.token = localStorage.getItem('token');\n  }\n\n  saveToken(token: string): void {\n    this.token = token;\n    localStorage.setItem('token', token);\n  }\n\n  getToken(): string | null {\n    return this.token;\n  }\n\n  removeToken(): void {\n    this.token = null;\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('id');\n    localStorage.removeItem('mail');\n    localStorage.removeItem('username');\n  }\n\n  async login(credentials: LoginRequest): Promise<AuthResponse> {\n    const response = await fetch(`${API_BASE_URL}/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(credentials),\n    });\n\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || data.message || 'Login failed');\n    }\n    return data;\n  }\n\n  async register(userData: RegisterRequest): Promise<AuthResponse> {\n    const response = await fetch(`${API_BASE_URL}/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(userData),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      throw new Error(data.error || data.message || 'Registration failed');\n    }\n\n    return data;\n  }\n\n  async makeAuthenticatedRequest(url: string, options: RequestInit = {}): Promise<Response> {\n    const headers = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${this.token}`\n    };\n    \n    console.log(\"prima della request\");\n    const response = await fetch(`${API_BASE_URL}${url}`, {\n      ...options,\n      headers: { ...headers, ...options.headers }\n    });\n    \n    console.log(\"resonse \", response);\n    if (response.status === 401) {\n      this.removeToken();\n      throw new Error('Session expired');\n    }\n    return response;\n  }\n}\n\nexport const apiService = new ApiService();\n","import { User } from '../types/index.js';\nimport { apiService } from '../services/api.js';\n\nexport class AuthState {\n  private user: User | null = null;\n  private isLoading: boolean = true;\n  private error: string | null = null;\n  private successMessage: string | null = null;\n  private listeners: Set<() => void> = new Set();\n\n  constructor() {\n    this.initializeAuth();\n  }\n\n  private async initializeAuth(): Promise<void> {\n    const token = apiService.getToken();\n    if (token) {\n      try {\n        const response = await apiService.makeAuthenticatedRequest(\"/token\");\n        const data = await response.json();\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data.user));\n        \n        const userString = localStorage.getItem('user');\n        if (userString) {\n          const user = JSON.parse(userString);\n          localStorage.setItem(\"username\", user.username);\n          localStorage.setItem(\"id\", user.id);\n          localStorage.setItem(\"mail\", user.mail);\n          console.log('Token:', localStorage.getItem('token'));\n          console.log('User:', localStorage.getItem('user'));\n          this.user = user;\n        }\n      } catch (error) {\n        console.error('Auth initialization failed:', error);\n        apiService.removeToken();\n      }\n    }\n    this.isLoading = false;\n    this.notifyListeners();\n  }\n\n  private notifyListeners(): void {\n    this.listeners.forEach(listener => listener());\n  }\n\n  subscribe(listener: () => void): () => void {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n\n  getState() {\n    return {\n      user: this.user,\n      isAuthenticated: !!this.user,\n      isLoading: this.isLoading,\n      error: this.error,\n      successMessage: this.successMessage\n    };\n  }\n\n  async login(email: string, password: string): Promise<void> {\n    try {\n      this.isLoading = true;\n      this.error = null;\n      this.successMessage = null;\n      this.notifyListeners();\n      \n      const response = await apiService.login({\n        username: email,\n        password\n      });\n      \n      apiService.saveToken(response.token);\n      this.user = response.user;\n      this.successMessage = 'Login successful!';\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Login failed';\n      this.error = errorMessage;\n      throw err;\n    } finally {\n      this.isLoading = false;\n      this.notifyListeners();\n    }\n  }\n\n  async register(email: string, username: string, password: string): Promise<void> {\n    try {\n      this.isLoading = true;\n      this.error = null;\n      this.successMessage = null;\n      this.notifyListeners();\n      \n      const response = await apiService.register({\n        mail: email,\n        username,\n        psw: password\n      });\n      \n      apiService.saveToken(response.token);\n      this.user = response.user;\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Registration failed';\n      this.error = errorMessage;\n      throw err;\n    } finally {\n      this.isLoading = false;\n      this.notifyListeners();\n    }\n  }\n\n  logout(): void {\n    apiService.removeToken();\n    this.user = null;\n    this.error = null;\n    this.successMessage = null;\n    this.notifyListeners();\n  }\n\n  clearError(): void {\n    this.error = null;\n    this.notifyListeners();\n  }\n\n  clearSuccessMessage(): void {\n    this.successMessage = null;\n    this.notifyListeners();\n  }\n\n  updateUser(user: User): void {\n    this.user = user;\n    localStorage.setItem('user', JSON.stringify(user));\n    this.notifyListeners();\n  }\n}\n\nexport const authState = new AuthState();\n","export class ImageUploadService {\n  static async uploadProfileImage(file: File): Promise<string> {\n    const formData = new FormData();\n    formData.append('profileImage', file);\n\n    const response = await fetch('/api/user/upload-avatar', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: formData\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to upload image');\n    }\n\n    const data = await response.json();\n    return data.imageUrl;\n  }\n\n  static validateImageFile(file: File): string | null {\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n    const maxSize = 5 * 1024 * 1024; // 5MB\n\n    if (!allowedTypes.includes(file.type)) {\n      return 'Formato file non supportato. Usa JPEG, PNG, GIF o WebP.';\n    }\n\n    if (file.size > maxSize) {\n      return 'Il file √® troppo grande. Massimo 5MB.';\n    }\n\n    return null;\n  }\n\n  static previewImage(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        if (e.target?.result) {\n          resolve(e.target.result as string);\n        } else {\n          reject(new Error('Failed to read file'));\n        }\n      };\n      reader.onerror = () => reject(new Error('Failed to read file'));\n      reader.readAsDataURL(file);\n    });\n  }\n}\n","import { createElement } from '../utils/dom.js';\nimport { ImageUploadService } from '../services/imageUpload.js';\nimport { authState } from '../state/auth.js';\n\nexport class ProfileImageUpload {\n  private element: HTMLElement;\n  private imagePreview!: HTMLImageElement;\n  private fileInput!: HTMLInputElement;\n  private isUploading: boolean = false;\n  private onImageUploaded?: (imageUrl: string) => void;\n\n  constructor(currentImageUrl?: string, onImageUploaded?: (imageUrl: string) => void) {\n    this.onImageUploaded = onImageUploaded;\n    this.element = this.createElement(currentImageUrl);\n  }\n\n  private createElement(currentImageUrl?: string): HTMLElement {\n    const container = createElement('div', {\n      className: 'w-20 h-20 rounded-lg flex items-center justify-center border-4 border-orange-500 bg-gray-700 cursor-pointer hover:bg-gray-600 transition-all group relative overflow-hidden'\n    });\n\n    this.imagePreview = createElement('img', {\n      className: 'w-full h-full object-cover',\n      src: currentImageUrl || '',\n      alt: 'Profile Image',\n      style: currentImageUrl ? 'display: block;' : 'display: none;'\n    }) as HTMLImageElement;\n\n    const defaultIcon = createElement('div', {\n      className: 'text-white font-bold text-2xl',\n      innerHTML: 'PG',\n      style: currentImageUrl ? 'display: none;' : 'display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;'\n    });\n\n    const hoverOverlay = createElement('div', {\n      className: 'absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity',\n      innerHTML: `<svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 9l9-9 9 9H3zM21 15l-3.086-3.086a2 2 0 00-2.828 0L6 21M9 9a2 2 0 11-4 0 2 2 0 014 0z\" />\n      </svg>`\n    });\n\n    this.fileInput = createElement('input', {\n      type: 'file',\n      accept: 'image/*',\n      className: 'hidden'\n    }) as HTMLInputElement;\n    \n    this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));\n\n    container.addEventListener('click', () => this.fileInput.click());\n\n    container.appendChild(this.imagePreview);\n    container.appendChild(defaultIcon);\n    container.appendChild(hoverOverlay);\n    container.appendChild(this.fileInput);\n\n    return container;\n  }\n\n  private async handleFileSelect(e: Event): Promise<void> {\n    const input = e.target as HTMLInputElement;\n    const file = input.files?.[0];\n    \n    if (!file) return;\n\n    const validationError = ImageUploadService.validateImageFile(file);\n    if (validationError) {\n      alert(validationError);\n      return;\n    }\n\n    try {\n      const previewUrl = await ImageUploadService.previewImage(file);\n      this.updateImageDisplay(previewUrl, true);\n      \n      await this.uploadImage(file);\n    } catch (error) {\n      console.error('Error handling file:', error);\n      alert('Errore durante la gestione del file');\n    }\n  }\n\n  private async uploadImage(file?: File): Promise<void> {\n    const fileToUpload = file || this.fileInput.files?.[0];\n    if (!fileToUpload || this.isUploading) return;\n\n    this.isUploading = true;\n    this.showLoadingState();\n\n    try {\n      const imageUrl = await ImageUploadService.uploadProfileImage(fileToUpload);\n      \n      const currentUser = authState.getState().user;\n      if (currentUser) {\n        const updatedUser = { ...currentUser, profileImage: imageUrl };\n        authState.updateUser(updatedUser);\n      }\n\n      this.updateImageDisplay(imageUrl, false);\n\n      if (this.onImageUploaded) {\n        this.onImageUploaded(imageUrl);\n      }\n\n      alert('Immagine caricata con successo!');\n      \n    } catch (error) {\n      console.error('Error uploading image:', error);\n      alert('Errore durante il caricamento dell\\'immagine');\n      this.resetToDefaultState();\n    } finally {\n      this.isUploading = false;\n    }\n  }\n\n  private updateImageDisplay(imageUrl: string, isPreview: boolean): void {\n    this.imagePreview.src = imageUrl;\n    this.imagePreview.style.display = 'block';\n    \n    const defaultIcon = this.element.querySelector('div[innerHTML*=\"PG\"]') as HTMLElement;\n    if (defaultIcon) {\n      defaultIcon.style.display = 'none';\n    }\n  }\n\n  private showLoadingState(): void {\n    const overlay = this.element.querySelector('.group-hover\\\\:opacity-100') as HTMLElement;\n    if (overlay) {\n      overlay.innerHTML = `<svg class=\"w-6 h-6 text-white animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n        <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n        <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n      </svg>`;\n      overlay.classList.remove('opacity-0');\n      overlay.classList.add('opacity-100');\n    }\n  }\n\n  private resetToDefaultState(): void {\n    const overlay = this.element.querySelector('.opacity-100') as HTMLElement;\n    if (overlay) {\n      overlay.innerHTML = `<svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 9l9-9 9 9H3zM21 15l-3.086-3.086a2 2 0 00-2.828 0L6 21M9 9a2 2 0 11-4 0 2 2 0 014 0z\" />\n      </svg>`;\n      overlay.classList.remove('opacity-100');\n      overlay.classList.add('opacity-0');\n    }\n  }\n\n  getElement(): HTMLElement {\n    return this.element;\n  }\n\n  updateImage(imageUrl: string): void {\n    this.imagePreview.src = imageUrl;\n  }\n\n  destroy(): void {\n    this.fileInput.removeEventListener('change', this.handleFileSelect);\n  }\n}\n","import { createElement, createButton } from '../utils/dom.js';\nimport { authState } from '../state/auth.js';\nimport { Stats } from '../types/index.js';\nimport { ProfileImageUpload } from './ProfileImageUpload.js';\n\nconst COLORS = {\n  primary: '#E67923',\n  dark: '#2A2A2A',\n  white: '#ffffff'\n};\n\nexport class ProfileModal {\n  private isVisible: boolean = false;\n  private modalElement?: HTMLElement;\n\n  show(stats?: Stats): void {\n    if (this.isVisible) return;\n    \n    this.isVisible = true;\n    this.modalElement = this.createModal(stats);\n    document.body.appendChild(this.modalElement);\n  }\n\n  hide(): void {\n    if (!this.isVisible || !this.modalElement) return;\n    \n    this.isVisible = false;\n    document.body.removeChild(this.modalElement);\n    this.modalElement = undefined;\n  }\n\n  private createModal(stats?: Stats): HTMLElement {\n    const { user } = authState.getState();\n    \n    const defaultStats: Stats = {\n      matchesPlayed: 10,\n      matchesWon: 5,\n      matchesLost: 5,\n      goalsScored: 20,\n      tournamentsWon: 2,\n      rank: 1\n    };\n\n    const playerStats = stats || defaultStats;\n\n    const overlay = createElement('div', {\n      className: 'fixed inset-0 flex items-center justify-center z-50',\n      style: 'background-color: rgba(0, 0, 0, 0.5);'\n    });\n\n    const modal = createElement('div', {\n      className: 'bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden flex flex-col p-8 relative',\n      style: `background-color: ${COLORS.dark};`\n    });\n\n    const closeButton = createButton(\n      `<svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n      </svg>`,\n      'absolute top-4 right-4 hover:opacity-70 transition-opacity focus:outline-none',\n      () => this.hide()\n    );\n    closeButton.style.color = COLORS.primary;\n\n    const title = createElement('h2', {\n      className: 'text-2xl font-bold mb-6 text-center',\n      innerHTML: `Profilo: ${user?.username || 'Giocatore'}`,\n      style: `color: ${COLORS.primary};`\n    });\n\n    const content = createElement('div', {\n      className: 'flex flex-col items-center',\n      style: `color: ${COLORS.white};`\n    });\n\n    const userTable = createElement('div', {\n      className: 'w-full max-w-lg mb-8'\n    });\n\n    const table = createElement('table', {\n      className: 'w-full mb-4 border-separate border-spacing-10'\n    });\n\n    const tbody = createElement('tbody');\n    const tr = createElement('tr');\n\n    const avatarTd = createElement('td', {\n      className: 'align-middle w-32'\n    });\n\n    const profileImageUpload = new ProfileImageUpload(\n      user?.profileImage,\n      (imageUrl) => {\n        console.log('Profile image updated:', imageUrl);\n      }\n    );\n\n    avatarTd.appendChild(profileImageUpload.getElement());\n    const infoTd = createElement('td', {\n      className: 'align-middle'\n    });\n\n    const infoDiv = createElement('div', {\n      className: 'space-y-5'\n    });\n\n    const mailDiv = createElement('div', {\n      className: 'text-sm text-left',\n      innerHTML: `<span><strong>Mail:</strong> ${user?.mail || 'N/A'}</span>`\n    });\n\n    const walletDiv = createElement('div', {\n      className: 'text-sm text-left'\n    });\n\n    const walletContainer = createElement('div', {\n      className: 'flex items-center'\n    });\n\n    const walletLabel = createElement('span', {\n      className: 'text-sm font-medium mr-2',\n      innerHTML: '<strong>Wallet:</strong>'\n    });\n\n    const walletButton = createButton(\n      'Collega Wallet',\n      'text-white px-3 py-1 rounded text-sm hover:opacity-90 transition-opacity focus:outline-none',\n      () => alert('Collega Wallet')\n    );\n    walletButton.style.backgroundColor = COLORS.primary;\n\n    walletContainer.appendChild(walletLabel);\n    walletContainer.appendChild(walletButton);\n    walletDiv.appendChild(walletContainer);\n\n    infoDiv.appendChild(mailDiv);\n    infoDiv.appendChild(walletDiv);\n    infoTd.appendChild(infoDiv);\n\n    tr.appendChild(avatarTd);\n    tr.appendChild(infoTd);\n    tbody.appendChild(tr);\n    table.appendChild(tbody);\n    userTable.appendChild(table);\n\n    const statsTopGrid = createElement('div', {\n      className: 'w-full max-w-lg mb-8'\n    });\n\n    const topStatsGrid = createElement('div', {\n      className: 'grid grid-cols-3 gap-6 mb-8'\n    });\n\n    const rankDiv = createElement('div', {\n      className: 'text-center'\n    });\n    rankDiv.innerHTML = `\n      <div class=\"text-2xl font-bold\" style=\"color: ${COLORS.primary};\">#${playerStats.rank || 1}</div>\n      <div class=\"text-sm\">Posizione</div>\n    `;\n\n    const winRateDiv = createElement('div', {\n      className: 'text-center'\n    });\n    const winRate = ((playerStats.matchesWon / Math.max(playerStats.matchesPlayed, 1)) * 100).toFixed(1);\n    winRateDiv.innerHTML = `\n      <div class=\"text-2xl font-bold text-green-400\">${winRate}%</div>\n      <div class=\"text-sm\">Win Rate</div>\n    `;\n\n    const tournamentsDiv = createElement('div', {\n      className: 'text-center'\n    });\n    tournamentsDiv.innerHTML = `\n      <div class=\"text-2xl font-bold\" style=\"color: ${COLORS.primary};\">${playerStats.tournamentsWon}</div>\n      <div class=\"text-sm\">Tornei</div>\n    `;\n\n    topStatsGrid.appendChild(rankDiv);\n    topStatsGrid.appendChild(winRateDiv);\n    topStatsGrid.appendChild(tournamentsDiv);\n    statsTopGrid.appendChild(topStatsGrid);\n\n    // Main stats grid\n    const mainStatsGrid = createElement('div', {\n      className: 'grid grid-cols-4 gap-6 mb-8'\n    });\n\n    // Goals scored\n    const goalsScoredDiv = createElement('div', {\n      className: 'text-center p-4 rounded',\n      style: 'background-color: rgba(34, 197, 94, 0.1);'\n    });\n    const avgGoalsScored = (playerStats.goalsScored / Math.max(playerStats.matchesPlayed, 1)).toFixed(1);\n    goalsScoredDiv.innerHTML = `\n      <div class=\"text-sm text-green-400 mb-2\">üéØ Goal Fatti</div>\n      <div class=\"text-3xl font-bold mb-1\">${playerStats.goalsScored}</div>\n      <div class=\"text-xs\">Media: ${avgGoalsScored} per partita</div>\n    `;\n\n    // Goals received\n    const goalsReceivedDiv = createElement('div', {\n      className: 'text-center p-4 rounded',\n      style: 'background-color: rgba(239, 68, 68, 0.1);'\n    });\n    const goalsReceived = Math.floor(playerStats.goalsScored * 0.7);\n    const avgGoalsReceived = (goalsReceived / Math.max(playerStats.matchesPlayed, 1)).toFixed(1);\n    goalsReceivedDiv.innerHTML = `\n      <div class=\"text-sm text-red-400 mb-2\">ü•Ö Goal Ricevuti</div>\n      <div class=\"text-3xl font-bold mb-1\">${goalsReceived}</div>\n      <div class=\"text-xs\">Media: ${avgGoalsReceived} per partita</div>\n    `;\n\n    // Total matches\n    const totalMatchesDiv = createElement('div', {\n      className: 'text-center p-4 rounded',\n      style: 'background-color: rgba(59, 130, 246, 0.1);'\n    });\n    totalMatchesDiv.innerHTML = `\n      <div class=\"text-sm text-blue-400 mb-2\">üéÆ Partite Totali</div>\n      <div class=\"text-3xl font-bold mb-1\">${playerStats.matchesPlayed}</div>\n      <div class=\"text-xs\">Esperienza di gioco</div>\n    `;\n\n    // Tournaments won\n    const tournamentsWonDiv = createElement('div', {\n      className: 'text-center p-4 rounded',\n      style: 'background-color: rgba(251, 191, 36, 0.1);'\n    });\n    tournamentsWonDiv.innerHTML = `\n      <div class=\"text-sm text-yellow-400 mb-2\">üèÜ Tornei Vinti</div>\n      <div class=\"text-3xl font-bold mb-1\">${playerStats.tournamentsWon}</div>\n      <div class=\"text-xs\">Campione</div>\n    `;\n\n    mainStatsGrid.appendChild(goalsScoredDiv);\n    mainStatsGrid.appendChild(goalsReceivedDiv);\n    mainStatsGrid.appendChild(totalMatchesDiv);\n    mainStatsGrid.appendChild(tournamentsWonDiv);\n\n    // Match results section\n    const matchResultsSection = createElement('div', {\n      className: 'w-full max-w-lg'\n    });\n\n    const matchResultsTitle = createElement('h3', {\n      className: 'text-lg font-bold mb-6',\n      innerHTML: 'Risultati Partite',\n      style: `color: ${COLORS.primary};`\n    });\n\n    const matchResultsContent = createElement('div', {\n      className: 'space-y-6'\n    });\n\n    // Wins row\n    const winsRow = createElement('div', {\n      className: 'flex justify-between items-center py-4'\n    });\n    const winsRate = ((playerStats.matchesWon / Math.max(playerStats.matchesPlayed, 1)) * 100).toFixed(1);\n    winsRow.innerHTML = `\n      <span class=\"text-sm\">üìà Partite Vinte</span>\n      <div class=\"flex items-center justify-end flex-1 ml-4\">\n        <span class=\"text-2xl font-bold text-green-400 mr-3\">${playerStats.matchesWon}</span>\n        <span class=\"text-sm\">${winsRate}% win rate</span>\n      </div>\n    `;\n\n    // Losses row\n    const lossesRow = createElement('div', {\n      className: 'flex justify-between items-center py-4'\n    });\n    const lossRate = ((playerStats.matchesLost / Math.max(playerStats.matchesPlayed, 1)) * 100).toFixed(1);\n    lossesRow.innerHTML = `\n      <span class=\"text-sm\">üìâ Partite Perse</span>\n      <div class=\"flex items-center justify-end flex-1 ml-4\">\n        <span class=\"text-2xl font-bold text-red-400 mr-3\">${playerStats.matchesLost}</span>\n        <span class=\"text-sm\">${lossRate}% loss rate</span>\n      </div>\n    `;\n\n    matchResultsContent.appendChild(winsRow);\n    matchResultsContent.appendChild(lossesRow);\n\n    // Goal analysis section\n    const goalAnalysisSection = createElement('div', {\n      className: 'mt-8'\n    });\n\n    const goalAnalysisTitle = createElement('h4', {\n      className: 'text-md font-bold mb-4',\n      innerHTML: 'Analisi Goal',\n      style: `color: ${COLORS.primary};`\n    });\n\n    // Progress bar\n    const progressBarContainer = createElement('div', {\n      className: 'w-full bg-gray-700 rounded-full h-3 mb-4'\n    });\n\n    const totalGoals = playerStats.goalsScored + goalsReceived;\n    const progressWidth = Math.min((playerStats.goalsScored / Math.max(totalGoals, 1)) * 100, 100);\n    const progressBar = createElement('div', {\n      className: 'bg-green-400 h-3 rounded-full',\n      style: `width: ${progressWidth}%;`\n    });\n\n    progressBarContainer.appendChild(progressBar);\n\n    // Goal stats\n    const goalStatsContainer = createElement('div', {\n      className: 'flex justify-between text-sm'\n    });\n\n    const goalsScoredStats = createElement('div', {\n      className: 'text-center'\n    });\n    goalsScoredStats.innerHTML = `\n      <div class=\"text-2xl font-bold text-green-400\">${playerStats.goalsScored}</div>\n      <div class=\"text-sm\">Segnati</div>\n    `;\n\n    const goalsReceivedStats = createElement('div', {\n      className: 'text-center'\n    });\n    goalsReceivedStats.innerHTML = `\n      <div class=\"text-2xl font-bold text-red-400\">${goalsReceived}</div>\n      <div class=\"text-sm\">Subiti</div>\n    `;\n\n    goalStatsContainer.appendChild(goalsScoredStats);\n    goalStatsContainer.appendChild(goalsReceivedStats);\n\n    goalAnalysisSection.appendChild(goalAnalysisTitle);\n    goalAnalysisSection.appendChild(progressBarContainer);\n    goalAnalysisSection.appendChild(goalStatsContainer);\n\n    matchResultsSection.appendChild(matchResultsTitle);\n    matchResultsSection.appendChild(matchResultsContent);\n    matchResultsSection.appendChild(goalAnalysisSection);\n\n    // Assemble everything\n    content.appendChild(userTable);\n    content.appendChild(statsTopGrid);\n    content.appendChild(mainStatsGrid);\n    content.appendChild(matchResultsSection);\n\n    modal.appendChild(closeButton);\n    modal.appendChild(title);\n    modal.appendChild(content);\n    overlay.appendChild(modal);\n\n    // Close on overlay click\n    overlay.addEventListener('click', (e) => {\n      if (e.target === overlay) {\n        this.hide();\n      }\n    });\n\n    return overlay;\n  }\n\n  destroy(): void {\n    this.hide();\n  }\n}\n","import { createElement, createButton } from '../utils/dom.js';\nimport { authState } from '../state/auth.js';\n\nconst COLORS = {\n  primary: '#E67923',\n  dark: '#2A2A2A',\n  white: '#ffffff'\n};\n\ninterface Friend {\n  id: number;\n  username: string;\n  status: 'online' | 'offline';\n}\n\ninterface Message {\n  id: number;\n  sender: string;\n  content: string;\n  timestamp: Date;\n}\n\nexport class SocialModal {\n  private isVisible: boolean = false;\n  private modalElement?: HTMLElement;\n  private selectedFriend: Friend | null = null;\n  private newMessage: string = '';\n  \n  private friends: Friend[] = [\n    { id: 1, username: 'ges√π', status: 'online' },\n    { id: 2, username: 'mario', status: 'offline' },\n  ];\n\n  private messages: { [key: number]: Message[] } = {\n    1: [\n      { id: 1, sender: 'Mario', content: 'dio merda?', timestamp: new Date() },\n      { id: 2, sender: 'Tu', content: 'ovvio', timestamp: new Date() },\n    ],\n    2: [\n      { id: 3, sender: 'mario', content: 'come va?', timestamp: new Date() },\n    ],\n  };\n\n  show(): void {\n    if (this.isVisible) return;\n    \n    this.isVisible = true;\n    this.modalElement = this.createModal();\n    document.body.appendChild(this.modalElement);\n  }\n\n  hide(): void {\n    if (!this.isVisible || !this.modalElement) return;\n    \n    this.isVisible = false;\n    document.body.removeChild(this.modalElement);\n    this.modalElement = undefined;\n    this.selectedFriend = null;\n    this.newMessage = '';\n  }\n\n  private createModal(): HTMLElement {\n    const { user } = authState.getState();\n\n    const overlay = createElement('div', {\n      className: 'fixed inset-0 flex items-center justify-center z-50',\n      style: 'background-color: rgba(0, 0, 0, 0.5);'\n    });\n\n    const modal = createElement('div', {\n      className: 'bg-white rounded-xl shadow-2xl w-full max-w-4xl mx-4 overflow-hidden flex flex-col p-8 relative h-3/4',\n      style: `background-color: ${COLORS.dark};`\n    });\n\n    // Close button\n    const closeButton = createButton(\n      `<svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n      </svg>`,\n      'absolute top-4 right-4 hover:opacity-70 transition-opacity focus:outline-none',\n      () => this.hide()\n    );\n    closeButton.style.color = COLORS.primary;\n\n    // Title\n    const title = createElement('h2', {\n      className: 'text-2xl font-bold mb-6 text-center',\n      innerHTML: 'Social',\n      style: `color: ${COLORS.primary};`\n    });\n\n    // Main content container\n    const mainContent = createElement('div', {\n      className: 'flex-1 overflow-hidden',\n      style: `color: ${COLORS.white};`\n    });\n\n    const table = createElement('table', {\n      className: 'w-full h-full border-separate border-spacing-4'\n    });\n\n    const tbody = createElement('tbody');\n    const tr = createElement('tr', { className: 'h-full' });\n\n    // Left column - Friends list\n    const leftTd = createElement('td', {\n      className: 'w-1/3 align-top'\n    });\n\n    const leftContent = createElement('div', {\n      className: 'h-full flex flex-col'\n    });\n\n    const friendsTitle = createElement('h3', {\n      className: 'text-lg font-bold mb-4',\n      innerHTML: 'Amici',\n      style: `color: ${COLORS.primary};`\n    });\n\n    const friendsListContainer = createElement('div', {\n      className: 'flex-1 overflow-y-auto space-y-2 mb-4'\n    });\n\n    // Create friends list\n    this.friends.forEach(friend => {\n      const friendItem = createElement('div', {\n        className: `p-3 rounded cursor-pointer transition-colors ${\n          this.selectedFriend?.id === friend.id ? 'bg-opacity-30' : 'bg-opacity-10'\n        }`,\n        style: this.selectedFriend?.id === friend.id \n          ? `background-color: ${COLORS.primary}30;` \n          : 'background-color: rgba(255, 255, 255, 0.1);'\n      });\n\n      friendItem.innerHTML = `\n        <div class=\"flex items-center justify-between\">\n          <span class=\"font-medium\">${friend.username}</span>\n          <span class=\"w-3 h-3 rounded-full ${\n            friend.status === 'online' ? 'bg-green-400' : 'bg-gray-400'\n          }\"></span>\n        </div>\n      `;\n\n      friendItem.addEventListener('click', () => {\n        this.selectedFriend = friend;\n        this.refreshModal();\n      });\n\n      friendsListContainer.appendChild(friendItem);\n    });\n\n    const addFriendButton = createButton(\n      '+ Aggiungi Amico',\n      'text-white px-4 py-2 rounded text-sm hover:opacity-90 transition-opacity focus:outline-none w-full',\n      () => alert('Aggiungi Amico')\n    );\n    addFriendButton.style.backgroundColor = COLORS.primary;\n\n    const friendIdInput = createElement('input', {\n      className: 'bg-gray-800 text-white px-4 py-2 rounded text-sm w-full mt-2',\n      placeholder: 'id amico'\n    }) as HTMLInputElement;\n\n    leftContent.appendChild(friendsTitle);\n    leftContent.appendChild(friendsListContainer);\n    leftContent.appendChild(addFriendButton);\n    leftContent.appendChild(friendIdInput);\n    leftTd.appendChild(leftContent);\n\n    // Right column - Chat\n    const rightTd = createElement('td', {\n      className: 'w-2/3 align-top'\n    });\n\n    const rightContent = this.createChatContent(user);\n    rightTd.appendChild(rightContent);\n\n    tr.appendChild(leftTd);\n    tr.appendChild(rightTd);\n    tbody.appendChild(tr);\n    table.appendChild(tbody);\n    mainContent.appendChild(table);\n\n    modal.appendChild(closeButton);\n    modal.appendChild(title);\n    modal.appendChild(mainContent);\n    overlay.appendChild(modal);\n\n    // Close on overlay click\n    overlay.addEventListener('click', (e) => {\n      if (e.target === overlay) {\n        this.hide();\n      }\n    });\n\n    return overlay;\n  }\n\n  private createChatContent(user: any): HTMLElement {\n    const chatContainer = createElement('div', {\n      className: 'h-full flex flex-col'\n    });\n\n    if (this.selectedFriend) {\n      // Chat header\n      const chatHeader = createElement('div', {\n        className: 'flex items-center mb-4'\n      });\n\n      const chatTitle = createElement('h3', {\n        className: 'text-lg font-bold',\n        innerHTML: `Chat con ${this.selectedFriend.username}`,\n        style: `color: ${COLORS.primary};`\n      });\n\n      const statusDot = createElement('span', {\n        className: `ml-3 w-3 h-3 rounded-full ${\n          this.selectedFriend.status === 'online' ? 'bg-green-400' : 'bg-gray-400'\n        }`\n      });\n\n      chatHeader.appendChild(chatTitle);\n      chatHeader.appendChild(statusDot);\n\n      // Messages container\n      const messagesContainer = createElement('div', {\n        className: 'flex-1 overflow-y-auto bg-gray-800 rounded p-4 mb-4 space-y-3'\n      });\n\n      const friendMessages = this.messages[this.selectedFriend.id] || [];\n      const currentUsername = user?.username || 'Tu';\n\n      friendMessages.forEach(message => {\n        const messageDiv = createElement('div', {\n          className: `flex ${\n            message.sender === currentUsername ? 'justify-end' : 'justify-start'\n          }`\n        });\n\n        const messageBubble = createElement('div', {\n          className: `max-w-xs px-3 py-2 rounded text-sm ${\n            message.sender === currentUsername\n              ? 'text-white'\n              : 'bg-gray-600 text-white'\n          }`\n        });\n\n        if (message.sender === currentUsername) {\n          messageBubble.style.backgroundColor = COLORS.primary;\n        }\n\n        messageBubble.innerHTML = `\n          <div class=\"font-medium text-xs mb-1 opacity-70\">${message.sender}</div>\n          <div>${message.content}</div>\n        `;\n\n        messageDiv.appendChild(messageBubble);\n        messagesContainer.appendChild(messageDiv);\n      });\n\n      // Input container\n      const inputContainer = createElement('div', {\n        className: 'flex gap-2'\n      });\n\n      const messageInput = createElement('input', {\n        className: 'flex-1 px-3 py-2 rounded bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500',\n        placeholder: 'Scrivi un messaggio...'\n      }) as HTMLInputElement;\n\n      messageInput.value = this.newMessage;\n      messageInput.addEventListener('input', (e) => {\n        this.newMessage = (e.target as HTMLInputElement).value;\n      });\n\n      messageInput.addEventListener('keypress', (e) => {\n        if (e.key === 'Enter') {\n          this.sendMessage(currentUsername);\n        }\n      });\n\n      const sendButton = createButton(\n        'Invia',\n        'text-white px-4 py-2 rounded hover:opacity-90 transition-opacity focus:outline-none',\n        () => this.sendMessage(currentUsername)\n      );\n      sendButton.style.backgroundColor = COLORS.primary;\n\n      inputContainer.appendChild(messageInput);\n      inputContainer.appendChild(sendButton);\n\n      chatContainer.appendChild(chatHeader);\n      chatContainer.appendChild(messagesContainer);\n      chatContainer.appendChild(inputContainer);\n    } else {\n      // No friend selected\n      const placeholder = createElement('div', {\n        className: 'h-full flex items-center justify-center'\n      });\n\n      const placeholderText = createElement('p', {\n        className: 'text-gray-400 text-center',\n        innerHTML: 'Seleziona un amico per iniziare a chattare'\n      });\n\n      placeholder.appendChild(placeholderText);\n      chatContainer.appendChild(placeholder);\n    }\n\n    return chatContainer;\n  }\n\n  private sendMessage(currentUsername: string): void {\n    if (!this.selectedFriend || !this.newMessage.trim()) return;\n\n    const message: Message = {\n      id: Date.now(),\n      sender: currentUsername,\n      content: this.newMessage,\n      timestamp: new Date(),\n    };\n\n    if (!this.messages[this.selectedFriend.id]) {\n      this.messages[this.selectedFriend.id] = [];\n    }\n\n    this.messages[this.selectedFriend.id].push(message);\n    this.newMessage = '';\n    this.refreshModal();\n  }\n\n  private refreshModal(): void {\n    if (!this.modalElement) return;\n    \n    // Remove current modal and recreate\n    document.body.removeChild(this.modalElement);\n    this.modalElement = this.createModal();\n    document.body.appendChild(this.modalElement);\n  }\n\n  destroy(): void {\n    this.hide();\n  }\n}\n","import { createElement, createButton } from '../utils/dom.js';\nimport { authState } from '../state/auth.js';\nimport { router } from '../router/router.js';\nimport { ProfileModal } from './ProfileModal.js';\nimport { SocialModal } from './SocialModal.js';\n\nexport class Navbar {\n  private element: HTMLElement;\n  private profileModal: ProfileModal;\n  private socialModal: SocialModal;\n  private unsubscribe?: () => void;\n\n  constructor() {\n    this.profileModal = new ProfileModal();\n    this.socialModal = new SocialModal();\n    this.element = this.createNavbar();\n    this.bindAuthState();\n  }\n\n  private bindAuthState(): void {\n    this.unsubscribe = authState.subscribe(() => {\n      this.updateNavbar();\n    });\n  }\n\n  private createNavbar(): HTMLElement {\n    const nav = createElement('nav', {\n      className: 'fixed left-0 top-0 h-full w-44 py-6 px-4 flex flex-col shadow-lg z-50',\n      style: 'background-color: #3B2E27;'\n    });\n\n    this.element = nav;\n    this.updateNavbar();\n    return nav;\n  }\n\n  private updateNavbar(): void {\n    const { user } = authState.getState();\n    \n    while (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild);\n    }\n\n    const logoContainer = createElement('div', { className: 'mb-8' });\n    const logoButton = createButton(\n      `<svg class=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path d=\"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z\" />\n      </svg>\n      <span class=\"text-sm\">Home</span>`,\n      'text-white font-semibold text-lg flex flex-col items-center gap-2 hover:text-orange-300 transition-colors w-full p-4',\n      () => router.navigate('/')\n    );\n    logoButton.style.color = '#E67923';\n    \n    logoContainer.appendChild(logoButton);\n    this.element.appendChild(logoContainer);\n\n    const mainContainer = createElement('div', { className: 'flex-1 flex flex-col justify-center' });\n    \n    if (user) {\n      mainContainer.appendChild(this.createAuthenticatedButtons(user));\n    }\n    \n    this.element.appendChild(mainContainer);\n  }\n\n  private createAuthenticatedButtons(user: any): HTMLElement {\n    const container = createElement('div', { className: 'flex flex-col gap-4 w-full' });\n\n    const greeting = createElement('div', {\n      className: 'text-white text-center text-sm mb-4 px-2',\n      innerHTML: `Ciao, ${user.username}!`\n    });\n\n    const profileButton = createButton(\n      'Profilo',\n      'text-white px-3 py-2 rounded transition-all focus:outline-none w-full text-center',\n      () => this.profileModal.show()\n    );\n    profileButton.style.backgroundColor = '#E67923';\n    profileButton.addEventListener('mouseenter', () => {\n      profileButton.style.backgroundColor = '#D16A1E';\n    });\n    profileButton.addEventListener('mouseleave', () => {\n      profileButton.style.backgroundColor = '#E67923';\n    });\n\n    const playButton = createButton(\n      'Play',\n      'text-white px-3 py-2 rounded-md transition-all w-full text-center bg-orange-500 hover:bg-orange-600 focus:outline-none',\n      () => router.navigate('/play')\n    );\n\n    const socialButton = createButton(\n      'Social',\n      'text-white px-3 py-2 rounded-md transition-all w-full text-center bg-orange-500 hover:bg-orange-600 focus:outline-none',\n      () => this.socialModal.show()\n    );\n\n    const logoutButton = createButton(\n      'Logout',\n      'text-white px-3 py-2 rounded transition-all focus:outline-none w-full text-center',\n      () => {\n        authState.logout();\n        router.navigate('/');\n      }\n    );\n    logoutButton.style.backgroundColor = '#6B7280';\n    logoutButton.addEventListener('mouseenter', () => {\n      logoutButton.style.backgroundColor = '#4B5563';\n    });\n    logoutButton.addEventListener('mouseleave', () => {\n      logoutButton.style.backgroundColor = '#6B7280';\n    });\n\n    container.appendChild(greeting);\n    container.appendChild(profileButton);\n    container.appendChild(playButton);\n    container.appendChild(socialButton);\n    container.appendChild(logoutButton);\n\n    return container;\n  }\n\n  getElement(): HTMLElement {\n    return this.element;\n  }\n\n  destroy(): void {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n    }\n    this.profileModal.destroy();\n    this.socialModal.destroy();\n  }\n}\n","import { createElement, createButton, createInput } from '../utils/dom.js';\nimport { authState } from '../state/auth.js';\n\nconst COLORS = {\n  primary: '#E67923',\n  error: '#DC2626',\n  errorHover: '#D32F2F',\n  dark: '#2A2A2A',\n  darkText: '#3C3C3C',\n  loginButton: '#B20000',\n  loginButtonHover: '#D32F2F',\n  inputBg: '#f9fafb',\n  white: '#ffffff',\n  lightGray: '#f5f5f5'\n} as const;\n\nconst EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\ntype TabType = 'login' | 'register';\n\nexport class AuthModal {\n  private isVisible: boolean = false;\n  private modalElement?: HTMLElement;\n  private activeTab: TabType = 'login';\n  private formData = {\n    email: '',\n    username: '',\n    password: '',\n    confirmPassword: ''\n  };\n  private errors: { [key: string]: string } = {};\n  private showCloseButton: boolean = true;\n  private unsubscribe?: () => void;\n\n  constructor(showCloseButton: boolean = true) {\n    this.showCloseButton = showCloseButton;\n    this.bindAuthState();\n  }\n\n  private bindAuthState(): void {\n    this.unsubscribe = authState.subscribe(() => {\n      this.updateErrorDisplay();\n    });\n  }\n\n  show(): void {\n    if (this.isVisible) return;\n    \n    this.isVisible = true;\n    this.modalElement = this.createModal();\n    document.body.appendChild(this.modalElement);\n  }\n\n  hide(): void {\n    if (!this.isVisible || !this.modalElement) return;\n    \n    this.isVisible = false;\n    document.body.removeChild(this.modalElement);\n    this.modalElement = undefined;\n    this.resetForm();\n  }\n\n  private createModal(): HTMLElement {\n    const overlay = createElement('div', {\n      className: 'fixed inset-0 flex items-center justify-center z-50'\n    });\n\n    if (this.showCloseButton) {\n      overlay.addEventListener('click', (e) => {\n        if (e.target === overlay) {\n          this.hide();\n        }\n      });\n    }\n\n    const modal = createElement('div', {\n      className: 'bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 h-[500px] overflow-hidden flex flex-col',\n      style: `background-color: ${COLORS.dark};`\n    });\n\n    modal.addEventListener('click', (e) => e.stopPropagation());\n\n    // Header with close button\n    if (this.showCloseButton) {\n      const header = createElement('div', {\n        className: 'relative px-6 pt-4 pb-4'\n      });\n\n      const closeButton = createButton(\n        '√ó',\n        'absolute top-4 right-4 hover:opacity-70 transition-opacity focus:outline-none text-2xl',\n        () => this.hide()\n      );\n      closeButton.style.color = COLORS.primary;\n\n      header.appendChild(closeButton);\n      modal.appendChild(header);\n    }\n\n    // Tabs\n    const tabsContainer = this.createTabs();\n    modal.appendChild(tabsContainer);\n\n    // Form content\n    const formContainer = createElement('div', {\n      className: 'flex-1 flex flex-col'\n    });\n\n    const form = this.createForm();\n    formContainer.appendChild(form);\n    modal.appendChild(formContainer);\n\n    overlay.appendChild(modal);\n    return overlay;\n  }\n\n  private createTabs(): HTMLElement {\n    const container = createElement('div', {\n      className: 'px-6 mt-4'\n    });\n\n    const tabs = [\n      { id: 'login' as const, label: 'Log In' },\n      { id: 'register' as const, label: 'Sign Up' }\n    ];\n\n    tabs.forEach(tab => {\n      const button = createButton(\n        tab.label,\n        'pb-3 px-1 text-lg font-semibold border-b-2 transition-all mr-8 focus:outline-none hover:opacity-70',\n        () => this.switchTab(tab.id)\n      );\n\n      button.style.color = this.activeTab === tab.id ? COLORS.primary : COLORS.darkText;\n      button.style.borderBottomColor = this.activeTab === tab.id ? COLORS.primary : 'transparent';\n\n      container.appendChild(button);\n    });\n\n    return container;\n  }\n\n  private createForm(): HTMLElement {\n    const form = createElement('form', {\n      className: 'flex flex-col gap-5 pt-4 px-8 pb-6 flex-1 min-h-[300px] items-center'\n    });\n\n    form.addEventListener('submit', (e) => this.handleSubmit(e));\n\n    // Error/Success messages\n    const messageContainer = createElement('div', {\n      className: 'w-full max-w-sm mb-4'\n    });\n    this.updateMessageContainer(messageContainer);\n\n    // Form fields\n    const fieldsContainer = createElement('div', {\n      className: 'flex flex-col gap-6 flex-grow w-full max-w-sm'\n    });\n\n    // Email field\n    fieldsContainer.appendChild(this.createField('email', 'Email Address', 'email', 'Enter your email address...'));\n\n    // Username field (only for register)\n    if (this.activeTab === 'register') {\n      fieldsContainer.appendChild(this.createField('username', 'Username', 'text', 'Enter your username...'));\n    }\n\n    // Password field\n    fieldsContainer.appendChild(this.createField('password', 'Password', 'password', \n      this.activeTab === 'login' ? 'Enter your password...' : 'Create a password...'));\n\n    // Confirm password field (only for register)\n    if (this.activeTab === 'register') {\n      fieldsContainer.appendChild(this.createField('confirmPassword', 'Confirm Password', 'password', 'Confirm your password...'));\n    }\n\n    // Spacer for login\n    if (this.activeTab === 'login') {\n      fieldsContainer.appendChild(createElement('div', { className: 'h-16' }));\n    }\n\n    // Divider\n    const divider = this.createDivider();\n\n    // Submit and Google buttons\n    const buttonsContainer = this.createButtons();\n\n    form.appendChild(messageContainer);\n    form.appendChild(fieldsContainer);\n    form.appendChild(divider);\n    form.appendChild(buttonsContainer);\n\n    return form;\n  }\n\n  private createField(fieldName: string, label: string, type: string, placeholder: string): HTMLElement {\n    const container = createElement('div', {\n      className: 'flex flex-col items-center'\n    });\n\n    const labelEl = createElement('label', {\n      className: 'block text-sm font-medium text-white text-center mb-2 w-full',\n      innerHTML: label\n    });\n\n    const input = createInput(type, placeholder, \n      `w-4/5 px-4 py-3 border rounded-lg outline-none transition-all text-center text-black placeholder-gray-500 ${\n        this.errors[fieldName] ? 'border-red-500' : 'border-gray-700'\n      } bg-gray-100`\n    );\n\n    input.value = this.formData[fieldName as keyof typeof this.formData];\n    input.addEventListener('input', (e) => this.handleInputChange(fieldName, (e.target as HTMLInputElement).value));\n\n    const errorEl = createElement('p', {\n      className: 'text-red-500 text-sm mt-1 text-center',\n      innerHTML: this.errors[fieldName] || ''\n    });\n\n    container.appendChild(labelEl);\n    container.appendChild(input);\n    if (this.errors[fieldName]) {\n      container.appendChild(errorEl);\n    }\n\n    return container;\n  }\n\n  private createDivider(): HTMLElement {\n    const container = createElement('div', {\n      className: 'relative my-6 w-full max-w-sm'\n    });\n\n    const line = createElement('div', {\n      className: 'absolute inset-0 flex items-center'\n    });\n\n    const lineDiv = createElement('div', {\n      className: 'w-full border-t',\n      style: `border-color: ${COLORS.darkText};`\n    });\n\n    const textContainer = createElement('div', {\n      className: 'relative flex justify-center text-sm'\n    });\n\n    const text = createElement('span', {\n      className: 'px-4 text-white',\n      innerHTML: 'or',\n      style: `background-color: ${COLORS.dark};`\n    });\n\n    line.appendChild(lineDiv);\n    textContainer.appendChild(text);\n    container.appendChild(line);\n    container.appendChild(textContainer);\n\n    return container;\n  }\n\n  private createButtons(): HTMLElement {\n    const container = createElement('div', {\n      className: 'mt-auto w-full max-w-sm'\n    });\n\n    const buttonsRow = createElement('div', {\n      className: 'flex gap-3 mb-4 h-12'\n    });\n\n    // Submit button\n    const { isLoading } = authState.getState();\n    const submitButton = createButton(\n      isLoading ? 'Loading...' : (this.activeTab === 'login' ? 'Log in' : 'Create Account'),\n      'flex-1 text-white py-3 px-4 rounded-lg font-semibold transition-all flex items-center justify-center focus:outline-none disabled:opacity-50',\n      () => this.handleFormSubmit()\n    );\n    submitButton.style.backgroundColor = COLORS.loginButton;\n    submitButton.disabled = isLoading;\n\n    submitButton.addEventListener('mouseenter', () => {\n      if (!isLoading) {\n        submitButton.style.backgroundColor = COLORS.loginButtonHover;\n      }\n    });\n    submitButton.addEventListener('mouseleave', () => {\n      if (!isLoading) {\n        submitButton.style.backgroundColor = COLORS.loginButton;\n      }\n    });\n\n    // Google button\n    const googleButton = this.createGoogleButton();\n\n    buttonsRow.appendChild(submitButton);\n    buttonsRow.appendChild(googleButton);\n    container.appendChild(buttonsRow);\n\n    return container;\n  }\n\n  private createGoogleButton(): HTMLElement {\n    const button = createButton(\n      `<svg class=\"w-5 h-5 mr-3\" viewBox=\"0 0 24 24\">\n        <path fill=\"#4285f4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n        <path fill=\"#34a853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n        <path fill=\"#fbbc05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n        <path fill=\"#ea4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n      </svg>\n      Continue with Google`,\n      'flex items-center justify-center px-4 py-3 border rounded-lg font-semibold cursor-pointer h-12 whitespace-nowrap transition-all focus:outline-none text-black'\n    );\n\n    button.style.backgroundColor = COLORS.white;\n    button.style.borderColor = COLORS.darkText;\n    button.style.color = '#000000';\n\n    button.addEventListener('mouseenter', () => {\n      button.style.backgroundColor = COLORS.lightGray;\n    });\n    button.addEventListener('mouseleave', () => {\n      button.style.backgroundColor = COLORS.white;\n    });\n\n    return button;\n  }\n\n  private handleInputChange(field: string, value: string): void {\n    this.formData[field as keyof typeof this.formData] = value;\n    \n    // Clear field error\n    if (this.errors[field]) {\n      delete this.errors[field];\n    }\n\n    // Clear auth errors\n    authState.clearError();\n    authState.clearSuccessMessage();\n  }\n\n  private switchTab(tab: TabType): void {\n    this.activeTab = tab;\n    this.resetForm();\n    this.refreshModal();\n  }\n\n  private resetForm(): void {\n    this.formData = {\n      email: '',\n      username: '',\n      password: '',\n      confirmPassword: ''\n    };\n    this.errors = {};\n  }\n\n  private refreshModal(): void {\n    if (this.modalElement && this.modalElement.parentNode) {\n      const newModal = this.createModal();\n      this.modalElement.parentNode.replaceChild(newModal, this.modalElement);\n      this.modalElement = newModal;\n    }\n  }\n\n  private updateMessageContainer(container: HTMLElement): void {\n    const { error, successMessage } = authState.getState();\n    \n    container.innerHTML = '';\n    \n    if (error) {\n      const errorEl = createElement('p', {\n        className: 'text-red-500 text-sm text-center bg-red-100 p-2 rounded',\n        innerHTML: error\n      });\n      container.appendChild(errorEl);\n    }\n    \n    if (successMessage) {\n      const successEl = createElement('p', {\n        className: 'text-green-500 text-sm text-center bg-green-100 p-2 rounded',\n        innerHTML: successMessage\n      });\n      container.appendChild(successEl);\n    }\n  }\n\n  private updateErrorDisplay(): void {\n    // This will be called when auth state changes\n    if (this.modalElement) {\n      const messageContainer = this.modalElement.querySelector('.w-full.max-w-sm.mb-4') as HTMLElement;\n      if (messageContainer) {\n        this.updateMessageContainer(messageContainer);\n      }\n    }\n  }\n\n  private validateForm(): boolean {\n    const newErrors: { [key: string]: string } = {};\n\n    if (!EMAIL_REGEX.test(this.formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n\n    if (this.activeTab === 'register' && !this.formData.username.trim()) {\n      newErrors.username = 'Username is required';\n    }\n\n    if (this.formData.password.length < 6) {\n      newErrors.password = 'Password must be at least 6 characters';\n    }\n\n    if (this.activeTab === 'register' && this.formData.password !== this.formData.confirmPassword) {\n      newErrors.confirmPassword = 'Passwords do not match';\n    }\n\n    this.errors = newErrors;\n    return Object.keys(newErrors).length === 0;\n  }\n\n  private handleSubmit(e: Event): void {\n    e.preventDefault();\n    this.handleFormSubmit();\n  }\n\n  private async handleFormSubmit(): Promise<void> {\n    if (!this.validateForm()) {\n      this.refreshModal();\n      return;\n    }\n\n    try {\n      if (this.activeTab === 'login') {\n        await authState.login(this.formData.email, this.formData.password);\n      } else {\n        await authState.register(this.formData.email, this.formData.username, this.formData.password);\n      }\n      \n      // Success - close modal\n      this.hide();\n    } catch (err) {\n      // Error handling is done in the auth state\n      console.error('Auth error:', err);\n    }\n  }\n\n  destroy(): void {\n    this.hide();\n    if (this.unsubscribe) {\n      this.unsubscribe();\n    }\n  }\n}\n","import { authState } from '../state/auth.js';\nimport { AuthModal } from './AuthModal.js';\nimport { renderTo } from '../utils/dom.js';\n\nexport class AuthGuard {\n  private authModal: AuthModal;\n  private currentContent?: HTMLElement;\n  private container: HTMLElement;\n  private unsubscribe?: () => void;\n\n  constructor(container: HTMLElement) {\n    this.container = container;\n    this.authModal = new AuthModal(false);\n    this.bindAuthState();\n    this.checkAuthState();\n  }\n\n  private bindAuthState(): void {\n    this.unsubscribe = authState.subscribe(() => {\n      this.checkAuthState();\n    });\n  }\n\n  private checkAuthState(): void {\n    const { isAuthenticated, isLoading } = authState.getState();\n    \n    if (isLoading) {\n      this.showLoading();\n    } else if (!isAuthenticated) {\n      this.authModal.show();\n    } else {\n      this.authModal.hide();\n    }\n  }\n\n  private showLoading(): void {\n  }\n\n  setContent(content: HTMLElement): void {\n    const { isAuthenticated } = authState.getState();\n    \n    if (isAuthenticated) {\n      this.currentContent = content;\n      renderTo(content, this.container);\n    }\n  }\n\n  destroy(): void {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n    }\n    this.authModal.destroy();\n  }\n}\n","import { createElement } from '../utils/dom.js';\n\nexport class HomePage {\n  private element: HTMLElement;\n\n  constructor() {\n    this.element = this.createPage();\n  }\n\n  private createPage(): HTMLElement {\n    const container = createElement('div', {\n      className: 'p-6'\n    });\n\n    const title = createElement('h1', {\n      className: 'text-3xl font-bold text-gray-800 mb-6',\n      innerHTML: 'Benvenuto a ft_transcendence'\n    });\n\n    const mainCard = createElement('div', {\n      className: 'bg-white rounded-lg shadow-md p-6'\n    });\n\n    const featuresGrid = createElement('div', {\n      className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6'\n    });\n\n    const features = [\n      { title: 'Feature 1', bgClass: 'bg-blue-50', textClass: 'text-blue-800' },\n      { title: 'Feature 2', bgClass: 'bg-green-50', textClass: 'text-green-800' },\n      { title: 'Feature 3', bgClass: 'bg-purple-50', textClass: 'text-purple-800' }\n    ];\n\n    features.forEach(feature => {\n      const featureCard = createElement('div', {\n        className: `${feature.bgClass} p-4 rounded-lg`\n      });\n\n      const featureTitle = createElement('h3', {\n        className: `font-semibold ${feature.textClass}`,\n        innerHTML: feature.title\n      });\n\n      featureCard.appendChild(featureTitle);\n      featuresGrid.appendChild(featureCard);\n    });\n\n    mainCard.appendChild(featuresGrid);\n    container.appendChild(title);\n    container.appendChild(mainCard);\n\n    return container;\n  }\n\n  getElement(): HTMLElement {\n    return this.element;\n  }\n\n  destroy(): void {\n  }\n}\n","import { createElement } from '../utils/dom.js';\n\nexport class PlayPage {\n  private element: HTMLElement;\n\n  constructor() {\n    this.element = this.createPage();\n  }\n\n  private createPage(): HTMLElement {\n    const container = createElement('div', {\n      className: 'p-6'\n    });\n\n    const title = createElement('h1', {\n      className: 'text-3xl font-bold text-gray-800 mb-6',\n      innerHTML: 'Gioca'\n    });\n\n    const content = createElement('div', {\n      className: 'bg-white rounded-lg shadow-md p-6'\n    });\n\n    const description = createElement('p', {\n      className: 'text-gray-600',\n      innerHTML: 'Inizia una nuova partita di Pong!'\n    });\n\n    content.appendChild(description);\n    container.appendChild(title);\n    container.appendChild(content);\n\n    return container;\n  }\n\n  getElement(): HTMLElement {\n    return this.element;\n  }\n\n  destroy(): void {\n  }\n}\n","import { createElement, renderTo } from './utils/dom.js';\nimport { router } from './router/router.js';\nimport { authState } from './state/auth.js';\nimport { Navbar } from './components/Navbar.js';\nimport { AuthGuard } from './components/AuthGuard.js';\nimport { HomePage } from './pages/HomePage.js';\nimport { PlayPage } from './pages/PlayPage.js';\n\nexport class App {\n  private navbar: Navbar;\n  private authGuard: AuthGuard;\n  private mainContent: HTMLElement;\n  private currentPage?: { destroy(): void };\n  private unsubscribe?: () => void;\n\n  constructor() {\n    this.mainContent = this.initializeDOM();\n    this.navbar = new Navbar();\n    this.authGuard = new AuthGuard(this.mainContent);\n    this.setupRoutes();\n    this.bindAuthState();\n    \n    document.body.appendChild(this.navbar.getElement());\n    \n    router.start();\n  }\n\n  private initializeDOM(): HTMLElement {\n    const app = document.getElementById('app');\n    if (!app) {\n      throw new Error('App element not found');\n    }\n\n    const layout = createElement('div', {\n      className: 'min-h-screen bg-gray-100'\n    });\n\n    const mainContent = createElement('div', {\n      className: 'ml-44 p-8 min-h-screen'\n    });\n\n    layout.appendChild(mainContent);\n    renderTo(layout, app);\n\n    return mainContent;\n  }\n\n  private setupRoutes(): void {\n    router.addRoute('/', () => this.renderPage(new HomePage()));\n    router.addRoute('/play', () => this.renderPage(new PlayPage()));\n  }\n\n  private bindAuthState(): void {\n    this.unsubscribe = authState.subscribe(() => {\n      const { isAuthenticated } = authState.getState();\n      \n      if (isAuthenticated) {\n        this.mainContent.style.display = 'block';\n      } else {\n        this.mainContent.style.display = 'none';\n      }\n    });\n  }\n\n  private renderPage(page: { getElement(): HTMLElement; destroy(): void }): void {\n    const { isAuthenticated } = authState.getState();\n    \n    if (this.currentPage) {\n      this.currentPage.destroy();\n    }\n\n    this.currentPage = page;\n\n    if (isAuthenticated) {\n      this.authGuard.setContent(page.getElement());\n    }\n  }\n\n  destroy(): void {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n    }\n    \n    this.navbar.destroy();\n    this.authGuard.destroy();\n    \n    if (this.currentPage) {\n      this.currentPage.destroy();\n    }\n  }\n}\n","import './styles.css';\nimport { App } from './App';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new App();\n});\n"],"names":["createElement","tag","attributes","children","element","key","value","child","createButton","text","className","onClick","button","createInput","type","placeholder","clearElement","renderTo","container","Router","path","handler","requiresAuth","route","r","router","API_BASE_URL","ApiService","token","credentials","response","data","userData","url","options","headers","apiService","AuthState","userString","user","error","listener","email","password","err","errorMessage","username","authState","ImageUploadService","file","formData","resolve","reject","reader","e","_a","ProfileImageUpload","currentImageUrl","onImageUploaded","defaultIcon","hoverOverlay","validationError","previewUrl","fileToUpload","imageUrl","currentUser","updatedUser","isPreview","overlay","COLORS","ProfileModal","stats","playerStats","modal","closeButton","title","content","userTable","table","tbody","tr","avatarTd","profileImageUpload","infoTd","infoDiv","mailDiv","walletDiv","walletContainer","walletLabel","walletButton","statsTopGrid","topStatsGrid","rankDiv","winRateDiv","winRate","tournamentsDiv","mainStatsGrid","goalsScoredDiv","avgGoalsScored","goalsReceivedDiv","goalsReceived","avgGoalsReceived","totalMatchesDiv","tournamentsWonDiv","matchResultsSection","matchResultsTitle","matchResultsContent","winsRow","winsRate","lossesRow","lossRate","goalAnalysisSection","goalAnalysisTitle","progressBarContainer","totalGoals","progressWidth","progressBar","goalStatsContainer","goalsScoredStats","goalsReceivedStats","SocialModal","mainContent","leftTd","leftContent","friendsTitle","friendsListContainer","friend","friendItem","_b","addFriendButton","friendIdInput","rightTd","rightContent","chatContainer","chatHeader","chatTitle","statusDot","messagesContainer","friendMessages","currentUsername","message","messageDiv","messageBubble","inputContainer","messageInput","sendButton","placeholderText","Navbar","nav","logoContainer","logoButton","mainContainer","greeting","profileButton","playButton","socialButton","logoutButton","EMAIL_REGEX","AuthModal","showCloseButton","header","tabsContainer","formContainer","form","tab","messageContainer","fieldsContainer","divider","buttonsContainer","fieldName","label","labelEl","input","errorEl","line","lineDiv","textContainer","buttonsRow","isLoading","submitButton","googleButton","field","newModal","successMessage","successEl","newErrors","AuthGuard","isAuthenticated","HomePage","mainCard","featuresGrid","feature","featureCard","featureTitle","PlayPage","description","App","app","layout","page"],"mappings":"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"}