(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function E(e,t={},n=[]){const r=document.createElement(e);return t&&Object.entries(t).forEach(([s,o])=>{r[s]=o}),n&&n.length>0&&!(t!=null&&t.innerHTML)&&n.forEach(s=>{typeof s=="string"?r.appendChild(document.createTextNode(s)):r.appendChild(s)}),r}function te(e,t="",n){const r=E("button",{className:`${t} focus:outline-none`,innerHTML:e});return n&&r.addEventListener("click",n),r}function pu(e="text",t="",n=""){return E("input",{type:e,placeholder:t,className:`${n} focus:outline-none`})}function hu(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Mi(e,t){hu(t),t.appendChild(e)}class mu{constructor(){this.routes=[],this.currentPath="/",window.addEventListener("popstate",()=>{this.handleRoute()}),this.currentPath=window.location.pathname}addRoute(t,n,r=!1){this.routes.push({path:t,handler:n,requiresAuth:r})}navigate(t){this.currentPath=t,window.history.pushState({},"",t),this.handleRoute()}handleRoute(){const t=this.routes.find(n=>n.path===this.currentPath);t?t.handler():this.navigate("/")}getCurrentPath(){return this.currentPath}start(){this.handleRoute()}}const ke=new mu,rn="/api";class yu{constructor(){this.token=null,this.token=localStorage.getItem("token")}saveToken(t){this.token=t,localStorage.setItem("token",t)}getToken(){return this.token}removeToken(){this.token=null,localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("id"),localStorage.removeItem("mail"),localStorage.removeItem("username")}async login(t){const n=await fetch(`${rn}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await n.json();if(!n.ok)throw new Error(r.error||r.message||"Login failed");return r}async register(t){const n=await fetch(`${rn}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await n.json();if(!n.ok)throw new Error(r.error||r.message||"Registration failed");return r}async googleAuth(t){const n=await fetch(`${rn}/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})}),r=await n.json();if(!n.ok)throw new Error(r.error||r.message||"Google authentication failed");return r}async makeAuthenticatedRequest(t,n={}){const r={"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},s=await fetch(`${rn}${t}`,{...n,headers:{...r,...n.headers}});if(s.status===401)throw this.removeToken(),new Error("Session expired");return s}async getStats(t){const n=await this.makeAuthenticatedRequest(`/stats?id=${t}`,{method:"GET"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch stats")}return await n.json()}async getAllStats(){const t=await this.makeAuthenticatedRequest("/allstats",{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to fetch all stats")}return await t.json()}async getFriends(t){const n=await this.makeAuthenticatedRequest(`/friend?id=${t}`,{method:"GET"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch friends")}return await n.json()}async addFriend(t,n){const r=await this.makeAuthenticatedRequest("/addfriend",{method:"POST",body:JSON.stringify({id1:t,id2:n})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to add friend")}return await r.json()}async removeFriend(t,n){const r=await this.makeAuthenticatedRequest("/removefriend",{method:"DELETE",body:JSON.stringify({id1:t,id2:n})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to remove friend")}return await r.json()}async getAllFriendships(){const t=await this.makeAuthenticatedRequest("/allfriendships",{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to fetch friendships")}return await t.json()}async getAllMatches(){const t=await this.makeAuthenticatedRequest("/allmatch",{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to fetch matches")}return await t.json()}async getMatchById(t){const n=await this.makeAuthenticatedRequest(`/matchid?id=${t}`,{method:"GET"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch match")}return await n.json()}async getPlayerMatches(t){const n=await this.makeAuthenticatedRequest(`/allmatchplayer?id_player=${t}`,{method:"GET"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch player matches")}return await n.json()}async getPlayersByMatchId(t){const n=await this.makeAuthenticatedRequest(`/playersbymatchid?id=${t}`,{method:"GET"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch players")}return await n.json()}async createMatch(t){const n=await this.makeAuthenticatedRequest("/match",{method:"POST",body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to create match")}return await n.json()}async createTournament(t){const n=await this.makeAuthenticatedRequest("/tournament",{method:"POST",body:JSON.stringify({tournament_name:t})});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to create tournament")}return await n.json()}async getAllTournaments(){const t=await this.makeAuthenticatedRequest("/alltournament",{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to fetch tournaments")}return await t.json()}async startTournament(t){const n=await this.makeAuthenticatedRequest("/starttournament",{method:"POST",body:JSON.stringify({id:t})});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to start tournament")}return await n.json()}async finishTournament(t,n){const r=await this.makeAuthenticatedRequest("/finishtournament",{method:"POST",body:JSON.stringify({id:t,id_winner:n})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to finish tournament")}return await r.json()}async sendHeartbeat(){const t=await this.makeAuthenticatedRequest("/heartbeat",{method:"POST"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to send heartbeat")}return await t.json()}async getUserLastActive(t){const n=await this.makeAuthenticatedRequest(`/heartbeat/get?id=${t}`,{method:"GET"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to get user status")}return await n.json()}async logout(t){const n=await fetch(`${rn}/logout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t})}),r=await n.json();if(!n.ok)throw new Error(r.error||"Logout failed");return this.removeToken(),r}}const oe=new yu;class bu{constructor(){this.user=null,this.isLoading=!0,this.error=null,this.successMessage=null,this.listeners=new Set,this.initializeAuth()}async initializeAuth(){if(oe.getToken())try{const r=await(await oe.makeAuthenticatedRequest("/token")).json();localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user));const s=localStorage.getItem("user");if(s){const o=JSON.parse(s);localStorage.setItem("username",o.username),localStorage.setItem("id",o.id),localStorage.setItem("mail",o.mail),this.user=o,ke.navigate("/")}}catch(n){console.error("Auth initialization failed:",n),oe.removeToken()}this.isLoading=!1,this.notifyListeners()}notifyListeners(){this.listeners.forEach(t=>t())}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}getState(){return{user:this.user,isAuthenticated:!!this.user,isLoading:this.isLoading,error:this.error,successMessage:this.successMessage}}async login(t,n){try{this.isLoading=!0,this.error=null,this.successMessage=null,this.notifyListeners();const r=await oe.login({mail:t,psw:n});oe.saveToken(r.token),this.user=r.user,this.successMessage="Login successful!",ke.navigate("/")}catch(r){const s=r instanceof Error?r.message:"Login failed";throw this.error=s,r}finally{this.isLoading=!1,this.notifyListeners()}}async register(t,n,r){try{this.isLoading=!0,this.error=null,this.successMessage=null,this.notifyListeners();const s=await oe.register({mail:t,username:n,psw:r});oe.saveToken(s.token),this.user=s.user,ke.navigate("/")}catch(s){const o=s instanceof Error?s.message:"Registration failed";throw this.error=o,s}finally{this.isLoading=!1,this.notifyListeners()}}async googleAuth(t){try{this.isLoading=!0,this.error=null,this.successMessage=null,this.notifyListeners();const n=await oe.googleAuth(t);oe.saveToken(n.token),this.user=n.user,this.successMessage="Google login successful!",localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("username",n.user.username),localStorage.setItem("id",n.user.id.toString()),localStorage.setItem("mail",n.user.mail),ke.navigate("/")}catch(n){const r=n instanceof Error?n.message:"Google authentication failed";throw this.error=r,n}finally{this.isLoading=!1,this.notifyListeners()}}logout(){oe.removeToken(),this.user=null,this.error=null,this.successMessage=null,this.notifyListeners()}clearError(){this.error=null,this.notifyListeners()}clearSuccessMessage(){this.successMessage=null,this.notifyListeners()}updateUser(t){this.user=t,localStorage.setItem("user",JSON.stringify(t)),this.notifyListeners()}}const G=new bu;class Fr{static async uploadProfileImage(t){const n=new FormData;n.append("profileImage",t);const r=await fetch("/api/user/upload-avatar",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:n});if(!r.ok)throw new Error("Failed to upload image");return(await r.json()).imageUrl}static validateImageFile(t){return["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)?t.size>5242880?"Il file Ã¨ troppo grande. Massimo 5MB.":null:"Formato file non supportato. Usa JPEG, PNG, GIF o WebP."}static previewImage(t){return new Promise((n,r)=>{const s=new FileReader;s.onload=o=>{var i;(i=o.target)!=null&&i.result?n(o.target.result):r(new Error("Failed to read file"))},s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(t)})}}class gu{constructor(t,n){this.isUploading=!1,this.onImageUploaded=n,this.element=this.createElement(t)}createElement(t){const n=E("div",{className:"w-20 h-20 rounded-lg flex items-center justify-center border-4 border-orange-500 bg-gray-700 cursor-pointer hover:bg-gray-600 transition-all group relative overflow-hidden"});this.imagePreview=E("img",{className:"w-full h-full object-cover",src:t||"",alt:"Profile Image",style:t?"display: block;":"display: none;"});const r=E("div",{className:"text-white font-bold text-2xl flex items-center justify-center w-full h-full",innerHTML:"IMG",style:t?"display: none;":"display: flex;"}),s=E("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",innerHTML:`<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>`});return this.fileInput=E("input",{type:"file",accept:"image/*",className:"hidden"}),this.fileInput.addEventListener("change",o=>this.handleFileSelect(o)),n.addEventListener("click",()=>this.fileInput.click()),n.appendChild(this.imagePreview),n.appendChild(r),n.appendChild(s),n.appendChild(this.fileInput),n}async handleFileSelect(t){var o;const r=(o=t.target.files)==null?void 0:o[0];if(!r)return;const s=Fr.validateImageFile(r);if(s){alert(s);return}try{const i=await Fr.previewImage(r);this.updateImageDisplay(i,!0),await this.uploadImage(r)}catch(i){console.error("Error handling file:",i),alert("Errore durante la gestione del file")}}async uploadImage(t){var r;const n=t||((r=this.fileInput.files)==null?void 0:r[0]);if(!(!n||this.isUploading)){this.isUploading=!0,this.showLoadingState();try{const s=await Fr.uploadProfileImage(n),o=G.getState().user;if(o){const i={...o,profileImage:s};G.updateUser(i)}this.updateImageDisplay(s,!1),this.onImageUploaded&&this.onImageUploaded(s),alert("Immagine caricata con successo!")}catch(s){console.error("Error uploading image:",s),alert("Errore durante il caricamento dell'immagine"),this.resetToDefaultState()}finally{this.isUploading=!1}}}updateImageDisplay(t,n){this.imagePreview.src=t,this.imagePreview.style.display="block";const r=this.element.querySelector('div[innerHTML*="IMG"]');r&&(r.style.display="none")}showLoadingState(){const t=this.element.querySelector(".group-hover\\:opacity-100");t&&(t.innerHTML=`<svg class="w-6 h-6 text-white animate-spin" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>`,t.classList.remove("opacity-0"),t.classList.add("opacity-100"))}resetToDefaultState(){const t=this.element.querySelector(".opacity-100");t&&(t.innerHTML=`<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>`,t.classList.remove("opacity-100"),t.classList.add("opacity-0"))}getElement(){return this.element}updateImage(t){this.imagePreview.src=t}destroy(){this.fileInput.removeEventListener("change",this.handleFileSelect)}}const ss={id:43113,name:"Fuji C-Chain",nativeCurrency:{name:"Avalanche Fuji",symbol:"AVAX",decimals:18},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://testnet.snowtrace.io",apiUrl:"https://api-testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959},teleporterMessenger:{address:"0x253b2784c75e510dD0fF1da844684a1aC0aa5fcf"}},testnet:!0},wu="1.1.0";let ue=class os extends Error{constructor(t,n={}){var i;const r=n.cause instanceof os?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof os&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${wu}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};function et(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const Ri=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Fi=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Oi=/^\(.+?\).*?$/,Mo=/^tuple(?<array>(\[(\d*)\])*)$/;function is(e){let t=e.type;if(Mo.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const o=e.components[s];t+=is(o),s<n-1&&(t+=", ")}const r=et(Mo,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,is({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Rt(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=is(s),r!==n-1&&(t+=", ")}return t}function ir(e){var t;return e.type==="function"?`function ${e.name}(${Rt(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${(t=e.outputs)!=null&&t.length?` returns (${Rt(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Rt(e.inputs)})`:e.type==="error"?`error ${e.name}(${Rt(e.inputs)})`:e.type==="constructor"?`constructor(${Rt(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Li=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function vu(e){return Li.test(e)}function xu(e){return et(Li,e)}const zi=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Eu(e){return zi.test(e)}function Tu(e){return et(zi,e)}const _i=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Pu(e){return _i.test(e)}function Au(e){return et(_i,e)}const ji=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function hr(e){return ji.test(e)}function Cu(e){return et(ji,e)}const Ui=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Iu(e){return Ui.test(e)}function Su(e){return et(Ui,e)}const Di=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function $u(e){return Di.test(e)}function Bu(e){return et(Di,e)}const ku=/^receive\(\) external payable$/;function Nu(e){return ku.test(e)}const Ro=new Set(["memory","indexed","storage","calldata"]),Mu=new Set(["indexed"]),as=new Set(["calldata","memory","storage"]);class Ru extends ue{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Fu extends ue{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Ou extends ue{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Lu extends ue{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class zu extends ue{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class _u extends ue{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class ju extends ue{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Uu extends ue{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Du extends ue{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Yt extends ue{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Gu extends ue{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Hu extends ue{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class qu extends ue{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Vu extends ue{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Wu(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const i of s[1])o+=`[${i.type}${i.name?`:${i.name}`:""}]`;r+=`(${s[0]}{${o}})`}return t?`${t}:${e}${r}`:e}const Or=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function cs(e,t={}){if(Pu(e))return Zu(e,t);if(Eu(e))return Ju(e,t);if(vu(e))return Yu(e,t);if(Iu(e))return Ku(e,t);if($u(e))return Xu(e);if(Nu(e))return{type:"receive",stateMutability:"payable"};throw new Gu({signature:e})}function Zu(e,t={}){const n=Au(e);if(!n)throw new Yt({signature:e,type:"function"});const r=le(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(Je(r[a],{modifiers:as,structs:t,type:"function"}));const i=[];if(n.returns){const a=le(n.returns),c=a.length;for(let u=0;u<c;u++)i.push(Je(a[u],{modifiers:as,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}function Ju(e,t={}){const n=Tu(e);if(!n)throw new Yt({signature:e,type:"event"});const r=le(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(Je(r[i],{modifiers:Mu,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Yu(e,t={}){const n=xu(e);if(!n)throw new Yt({signature:e,type:"error"});const r=le(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(Je(r[i],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Ku(e,t={}){const n=Su(e);if(!n)throw new Yt({signature:e,type:"constructor"});const r=le(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(Je(r[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Xu(e){const t=Bu(e);if(!t)throw new Yt({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const Qu=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ed=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,td=/^u?int$/;function Je(e,t){var l,f;const n=Wu(e,t==null?void 0:t.type,t==null?void 0:t.structs);if(Or.has(n))return Or.get(n);const r=Oi.test(e),s=et(r?ed:Qu,e);if(!s)throw new zu({param:e});if(s.name&&rd(s.name))throw new _u({param:e,name:s.name});const o=s.name?{name:s.name}:{},i=s.modifier==="indexed"?{indexed:!0}:{},a=(t==null?void 0:t.structs)??{};let c,u={};if(r){c="tuple";const p=le(s.type),h=[],m=p.length;for(let w=0;w<m;w++)h.push(Je(p[w],{structs:a}));u={components:h}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(td.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,(t==null?void 0:t.type)!=="struct"&&!Gi(c))throw new Ou({type:c});if(s.modifier){if(!((f=(l=t==null?void 0:t.modifiers)==null?void 0:l.has)!=null&&f.call(l,s.modifier)))throw new ju({param:e,type:t==null?void 0:t.type,modifier:s.modifier});if(as.has(s.modifier)&&!sd(c,!!s.array))throw new Uu({param:e,type:t==null?void 0:t.type,modifier:s.modifier})}const d={type:`${c}${s.array??""}`,...o,...i,...u};return Or.set(n,d),d}function le(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const i=e[o],a=e.slice(o+1);switch(i){case",":return r===0?le(a,[...t,n.trim()]):le(a,t,`${n}${i}`,r);case"(":return le(a,t,`${n}${i}`,r+1);case")":return le(a,t,`${n}${i}`,r-1);default:return le(a,t,`${n}${i}`,r)}}if(n==="")return t;if(r!==0)throw new Vu({current:n,depth:r});return t.push(n.trim()),t}function Gi(e){return e==="address"||e==="bool"||e==="function"||e==="string"||Ri.test(e)||Fi.test(e)}const nd=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function rd(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||Ri.test(e)||Fi.test(e)||nd.test(e)}function sd(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function js(e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];if(!hr(a))continue;const c=Cu(a);if(!c)throw new Yt({signature:a,type:"struct"});const u=c.properties.split(";"),d=[],l=u.length;for(let f=0;f<l;f++){const h=u[f].trim();if(!h)continue;const m=Je(h,{type:"struct"});d.push(m)}if(!d.length)throw new Hu({signature:a});t[c.name]=d}const r={},s=Object.entries(t),o=s.length;for(let i=0;i<o;i++){const[a,c]=s[i];r[a]=Hi(c,t)}return r}const od=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Hi(e,t,n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const i=e[o];if(Oi.test(i.type))r.push(i);else{const c=et(od,i.type);if(!(c!=null&&c.type))throw new Du({abiParameter:i});const{array:u,type:d}=c;if(d in t){if(n.has(d))throw new qu({type:d});r.push({...i,type:`tuple${u??""}`,components:Hi(t[d]??[],t,new Set([...n,d]))})}else if(Gi(d))r.push(i);else throw new Fu({type:d})}}return r}function qi(e){const t=js(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];hr(o)||n.push(cs(o,t))}return n}function Fo(e){let t;if(typeof e=="string")t=cs(e);else{const n=js(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(!hr(o)){t=cs(o,n);break}}}if(!t)throw new Ru({signature:e});return t}function Oo(e){const t=[];if(typeof e=="string"){const n=le(e),r=n.length;for(let s=0;s<r;s++)t.push(Je(n[s],{modifiers:Ro}))}else{const n=js(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(hr(o))continue;const i=le(o),a=i.length;for(let c=0;c<a;c++)t.push(Je(i[c],{modifiers:Ro,structs:n}))}}if(t.length===0)throw new Lu({params:e});return t}function L(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}function xe(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new gd(e.type);return`${e.name}(${mr(e.inputs,{includeName:t})})`}function mr(e,{includeName:t=!1}={}){return e?e.map(n=>id(n,{includeName:t})).join(t?", ":","):""}function id(e,{includeName:t}){return e.type.startsWith("tuple")?`(${mr(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function Re(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function q(e){return Re(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Vi="2.38.0";let sn={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Vi}`},T=class us extends Error{constructor(t,n={}){var a;const r=(()=>{var c;return n.cause instanceof us?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof us&&n.cause.docsPath||n.docsPath,o=(a=sn.getDocsUrl)==null?void 0:a.call(sn,{...n,docsPath:s}),i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...sn.version?[`Version: ${sn.version}`]:[]].join(`
`);super(i,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Vi}walk(t){return Wi(this,t)}};function Wi(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Wi(e.cause,t):t?null:e}class ad extends T{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class Lo extends T{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Zi extends T{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${mr(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class On extends T{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class cd extends T{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class ud extends T{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${q(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class dd extends T{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class ld extends T{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class zo extends T{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Ji extends T{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class fd extends T{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Yi extends T{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class _o extends T{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Dt extends T{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Ki extends T{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class pd extends T{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class hd extends T{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${xe(t.abiItem)}\`, and`,`\`${n.type}\` in \`${xe(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let md=class extends T{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class ln extends T{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${mr(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class yr extends T{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${xe(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class yd extends T{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class bd extends T{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Xi=class extends T{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class gd extends T{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class wd extends T{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let Qi=class extends T{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},ea=class extends T{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class jo extends T{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Kt(e,{dir:t,size:n=32}={}){return typeof e=="string"?at(e,{dir:t,size:n}):vd(e,{dir:t,size:n})}function at(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new ea({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function vd(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new ea({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=t==="right";r[o?s:n-s-1]=e[o?s:e.length-s-1]}return r}let ta=class extends T{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},xd=class extends T{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class Ed extends T{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Td=class extends T{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}};function ct(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Ce(e,{size:t}){if(q(e)>t)throw new Td({givenSize:q(e),maxSize:t})}function fe(e,t={}){const{signed:n}=t;t.size&&Ce(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Pd(e,t={}){let n=e;if(t.size&&(Ce(n,{size:t.size}),n=ct(n)),ct(n)==="0x00")return!1;if(ct(n)==="0x01")return!0;throw new Ed(n)}function Ee(e,t={}){return Number(fe(e,t))}const Ad=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ye(e,t={}){return typeof e=="number"||typeof e=="bigint"?z(e,t):typeof e=="string"?Gt(e,t):typeof e=="boolean"?na(e,t):K(e,t)}function na(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Ce(n,{size:t.size}),Kt(n,{size:t.size})):n}function K(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Ad[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Ce(r,{size:t.size}),Kt(r,{dir:"right",size:t.size})):r}function z(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const c=typeof e=="bigint"?"n":"";throw new ta({max:o?`${o}${c}`:void 0,min:`${i}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Kt(a,{size:r}):a}const Cd=new TextEncoder;function Gt(e,t={}){const n=Cd.encode(e);return K(n,t)}const Id=new TextEncoder;function Xt(e,t={}){return typeof e=="number"||typeof e=="bigint"?$d(e,t):typeof e=="boolean"?Sd(e,t):Re(e)?Fe(e,t):bt(e,t)}function Sd(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Ce(n,{size:t.size}),Kt(n,{size:t.size})):n}const Ue={zero:48,nine:57,A:65,F:70,a:97,f:102};function Uo(e){if(e>=Ue.zero&&e<=Ue.nine)return e-Ue.zero;if(e>=Ue.A&&e<=Ue.F)return e-(Ue.A-10);if(e>=Ue.a&&e<=Ue.f)return e-(Ue.a-10)}function Fe(e,t={}){let n=e;t.size&&(Ce(n,{size:t.size}),n=Kt(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let i=0,a=0;i<s;i++){const c=Uo(r.charCodeAt(a++)),u=Uo(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new T(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);o[i]=c*16+u}return o}function $d(e,t){const n=z(e,t);return Fe(n)}function bt(e,t={}){const n=Id.encode(e);return typeof t.size=="number"?(Ce(n,{size:t.size}),Kt(n,{dir:"right",size:t.size})):n}const er=BigInt(2**32-1),Do=BigInt(32);function Bd(e,t=!1){return t?{h:Number(e&er),l:Number(e>>Do&er)}:{h:Number(e>>Do&er)|0,l:Number(e&er)|0}}function kd(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:i,l:a}=Bd(e[o],t);[r[o],s[o]]=[i,a]}return[r,s]}const Nd=(e,t,n)=>e<<n|t>>>32-n,Md=(e,t,n)=>t<<n|e>>>32-n,Rd=(e,t,n)=>t<<n-32|e>>>64-n,Fd=(e,t,n)=>e<<n-32|t>>>64-n,Nt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Od(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function fn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function vt(e,...t){if(!Od(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ld(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");fn(e.outputLen),fn(e.blockLen)}function Ht(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ra(e,t){vt(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function zd(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function qt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Lr(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Se(e,t){return e<<32-t|e>>>t}const _d=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function jd(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Ud(e){for(let t=0;t<e.length;t++)e[t]=jd(e[t]);return e}const Go=_d?e=>e:Ud;function Dd(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function br(e){return typeof e=="string"&&(e=Dd(e)),vt(e),e}function Gd(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];vt(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}class Us{}function sa(e){const t=r=>e().update(br(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Hd(e=32){if(Nt&&typeof Nt.getRandomValues=="function")return Nt.getRandomValues(new Uint8Array(e));if(Nt&&typeof Nt.randomBytes=="function")return Uint8Array.from(Nt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const qd=BigInt(0),on=BigInt(1),Vd=BigInt(2),Wd=BigInt(7),Zd=BigInt(256),Jd=BigInt(113),oa=[],ia=[],aa=[];for(let e=0,t=on,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],oa.push(2*(5*r+n)),ia.push((e+1)*(e+2)/2%64);let s=qd;for(let o=0;o<7;o++)t=(t<<on^(t>>Wd)*Jd)%Zd,t&Vd&&(s^=on<<(on<<BigInt(o))-on);aa.push(s)}const ca=kd(aa,!0),Yd=ca[0],Kd=ca[1],Ho=(e,t,n)=>n>32?Rd(e,t,n):Nd(e,t,n),qo=(e,t,n)=>n>32?Fd(e,t,n):Md(e,t,n);function Xd(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,u=n[c],d=n[c+1],l=Ho(u,d,1)^n[a],f=qo(u,d,1)^n[a+1];for(let p=0;p<50;p+=10)e[i+p]^=l,e[i+p+1]^=f}let s=e[2],o=e[3];for(let i=0;i<24;i++){const a=ia[i],c=Ho(s,o,a),u=qo(s,o,a),d=oa[i];s=e[d],o=e[d+1],e[d]=c,e[d+1]=u}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=Yd[r],e[1]^=Kd[r]}qt(n)}class Ds extends Us{constructor(t,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,fn(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=zd(this.state)}clone(){return this._cloneInto()}keccak(){Go(this.state32),Xd(this.state32,this.rounds),Go(this.state32),this.posOut=0,this.pos=0}update(t){Ht(this),t=br(t),vt(t);const{blockLen:n,state:r}=this,s=t.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Ht(this,!1),vt(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return fn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ra(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,qt(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return t||(t=new Ds(n,r,s,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Qd=(e,t,n)=>sa(()=>new Ds(t,e,n)),ua=Qd(1,136,256/8);function ee(e,t){const n=t||"hex",r=ua(Re(e,{strict:!1})?Xt(e):e);return n==="bytes"?r:Ye(r)}const el=e=>ee(Xt(e));function tl(e){return el(e)}function nl(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){o=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!o)throw new T("Unable to normalize signature.");return s}const rl=e=>{const t=typeof e=="string"?e:ir(e);return nl(t)};function da(e){return tl(rl(e))}const gr=da;let ut=class extends T{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Ln=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const zr=new Ln(8192);function zn(e,t){if(zr.has(`${e}.${t}`))return zr.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=ee(bt(n),"bytes"),s=n.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&s[i]&&(s[i]=s[i].toUpperCase()),(r[i>>1]&15)>=8&&s[i+1]&&(s[i+1]=s[i+1].toUpperCase());const o=`0x${s.join("")}`;return zr.set(`${e}.${t}`,o),o}function Gs(e,t){if(!we(e,{strict:!1}))throw new ut({address:e});return zn(e,t)}const sl=/^0x[a-fA-F0-9]{40}$/,_r=new Ln(8192);function we(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(_r.has(r))return _r.get(r);const s=sl.test(e)?e.toLowerCase()===e?!0:n?zn(e)===e:!0:!1;return _r.set(r,s),s}function ve(e){return typeof e[0]=="string"?Qt(e):ol(e)}function ol(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Qt(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Vt(e,t,n,{strict:r}={}){return Re(e,{strict:!1})?ds(e,t,n,{strict:r}):pa(e,t,n,{strict:r})}function la(e,t){if(typeof t=="number"&&t>0&&t>q(e)-1)throw new Qi({offset:t,position:"start",size:q(e)})}function fa(e,t,n){if(typeof t=="number"&&typeof n=="number"&&q(e)!==n-t)throw new Qi({offset:n,position:"end",size:q(e)})}function pa(e,t,n,{strict:r}={}){la(e,t);const s=e.slice(t,n);return r&&fa(s,t,n),s}function ds(e,t,n,{strict:r}={}){la(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&fa(s,t,n),s}const il=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ha=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function It(e,t){if(e.length!==t.length)throw new dd({expectedLength:e.length,givenLength:t.length});const n=al({params:e,values:t}),r=qs(n);return r.length===0?"0x":r}function al({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(Hs({param:e[r],value:t[r]}));return n}function Hs({param:e,value:t}){const n=Vs(e.type);if(n){const[r,s]=n;return ul(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return hl(t,{param:e});if(e.type==="address")return cl(t);if(e.type==="bool")return ll(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=ha.exec(e.type)??[];return fl(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return dl(t,{param:e});if(e.type==="string")return pl(t);throw new yd(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function qs(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?t+=32:t+=q(a)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?(n.push(z(t+s,{size:32})),r.push(a),s+=q(a)):n.push(a)}return ve([...n,...r])}function cl(e){if(!we(e))throw new ut({address:e});return{dynamic:!1,encoded:at(e.toLowerCase())}}function ul(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Xi(e);if(!r&&e.length!==t)throw new cd({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let i=0;i<e.length;i++){const a=Hs({param:n,value:e[i]});a.dynamic&&(s=!0),o.push(a)}if(r||s){const i=qs(o);if(r){const a=z(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?ve([a,i]):a}}if(s)return{dynamic:!0,encoded:i}}return{dynamic:!1,encoded:ve(o.map(({encoded:i})=>i))}}function dl(e,{param:t}){const[,n]=t.type.split("bytes"),r=q(e);if(!n){let s=e;return r%32!==0&&(s=at(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:ve([at(z(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new ud({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:at(e,{dir:"right"})}}function ll(e){if(typeof e!="boolean")throw new T(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:at(na(e))}}function fl(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new ta({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:z(e,{size:32,signed:t})}}function pl(e){const t=Gt(e),n=Math.ceil(q(t)/32),r=[];for(let s=0;s<n;s++)r.push(at(Vt(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:ve([at(z(q(t),{size:32})),...r])}}function hl(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],i=Array.isArray(e)?s:o.name,a=Hs({param:o,value:e[i]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?qs(r):ve(r.map(({encoded:s})=>s))}}function Vs(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const _n=e=>Vt(da(e),0,4);function St(e){const{abi:t,args:n=[],name:r}=e,s=Re(r,{strict:!1}),o=t.filter(a=>s?a.type==="function"?_n(a)===r:a.type==="event"?gr(a)===r:!1:"name"in a&&a.name===r);if(o.length===0)return;if(o.length===1)return o[0];let i;for(const a of o){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,d)=>{const l="inputs"in a&&a.inputs[d];return l?ls(u,l):!1})){if(i&&"inputs"in i&&i.inputs){const u=ma(a.inputs,i.inputs,n);if(u)throw new hd({abiItem:a,type:u[0]},{abiItem:i,type:u[1]})}i=a}}return i||o[0]}function ls(e,t){const n=typeof e,r=t.type;switch(r){case"address":return we(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>ls(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>ls(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ma(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return ma(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?we(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?we(n[r],{strict:!1}):!1)return i}}const Vo="/docs/contract/encodeEventTopics";function jn(e){var c;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=St({abi:t,name:n});if(!u)throw new _o(n,{docsPath:Vo});s=u}if(s.type!=="event")throw new _o(void 0,{docsPath:Vo});const o=xe(s),i=gr(o);let a=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(l=>"indexed"in l&&l.indexed),d=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(l=>r[l.name]))??[]:[];d.length>0&&(a=(u==null?void 0:u.map((l,f)=>Array.isArray(d[f])?d[f].map((p,h)=>Wo({param:l,value:d[f][h]})):typeof d[f]<"u"&&d[f]!==null?Wo({param:l,value:d[f]}):null))??[])}return[i,...a]}function Wo({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return ee(Xt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new wd(e.type);return It([e],[t])}function wr(e,{method:t}){var r,s;const n={};return e.transport.type==="fallback"&&((s=(r=e.transport).onResponse)==null||s.call(r,({method:o,response:i,status:a,transport:c})=>{a==="success"&&t===o&&(n[i]=c.request)})),(o=>n[o]||e.request)}async function ya(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:i,strict:a,toBlock:c}=t,u=wr(e,{method:"eth_newFilter"}),d=o?jn({abi:r,args:s,eventName:o}):void 0,l=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?z(i):i,toBlock:typeof c=="bigint"?z(c):c,topics:d}]});return{abi:r,args:s,eventName:o,id:l,request:u(l),strict:!!a,type:"event"}}function V(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const Zo="/docs/contract/encodeFunctionData";function ml(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=St({abi:t,args:n,name:r});if(!o)throw new Dt(r,{docsPath:Zo});s=o}if(s.type!=="function")throw new Dt(void 0,{docsPath:Zo});return{abi:[s],functionName:_n(xe(s))}}function he(e){const{args:t}=e,{abi:n,functionName:r}=(()=>{var a;return e.abi.length===1&&((a=e.functionName)!=null&&a.startsWith("0x"))?e:ml(e)})(),s=n[0],o=r,i="inputs"in s&&s.inputs?It(s.inputs,t??[]):void 0;return Qt([o,i??"0x"])}const yl={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},ba={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},bl={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let Jo=class extends T{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},ga=class extends T{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},gl=class extends T{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}};const wl={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new gl({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new ga({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Jo({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Jo({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Ws(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(wl);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function vl(e,t={}){typeof t.size<"u"&&Ce(e,{size:t.size});const n=K(e,t);return fe(n,t)}function xl(e,t={}){let n=e;if(typeof t.size<"u"&&(Ce(n,{size:t.size}),n=ct(n)),n.length>1||n[0]>1)throw new xd(n);return!!n[0]}function We(e,t={}){typeof t.size<"u"&&Ce(e,{size:t.size});const n=K(e,t);return Ee(n,t)}function El(e,t={}){let n=e;return typeof t.size<"u"&&(Ce(n,{size:t.size}),n=ct(n,{dir:"right"})),new TextDecoder().decode(n)}function Un(e,t){const n=typeof t=="string"?Fe(t):t,r=Ws(n);if(q(n)===0&&e.length>0)throw new On;if(q(t)&&q(t)<32)throw new Zi({data:typeof t=="string"?t:K(t),params:e,size:q(t)});let s=0;const o=[];for(let i=0;i<e.length;++i){const a=e[i];r.setPosition(s);const[c,u]=zt(r,a,{staticPosition:0});s+=u,o.push(c)}return o}function zt(e,t,{staticPosition:n}){const r=Vs(t.type);if(r){const[s,o]=r;return Pl(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return Sl(e,t,{staticPosition:n});if(t.type==="address")return Tl(e);if(t.type==="bool")return Al(e);if(t.type.startsWith("bytes"))return Cl(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Il(e,t);if(t.type==="string")return $l(e,{staticPosition:n});throw new bd(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Yo=32,fs=32;function Tl(e){const t=e.readBytes(32);return[zn(K(pa(t,-20))),32]}function Pl(e,t,{length:n,staticPosition:r}){if(!n){const i=We(e.readBytes(fs)),a=r+i,c=a+Yo;e.setPosition(a);const u=We(e.readBytes(Yo)),d=pn(t);let l=0;const f=[];for(let p=0;p<u;++p){e.setPosition(c+(d?p*32:l));const[h,m]=zt(e,t,{staticPosition:c});l+=m,f.push(h)}return e.setPosition(r+32),[f,32]}if(pn(t)){const i=We(e.readBytes(fs)),a=r+i,c=[];for(let u=0;u<n;++u){e.setPosition(a+u*32);const[d]=zt(e,t,{staticPosition:a});c.push(d)}return e.setPosition(r+32),[c,32]}let s=0;const o=[];for(let i=0;i<n;++i){const[a,c]=zt(e,t,{staticPosition:r+s});s+=c,o.push(a)}return[o,s]}function Al(e){return[xl(e.readBytes(32),{size:32}),32]}function Cl(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=We(e.readBytes(32));e.setPosition(n+i);const a=We(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[K(c),32]}return[K(e.readBytes(Number.parseInt(s,10),32)),32]}function Il(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?vl(s,{signed:n}):We(s,{signed:n}),32]}function Sl(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:i})=>!i),s=r?[]:{};let o=0;if(pn(t)){const i=We(e.readBytes(fs)),a=n+i;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(a+o);const[d,l]=zt(e,u,{staticPosition:a});o+=l,s[r?c:u==null?void 0:u.name]=d}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const a=t.components[i],[c,u]=zt(e,a,{staticPosition:n});s[r?i:a==null?void 0:a.name]=c,o+=u}return[s,o]}function $l(e,{staticPosition:t}){const n=We(e.readBytes(32)),r=t+n;e.setPosition(r);const s=We(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=El(ct(o));return e.setPosition(t+32),[i,32]}function pn(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(pn);const n=Vs(e.type);return!!(n&&pn({...e,type:n[1]}))}function Bl(e){const{abi:t,data:n}=e,r=Vt(n,0,4);if(r==="0x")throw new On;const o=[...t||[],ba,bl].find(i=>i.type==="error"&&r===_n(xe(i)));if(!o)throw new Ji(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?Un(o.inputs,Vt(n,4)):void 0,errorName:o.name}}const Y=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function wa({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?Y(t[o]):t[o]}`).join(", ")})`}const va={gwei:9,wei:18},kl={ether:-9,wei:9};function xa(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,o]=[n.slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}function Zs(e,t="wei"){return xa(e,va[t])}function ce(e,t="wei"){return xa(e,kl[t])}class Nl extends T{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Ml extends T{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Ko(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function Rl(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Ko(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Ko(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Dn(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Fl extends T{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Ol extends T{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Dn(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Ll extends T{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,to:l,value:f}){var h;const p=Dn({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:l,value:typeof f<"u"&&`${Zs(f)} ${((h=s==null?void 0:s.nativeCurrency)==null?void 0:h.symbol)||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${ce(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ce(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ce(u)} gwei`,nonce:d});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Ea extends T{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let i="Transaction";r&&o!==void 0&&(i=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(i=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(i=`Transaction at block number "${n}" at index "${o}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class Ta extends T{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class zl extends T{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const _l=e=>e,Js=e=>e;class Pa extends T{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,to:l,value:f,stateOverride:p}){var w;const h=n?V(n):void 0;let m=Dn({from:h==null?void 0:h.address,to:l,value:typeof f<"u"&&`${Zs(f)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${ce(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ce(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ce(u)} gwei`,nonce:d});p&&(m+=`
${Rl(p)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Aa extends T{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:i,sender:a}){const c=St({abi:n,args:r,name:i}),u=c?wa({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,d=c?xe(c,{includeName:!0}):void 0,l=Dn({address:s&&_l(s),function:d,args:u&&u!=="()"&&`${[...Array((i==null?void 0:i.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],l&&"Contract Call:",l].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=i,this.sender=a}}class ps extends T{constructor({abi:t,data:n,functionName:r,message:s}){let o,i,a,c;if(n&&n!=="0x")try{i=Bl({abi:t,data:n});const{abiItem:d,errorName:l,args:f}=i;if(l==="Error")c=f[0];else if(l==="Panic"){const[p]=f;c=yl[p]}else{const p=d?xe(d,{includeName:!0}):void 0,h=d&&f?wa({abiItem:d,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[p?`Error: ${p}`:"",h&&h!=="()"?`       ${[...Array((l==null?void 0:l.length)??0).keys()].map(()=>" ").join("")}${h}`:""]}}catch(d){o=d}else s&&(c=s);let u;o instanceof Ji&&(u=o.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=n,this.reason=c,this.signature=u}}class jl extends T{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Ul extends T{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class vr extends T{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class cn extends T{constructor({body:t,cause:n,details:r,headers:s,status:o,url:i}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${Js(i)}`,t&&`Request body: ${Y(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=o,this.url=i}}class Ys extends T{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Js(r)}`,`Request body: ${Y(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Xo extends T{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Js(n)}`,`Request body: ${Y(t)}`],name:"TimeoutError"})}}const Dl=-1;class de extends T{constructor(t,{code:n,docsPath:r,metaMessages:s,name:o,shortMessage:i}){super(i,{cause:t,docsPath:r,metaMessages:s||(t==null?void 0:t.metaMessages),name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||t.name,this.code=t instanceof Ys?t.code:n??Dl}}class me extends de{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class hn extends de{constructor(t){super(t,{code:hn.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class mn extends de{constructor(t){super(t,{code:mn.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class yn extends de{constructor(t,{method:n}={}){super(t,{code:yn.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class bn extends de{constructor(t){super(t,{code:bn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class xt extends de{constructor(t){super(t,{code:xt.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Et extends de{constructor(t){super(t,{code:Et.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Et,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class gn extends de{constructor(t){super(t,{code:gn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class wn extends de{constructor(t){super(t,{code:wn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class vn extends de{constructor(t){super(t,{code:vn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class mt extends de{constructor(t,{method:n}={}){super(t,{code:mt.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(mt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Wt extends de{constructor(t){super(t,{code:Wt.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Wt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class xn extends de{constructor(t){super(t,{code:xn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class _t extends me{constructor(t){super(t,{code:_t.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(_t,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class En extends me{constructor(t){super(t,{code:En.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(En,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Tn extends me{constructor(t,{method:n}={}){super(t,{code:Tn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Tn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Pn extends me{constructor(t){super(t,{code:Pn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class An extends me{constructor(t){super(t,{code:An.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(An,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Cn extends me{constructor(t){super(t,{code:Cn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Zt extends me{constructor(t){super(t,{code:Zt.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Zt,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class In extends me{constructor(t){super(t,{code:In.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(In,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Sn extends me{constructor(t){super(t,{code:Sn.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Sn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class $n extends me{constructor(t){super(t,{code:$n.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty($n,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Bn extends me{constructor(t){super(t,{code:Bn.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class kn extends me{constructor(t){super(t,{code:kn.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Jt extends me{constructor(t){super(t,{code:Jt.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Jt,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Gl extends de{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Hl=3;function Tt(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:i}){const a=e instanceof vr?e:e instanceof T?e.walk(h=>"data"in h)||e.walk():{},{code:c,data:u,details:d,message:l,shortMessage:f}=a,p=e instanceof On?new jl({functionName:o}):[Hl,xt.code].includes(c)&&(u||d||l||f)?new ps({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:a instanceof Ys?d:f??l}):e;return new Aa(p,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:i})}function ql(e){const t=ee(`0x${e.substring(4)}`).substring(26);return zn(`0x${t}`)}const Vl="modulepreload",Wl=function(e){return"/"+e},Qo={},Ca=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=i(n.map(u=>{if(u=Wl(u),u in Qo)return;Qo[u]=!0;const d=u.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${l}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Vl,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};async function Zl({hash:e,signature:t}){const n=Re(e)?e:Ye(e),{secp256k1:r}=await Ca(async()=>{const{secp256k1:i}=await Promise.resolve().then(()=>Th);return{secp256k1:i}},void 0);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:d,v:l,yParity:f}=t,p=Number(f??l),h=ei(p);return new r.Signature(fe(u),fe(d)).addRecoveryBit(h)}const i=Re(t)?t:Ye(t);if(q(i)!==65)throw new Error("invalid signature length");const a=Ee(`0x${i.slice(130)}`),c=ei(a);return r.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function ei(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Ia({hash:e,signature:t}){return ql(await Zl({hash:e,signature:t}))}function Jl(e,t="hex"){const n=Sa(e),r=Ws(new Uint8Array(n.length));return n.encode(r),t==="hex"?K(r.bytes):r.bytes}function Sa(e){return Array.isArray(e)?Yl(e.map(t=>Sa(t))):Kl(e)}function Yl(e){const t=e.reduce((s,o)=>s+o.length,0),n=$a(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function Kl(e){const t=typeof e=="string"?Fe(e):e,n=$a(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function $a(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new T("Length is too large.")}function Xl(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,o=ee(Qt(["0x05",Jl([t?z(t):"0x",s,n?z(n):"0x"])]));return r==="bytes"?Fe(o):o}async function xr(e){const{authorization:t,signature:n}=e;return Ia({hash:Xl(t),signature:n??t})}class Ql extends T{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,to:l,value:f}){var h;const p=Dn({from:n==null?void 0:n.address,to:l,value:typeof f<"u"&&`${Zs(f)} ${((h=s==null?void 0:s.nativeCurrency)==null?void 0:h.symbol)||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${ce(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ce(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ce(u)} gwei`,nonce:d});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Ft extends T{constructor({cause:t,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(Ft,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Ft,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ar extends T{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ce(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(ar,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class hs extends T{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ce(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(hs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class ms extends T{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(ms,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class ys extends T{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(ys,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class bs extends T{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(bs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class gs extends T{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(gs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class ws extends T{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(ws,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class vs extends T{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(vs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class xs extends T{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(xs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class cr extends T{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ce(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ce(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(cr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Gn extends T{constructor({cause:t}){super(`An error occurred while executing: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function Er(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof T?e.walk(s=>(s==null?void 0:s.code)===Ft.code):e;return r instanceof T?new Ft({cause:e,message:r.details}):Ft.nodeMessage.test(n)?new Ft({cause:e,message:e.details}):ar.nodeMessage.test(n)?new ar({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):hs.nodeMessage.test(n)?new hs({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):ms.nodeMessage.test(n)?new ms({cause:e,nonce:t==null?void 0:t.nonce}):ys.nodeMessage.test(n)?new ys({cause:e,nonce:t==null?void 0:t.nonce}):bs.nodeMessage.test(n)?new bs({cause:e,nonce:t==null?void 0:t.nonce}):gs.nodeMessage.test(n)?new gs({cause:e}):ws.nodeMessage.test(n)?new ws({cause:e,gas:t==null?void 0:t.gas}):vs.nodeMessage.test(n)?new vs({cause:e,gas:t==null?void 0:t.gas}):xs.nodeMessage.test(n)?new xs({cause:e}):cr.nodeMessage.test(n)?new cr({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new Gn({cause:e})}function e0(e,{docsPath:t,...n}){const r=(()=>{const s=Er(e,n);return s instanceof Gn?e:s})();return new Ql(r,{docsPath:t,...n})}function Hn(e,{format:t}){if(!t)return{};const n={};function r(o){const i=Object.keys(o);for(const a of i)a in e&&(n[a]=e[a]),o[a]&&typeof o[a]=="object"&&!Array.isArray(o[a])&&r(o[a])}const s=t(e||{});return r(s),n}const t0={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function $t(e,t){const n={};return typeof e.authorizationList<"u"&&(n.authorizationList=n0(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>K(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=z(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=z(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=z(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=z(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=z(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=z(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=t0[e.type]),typeof e.value<"u"&&(n.value=z(e.value)),n}function n0(e){return e.map(t=>({address:t.address,r:t.r?z(BigInt(t.r)):t.r,s:t.s?z(BigInt(t.s)):t.s,chainId:z(t.chainId),nonce:z(t.nonce),...typeof t.yParity<"u"?{yParity:z(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:z(t.v)}:{}}))}function ti(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new jo({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new jo({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function r0(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,i={};if(o!==void 0&&(i.code=o),t!==void 0&&(i.balance=z(t)),n!==void 0&&(i.nonce=z(n)),r!==void 0&&(i.state=ti(r)),s!==void 0){if(i.state)throw new Ml;i.stateDiff=ti(s)}return i}function Ks(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!we(n,{strict:!1}))throw new ut({address:n});if(t[n])throw new Nl({address:n});t[n]=r0(r)}return t}const s0=2n**256n-1n;function dt(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=e,i=t?V(t):void 0;if(i&&!we(i.address))throw new ut({address:i.address});if(o&&!we(o))throw new ut({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Fl;if(r&&r>s0)throw new ar({maxFeePerGas:r});if(s&&r&&s>r)throw new cr({maxFeePerGas:r,maxPriorityFeePerGas:s})}class o0 extends T{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Xs extends T{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class i0 extends T{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ce(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Ba extends T{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const ka={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Na(e,t){const n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?Ee(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?Ee(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?ka[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=a0(e.authorizationList)),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}function a0(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function Ma(e,t){const n=(e.transactions??[]).map(r=>typeof r=="string"?r:Na(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function Ne(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:s}={}){var u,d,l;const o=s??!1,i=n!==void 0?z(n):void 0;let a=null;if(t?a=await e.request({method:"eth_getBlockByHash",params:[t,o]},{dedupe:!0}):a=await e.request({method:"eth_getBlockByNumber",params:[i||r,o]},{dedupe:!!i}),!a)throw new Ba({blockHash:t,blockNumber:n});return(((l=(d=(u=e.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:l.format)||Ma)(a,"getBlock")}async function Qs(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function c0(e,t){return Ra(e,t)}async function Ra(e,t){var o,i;const{block:n,chain:r=e.chain,request:s}=t||{};try{const a=((o=r==null?void 0:r.fees)==null?void 0:o.maxPriorityFeePerGas)??((i=r==null?void 0:r.fees)==null?void 0:i.defaultPriorityFee);if(typeof a=="function"){const u=n||await L(e,Ne,"getBlock")({}),d=await a({block:u,client:e,request:s});if(d===null)throw new Error;return d}if(typeof a<"u")return a;const c=await e.request({method:"eth_maxPriorityFeePerGas"});return fe(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):L(e,Ne,"getBlock")({}),L(e,Qs,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Xs;const u=c-a.baseFeePerGas;return u<0n?0n:u}}async function u0(e,t){return Es(e,t)}async function Es(e,t){var f,p;const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},i=await(async()=>{var h,m;return typeof((h=r==null?void 0:r.fees)==null?void 0:h.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):((m=r==null?void 0:r.fees)==null?void 0:m.baseFeeMultiplier)??1.2})();if(i<1)throw new o0;const c=10**(((f=i.toString().split(".")[1])==null?void 0:f.length)??0),u=h=>h*BigInt(Math.ceil(i*c))/BigInt(c),d=n||await L(e,Ne,"getBlock")({});if(typeof((p=r==null?void 0:r.fees)==null?void 0:p.estimateFeesPerGas)=="function"){const h=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:o});if(h!==null)return h}if(o==="eip1559"){if(typeof d.baseFeePerGas!="bigint")throw new Xs;const h=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await Ra(e,{block:d,chain:r,request:s}),m=u(d.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??m+h,maxPriorityFeePerGas:h}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await L(e,Qs,"getGasPrice")({}))}}async function eo(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?z(r):n]},{dedupe:!!r});return Ee(s)}function Fa(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>Fe(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>K(o))}function Oa(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>Fe(i)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(i=>Fe(i)):e.commitments,o=[];for(let i=0;i<r.length;i++){const a=r[i],c=s[i];o.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return n==="bytes"?o:o.map(i=>K(i))}function d0(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}function l0(e,t,n){return e&t^~e&n}function f0(e,t,n){return e&t^e&n^t&n}class p0 extends Us{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Lr(this.buffer)}update(t){Ht(this),t=br(t),vt(t);const{view:n,buffer:r,blockLen:s}=this,o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=Lr(t);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ht(this),ra(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,qt(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(r,0),i=0);for(let l=i;l<s;l++)n[l]=0;d0(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=Lr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=o,t.length=s,t.pos=a,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const st=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),h0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ot=new Uint32Array(64);class m0 extends p0{constructor(t=32){super(64,t,8,!1),this.A=st[0]|0,this.B=st[1]|0,this.C=st[2]|0,this.D=st[3]|0,this.E=st[4]|0,this.F=st[5]|0,this.G=st[6]|0,this.H=st[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[t,n,r,s,o,i,a,c]}set(t,n,r,s,o,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)ot[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=ot[l-15],p=ot[l-2],h=Se(f,7)^Se(f,18)^f>>>3,m=Se(p,17)^Se(p,19)^p>>>10;ot[l]=m+ot[l-7]+h+ot[l-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const f=Se(a,6)^Se(a,11)^Se(a,25),p=d+f+l0(a,c,u)+h0[l]+ot[l]|0,m=(Se(r,2)^Se(r,13)^Se(r,22))+f0(r,s,o)|0;d=u,u=c,c=a,a=i+p|0,i=o,o=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,o,i,a,c,u,d)}roundClean(){qt(ot)}destroy(){this.set(0,0,0,0,0,0,0,0),qt(this.buffer)}}const La=sa(()=>new m0),y0=La;function b0(e,t){return y0(Re(e,{strict:!1})?Xt(e):e)}function g0(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=b0(t);return s.set([n],0),r==="bytes"?s:K(s)}function w0(e){const{commitments:t,version:n}=e,r=e.to,s=[];for(const o of t)s.push(g0({commitment:o,to:r,version:n}));return s}const ni=6,za=32,to=4096,_a=za*to,ri=_a*ni-1-1*to*ni;class v0 extends T{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class x0 extends T{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function E0(e){const t=typeof e.data=="string"?Fe(e.data):e.data,n=q(t);if(!n)throw new x0;if(n>ri)throw new v0({maxSize:ri,size:n});const r=[];let s=!0,o=0;for(;s;){const i=Ws(new Uint8Array(_a));let a=0;for(;a<to;){const c=t.slice(o,o+(za-1));if(i.pushByte(0),i.pushBytes(c),c.length<31){i.pushByte(128),s=!1;break}a++,o+=31}r.push(i)}return r.map(i=>K(i.bytes))}function T0(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??E0({data:t}),o=e.commitments??Fa({blobs:s,kzg:n,to:r}),i=e.proofs??Oa({blobs:s,commitments:o,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:o[c],proof:i[c]});return a}function P0(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new Ol({transaction:e})}async function Bt(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return Ee(t)}const no=["blobVersionedHashes","chainId","fees","gas","nonce","type"],si=new Map;async function qn(e,t){const{account:n=e.account,blobs:r,chain:s,gas:o,kzg:i,nonce:a,nonceManager:c,parameters:u=no,type:d}=t,l=n&&V(n),f={...t,...l?{from:l==null?void 0:l.address}:{}};let p;async function h(){return p||(p=await L(e,Ne,"getBlock")({blockTag:"latest"}),p)}let m;async function w(){return m||(s?s.id:typeof t.chainId<"u"?t.chainId:(m=await L(e,Bt,"getChainId")({}),m))}if(u.includes("nonce")&&typeof a>"u"&&l)if(c){const y=await w();f.nonce=await c.consume({address:l.address,chainId:y,client:e})}else f.nonce=await L(e,eo,"getTransactionCount")({address:l.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&i){const y=Fa({blobs:r,kzg:i});if(u.includes("blobVersionedHashes")){const v=w0({commitments:y,to:"hex"});f.blobVersionedHashes=v}if(u.includes("sidecars")){const v=Oa({blobs:r,commitments:y,kzg:i}),g=T0({blobs:r,commitments:y,proofs:v,to:"hex"});f.sidecars=g}}if(u.includes("chainId")&&(f.chainId=await w()),(u.includes("fees")||u.includes("type"))&&typeof d>"u")try{f.type=P0(f)}catch{let y=si.get(e.uid);if(typeof y>"u"){const v=await h();y=typeof(v==null?void 0:v.baseFeePerGas)=="bigint",si.set(e.uid,y)}f.type=y?"eip1559":"legacy"}if(u.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const y=await h(),{maxFeePerGas:v,maxPriorityFeePerGas:g}=await Es(e,{block:y,chain:s,request:f});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<g)throw new i0({maxPriorityFeePerGas:g});f.maxPriorityFeePerGas=g,f.maxFeePerGas=v}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Xs;if(typeof t.gasPrice>"u"){const y=await h(),{gasPrice:v}=await Es(e,{block:y,chain:s,request:f,type:"legacy"});f.gasPrice=v}}return u.includes("gas")&&typeof o>"u"&&(f.gas=await L(e,ro,"estimateGas")({...f,account:l&&{address:l.address,type:"json-rpc"}})),dt(f),delete f.parameters,f}async function ro(e,t){var s,o,i;const{account:n=e.account}=t,r=n?V(n):void 0;try{const{accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:d,blockNumber:l,blockTag:f,data:p,gas:h,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:v,nonce:g,value:b,stateOverride:x,...C}=await qn(e,{...t,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),P=(typeof l=="bigint"?z(l):void 0)||f,k=Ks(x),O=await(async()=>{if(C.to)return C.to;if(c&&c.length>0)return await xr({authorization:c[0]}).catch(()=>{throw new T("`to` is required. Could not infer from `authorizationList`")})})();dt(t);const B=(i=(o=(s=e.chain)==null?void 0:s.formatters)==null?void 0:o.transactionRequest)==null?void 0:i.format,N=(B||$t)({...Hn(C,{format:B}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:d,data:p,gas:h,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:v,nonce:g,to:O,value:b},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:k?[N,P??e.experimental_blockTag??"latest",k]:P?[N,P]:[N]}))}catch(a){throw e0(a,{...t,account:r,chain:e.chain})}}async function A0(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:i,...a}=t,c=he({abi:n,args:s,functionName:o});try{return await L(e,ro,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:r,...a})}catch(u){const d=a.account?V(a.account):void 0;throw Tt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:d==null?void 0:d.address})}}function Vn(e,t){if(!we(e,{strict:!1}))throw new ut({address:e});if(!we(t,{strict:!1}))throw new ut({address:t});return e.toLowerCase()===t.toLowerCase()}const oi="/docs/contract/decodeEventLog";function so(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[i,...a]=s;if(!i)throw new fd({docsPath:oi});const c=t.find(m=>m.type==="event"&&i===gr(xe(m)));if(!(c&&"name"in c)||c.type!=="event")throw new Yi(i,{docsPath:oi});const{name:u,inputs:d}=c,l=d==null?void 0:d.some(m=>!("name"in m&&m.name)),f=l?[]:{},p=d.map((m,w)=>[m,w]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<p.length;m++){const[w,y]=p[m],v=a[m];if(!v)throw new yr({abiItem:c,param:w});f[l?y:w.name||y]=C0({param:w,value:v})}const h=d.filter(m=>!("indexed"in m&&m.indexed));if(h.length>0){if(n&&n!=="0x")try{const m=Un(h,n);if(m)if(l)for(let w=0;w<d.length;w++)f[w]=f[w]??m.shift();else for(let w=0;w<h.length;w++)f[h[w].name]=m[w]}catch(m){if(o)throw m instanceof Zi||m instanceof ga?new ln({abiItem:c,data:n,params:h,size:q(n)}):m}else if(o)throw new ln({abiItem:c,data:"0x",params:h,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function C0({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(Un([e],t)||[])[0]}function oo(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{var a;try{const c=t.find(d=>d.type==="event"&&i.topics[0]===gr(d));if(!c)return null;const u=so({...i,abi:[c],strict:s});return o&&!o.includes(u.eventName)||!I0({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...i}}catch(c){let u,d;if(c instanceof Yi)return null;if(c instanceof ln||c instanceof yr){if(s)return null;u=c.abiItem.name,d=(a=c.abiItem.inputs)==null?void 0:a.some(l=>!("name"in l&&l.name))}return{...i,args:d?[]:{},eventName:u}}}).filter(Boolean)}function I0(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,i,a){try{return o.type==="address"?Vn(i,a):o.type==="string"||o.type==="bytes"?ee(Xt(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,i)=>{if(o==null)return!0;const a=n[i];return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,i])=>{if(i==null)return!0;const a=n.find(u=>u.name===o);return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,t[o])):!1}):!1}function Ke(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function io(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:i,args:a,strict:c}={}){const u=c??!1,d=i??(o?[o]:void 0);let l=[];d&&(l=[d.flatMap(m=>jn({abi:[m],eventName:m.name,args:i?void 0:a}))],o&&(l=l[0]));let f;n?f=await e.request({method:"eth_getLogs",params:[{address:t,topics:l,blockHash:n}]}):f=await e.request({method:"eth_getLogs",params:[{address:t,topics:l,fromBlock:typeof r=="bigint"?z(r):r,toBlock:typeof s=="bigint"?z(s):s}]});const p=f.map(h=>Ke(h));return d?oo({abi:d,args:a,logs:p,strict:u}):p}async function ja(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:i,fromBlock:a,toBlock:c,strict:u}=t,d=i?St({abi:n,name:i}):void 0,l=d?void 0:n.filter(f=>f.type==="event");return L(e,io,"getLogs")({address:r,args:s,blockHash:o,event:d,events:l,fromBlock:a,toBlock:c,strict:u})}const jr="/docs/contract/decodeFunctionResult";function kt(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const a=St({abi:t,args:n,name:r});if(!a)throw new Dt(r,{docsPath:jr});o=a}if(o.type!=="function")throw new Dt(void 0,{docsPath:jr});if(!o.outputs)throw new Ki(o.name,{docsPath:jr});const i=Un(o.outputs,s);if(i&&i.length>1)return i;if(i&&i.length===1)return i[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ao=BigInt(0),Ts=BigInt(1);function Wn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function co(e){if(!Wn(e))throw new Error("Uint8Array expected")}function Nn(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function tr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Ua(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?ao:BigInt("0x"+e)}const Da=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",S0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Mn(e){if(co(e),Da)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=S0[e[n]];return t}const De={_0:48,_9:57,A:65,F:70,a:97,f:102};function ii(e){if(e>=De._0&&e<=De._9)return e-De._0;if(e>=De.A&&e<=De.F)return e-(De.A-10);if(e>=De.a&&e<=De.f)return e-(De.a-10)}function ur(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Da)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=ii(e.charCodeAt(o)),a=ii(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=i*16+a}return r}function gt(e){return Ua(Mn(e))}function Ga(e){return co(e),Ua(Mn(Uint8Array.from(e).reverse()))}function Zn(e,t){return ur(e.toString(16).padStart(t*2,"0"))}function Ha(e,t){return Zn(e,t).reverse()}function ge(e,t,n){let r;if(typeof t=="string")try{r=ur(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Wn(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function dr(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];co(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}const Ur=e=>typeof e=="bigint"&&ao<=e;function uo(e,t,n){return Ur(e)&&Ur(t)&&Ur(n)&&t<=e&&e<n}function jt(e,t,n,r){if(!uo(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function $0(e){let t;for(t=0;e>ao;e>>=Ts,t+=1);return t}const Tr=e=>(Ts<<BigInt(e))-Ts,Dr=e=>new Uint8Array(e),ai=e=>Uint8Array.from(e);function B0(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Dr(e),s=Dr(e),o=0;const i=()=>{r.fill(1),s.fill(0),o=0},a=(...l)=>n(s,r,...l),c=(l=Dr(0))=>{s=a(ai([0]),l),r=a(),l.length!==0&&(s=a(ai([1]),l),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const f=[];for(;l<t;){r=a();const p=r.slice();f.push(p),l+=r.length}return dr(...f)};return(l,f)=>{i(),c(l);let p;for(;!(p=f(u()));)c();return i(),p}}const k0={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Wn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Pr(e,t,n={}){const r=(s,o,i)=>{const a=k0[o];if(typeof a!="function")throw new Error("invalid validator function");const c=e[s];if(!(i&&c===void 0)&&!a(c,e))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+c)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}function ci(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const N0="0.1.1";function M0(){return N0}class D extends Error{constructor(t,n={}){const r=(()=>{var c;if(n.cause instanceof D){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof D&&n.cause.docsPath||n.docsPath,i=`https://oxlib.sh${s??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${i}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${M0()}`}),this.cause=n.cause,this.details=r,this.docs=i,this.docsPath=s,this.shortMessage=t}walk(t){return qa(this,t)}}function qa(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?qa(e.cause,t):t?null:e}function Jn(e,t){if(Ot(e)>t)throw new Y0({givenSize:Ot(e),maxSize:t})}const Ge={zero:48,nine:57,A:65,F:70,a:97,f:102};function ui(e){if(e>=Ge.zero&&e<=Ge.nine)return e-Ge.zero;if(e>=Ge.A&&e<=Ge.F)return e-(Ge.A-10);if(e>=Ge.a&&e<=Ge.f)return e-(Ge.a-10)}function R0(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new K0({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let o=0;o<r;o++){const i=n==="right";s[i?o:r-o-1]=e[i?o:e.length-o-1]}return s}function Va(e,t={}){const{dir:n="left"}=t;let r=e,s=0;for(let o=0;o<r.length-1&&r[n==="left"?o:r.length-o-1].toString()==="0";o++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function Ar(e,t){if(pe(e)>t)throw new rf({givenSize:pe(e),maxSize:t})}function F0(e,t){if(typeof t=="number"&&t>0&&t>pe(e)-1)throw new tc({offset:t,position:"start",size:pe(e)})}function O0(e,t,n){if(typeof t=="number"&&typeof n=="number"&&pe(e)!==n-t)throw new tc({offset:n,position:"end",size:pe(e)})}function Wa(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new sf({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const L0="#__bigint";function Za(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+L0:s,n)}const z0=new TextDecoder,_0=new TextEncoder;function j0(e){return e instanceof Uint8Array?e:typeof e=="string"?Ja(e):U0(e)}function U0(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Ja(e,t={}){const{size:n}=t;let r=e;n&&(Ar(e,n),r=At(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,i=new Uint8Array(o);for(let a=0,c=0;a<o;a++){const u=ui(s.charCodeAt(c++)),d=ui(s.charCodeAt(c++));if(u===void 0||d===void 0)throw new D(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);i[a]=u*16+d}return i}function D0(e,t={}){const{size:n}=t,r=_0.encode(e);return typeof n=="number"?(Jn(r,n),G0(r,n)):r}function G0(e,t){return R0(e,{dir:"right",size:t})}function Ot(e){return e.length}function H0(e,t,n,r={}){const{strict:s}=r;return e.slice(t,n)}function q0(e,t={}){const{size:n}=t;typeof n<"u"&&Jn(e,n);const r=Pe(e,t);return Xa(r,t)}function V0(e,t={}){const{size:n}=t;let r=e;if(typeof n<"u"&&(Jn(r,n),r=Ya(r)),r.length>1||r[0]>1)throw new J0(r);return!!r[0]}function Ze(e,t={}){const{size:n}=t;typeof n<"u"&&Jn(e,n);const r=Pe(e,t);return Qa(r,t)}function W0(e,t={}){const{size:n}=t;let r=e;return typeof n<"u"&&(Jn(r,n),r=Z0(r)),z0.decode(r)}function Ya(e){return Va(e,{dir:"left"})}function Z0(e){return Va(e,{dir:"right"})}class J0 extends D{constructor(t){super(`Bytes value \`${t}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let Y0=class extends D{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},K0=class extends D{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const X0=new TextEncoder,Q0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ef(e,t={}){const{strict:n=!1}=t;if(!e)throw new di(e);if(typeof e!="string")throw new di(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new li(e);if(!e.startsWith("0x"))throw new li(e)}function Te(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function tf(e){return e instanceof Uint8Array?Pe(e):Array.isArray(e)?Pe(new Uint8Array(e)):e}function Ka(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Ar(n,t.size),Pt(n,t.size)):n}function Pe(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Q0[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Ar(r,t.size),At(r,t.size)):r}function ne(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const u=typeof e=="bigint"?"n":"";throw new ec({max:o?`${o}${u}`:void 0,min:`${i}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Pt(c,r):c}function lo(e,t={}){return Pe(X0.encode(e),t)}function Pt(e,t){return Wa(e,{dir:"left",size:t})}function At(e,t){return Wa(e,{dir:"right",size:t})}function Me(e,t,n,r={}){const{strict:s}=r;F0(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&O0(o,t,n),o}function pe(e){return Math.ceil((e.length-2)/2)}function Xa(e,t={}){const{signed:n}=t;t.size&&Ar(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n)-1n,i=o>>1n;return r<=i?r:r-o-1n}function Qa(e,t={}){const{signed:n,size:r}=t;return Number(!n&&!r?e:Xa(e,t))}function nf(e,t={}){const{strict:n=!1}=t;try{return ef(e,{strict:n}),!0}catch{return!1}}class ec extends D{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class di extends D{constructor(t){super(`Value \`${typeof t=="object"?Za(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class li extends D{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class rf extends D{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class tc extends D{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class sf extends D{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function of(e){return{address:e.address,amount:ne(e.amount),index:ne(e.index),validatorIndex:ne(e.validatorIndex)}}function nc(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:ne(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:ne(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:ne(e.gasLimit)},...typeof e.number=="bigint"&&{number:ne(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:ne(e.prevRandao)},...typeof e.time=="bigint"&&{time:ne(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(of)}}}const lr=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Ps=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],rc=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],sc=[...rc,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],af=[...rc,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],fi=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],pi=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],oc=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],hi=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],cf="0x82ad56cb",ic="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",uf="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",df="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",fo="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class As extends T{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class lf extends T{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id} â ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id} â ${t.name}`],name:"ChainMismatchError"})}}class ff extends T{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class ac extends T{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const Gr="/docs/contract/encodeDeployData";function Cr(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(i=>"type"in i&&i.type==="constructor");if(!s)throw new ad({docsPath:Gr});if(!("inputs"in s))throw new Lo({docsPath:Gr});if(!s.inputs||s.inputs.length===0)throw new Lo({docsPath:Gr});const o=It(s.inputs,n);return Qt([r,o])}function en({blockNumber:e,chain:t,contract:n}){var s;const r=(s=t==null?void 0:t.contracts)==null?void 0:s[n];if(!r)throw new As({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new As({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function cc(e,{docsPath:t,...n}){const r=(()=>{const s=Er(e,n);return s instanceof Gn?e:s})();return new Pa(r,{docsPath:t,...n})}function po(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const Hr=new Map;function uc({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const d=c();i();const l=d.map(({args:f})=>f);l.length!==0&&e(l).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let p=0;p<d.length;p++){const{resolve:h}=d[p];h==null||h([f[p],f])}}).catch(f=>{for(let p=0;p<d.length;p++){const{reject:h}=d[p];h==null||h(f)}})},i=()=>Hr.delete(t),a=()=>c().map(({args:d})=>d),c=()=>Hr.get(t)||[],u=d=>Hr.set(t,[...c(),d]);return{flush:i,async schedule(d){const{promise:l,resolve:f,reject:p}=po();return(n==null?void 0:n([...a(),d]))&&o(),c().length>0?(u({args:d,resolve:f,reject:p}),l):(u({args:d,resolve:f,reject:p}),setTimeout(o,r),l)}}}async function Ir(e,t){var N,j,$,S;const{account:n=e.account,authorizationList:r,batch:s=!!((N=e.batch)!=null&&N.multicall),blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:d,data:l,factory:f,factoryData:p,gas:h,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:v,nonce:g,to:b,value:x,stateOverride:C,...A}=t,P=n?V(n):void 0;if(d&&(f||p))throw new T("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(d&&b)throw new T("Cannot provide both `code` & `to` as parameters.");const k=d&&l,O=f&&p&&b&&l,B=k||O,M=k?dc({code:d,data:l}):O?mf({data:l,factory:f,factoryData:p,to:b}):l;try{dt(t);const I=(typeof o=="bigint"?z(o):void 0)||i,F=u?nc(u):void 0,_=Ks(C),U=(S=($=(j=e.chain)==null?void 0:j.formatters)==null?void 0:$.transactionRequest)==null?void 0:S.format,Z=(U||$t)({...Hn(A,{format:U}),from:P==null?void 0:P.address,accessList:a,authorizationList:r,blobs:c,data:M,gas:h,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:v,nonce:g,to:B?void 0:b,value:x},"call");if(s&&pf({request:Z})&&!_&&!F)try{return await hf(e,{...Z,blockNumber:o,blockTag:i})}catch(X){if(!(X instanceof ac)&&!(X instanceof As))throw X}const J=(()=>{const X=[Z,I];return _&&F?[...X,_,F]:_?[...X,_]:F?[...X,{},F]:X})(),W=await e.request({method:"eth_call",params:J});return W==="0x"?{data:void 0}:{data:W}}catch(R){const I=yf(R),{offchainLookup:F,offchainLookupSignature:_}=await Ca(async()=>{const{offchainLookup:U,offchainLookupSignature:H}=await import("./ccip-CXLoYDlK.js");return{offchainLookup:U,offchainLookupSignature:H}},[]);if(e.ccipRead!==!1&&(I==null?void 0:I.slice(0,10))===_&&b)return{data:await F(e,{data:I,to:b})};throw B&&(I==null?void 0:I.slice(0,10))==="0x101bb98d"?new Ul({factory:f}):cc(R,{...t,account:P,chain:e.chain})}}function pf({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(cf)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function hf(e,t){var m;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((m=e.batch)==null?void 0:m.multicall)=="object"?e.batch.multicall:{},{blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",data:a,to:c}=t,u=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return en({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new ac})(),l=(typeof o=="bigint"?z(o):void 0)||i,{schedule:f}=uc({id:`${e.uid}.${l}`,wait:s,shouldSplitBatch(w){return w.reduce((v,{data:g})=>v+(g.length-2),0)>n*2},fn:async w=>{const y=w.map(b=>({allowFailure:!0,callData:b.data,target:b.to})),v=he({abi:lr,args:[y],functionName:"aggregate3"}),g=await e.request({method:"eth_call",params:[{...u===null?{data:dc({code:fo,data:v})}:{to:u,data:v}},l]});return kt({abi:lr,args:[y],functionName:"aggregate3",data:g||"0x"})}}),[{returnData:p,success:h}]=await f({data:a,to:c});if(!h)throw new vr({data:p});return p==="0x"?{data:void 0}:{data:p}}function dc(e){const{code:t,data:n}=e;return Cr({abi:qi(["constructor(bytes, bytes)"]),bytecode:ic,args:[t,n]})}function mf(e){const{data:t,factory:n,factoryData:r,to:s}=e;return Cr({abi:qi(["constructor(address, bytes, address, bytes)"]),bytecode:uf,args:[s,t,n,r]})}function yf(e){var n;if(!(e instanceof T))return;const t=e.walk();return typeof(t==null?void 0:t.data)=="object"?(n=t.data)==null?void 0:n.data:t.data}async function Ae(e,t){const{abi:n,address:r,args:s,functionName:o,...i}=t,a=he({abi:n,args:s,functionName:o});try{const{data:c}=await L(e,Ir,"call")({...i,data:a,to:r});return kt({abi:n,args:s,functionName:o,data:c||"0x"})}catch(c){throw Tt(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function bf(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:i,...a}=t,c=a.account?V(a.account):e.account,u=he({abi:n,args:s,functionName:i});try{const{data:d}=await L(e,Ir,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...a,account:c}),l=kt({abi:n,args:s,functionName:i,data:d||"0x"}),f=n.filter(p=>"name"in p&&p.name===t.functionName);return{result:l,request:{abi:f,address:r,args:s,dataSuffix:o,functionName:i,...a,account:c}}}catch(d){throw Tt(d,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c==null?void 0:c.address})}}const qr=new Map,mi=new Map;let gf=0;function Xe(e,t,n){const r=++gf,s=()=>qr.get(e)||[],o=()=>{const d=s();qr.set(e,d.filter(l=>l.id!==r))},i=()=>{const d=s();if(!d.some(f=>f.id===r))return;const l=mi.get(e);if(d.length===1&&l){const f=l();f instanceof Promise&&f.catch(()=>{})}o()},a=s();if(qr.set(e,[...a,{id:r,fns:t}]),a&&a.length>0)return i;const c={};for(const d in t)c[d]=((...l)=>{var p,h;const f=s();if(f.length!==0)for(const m of f)(h=(p=m.fns)[d])==null||h.call(p,...l)});const u=n(c);return typeof u=="function"&&mi.set(e,u),i}async function Cs(e){return new Promise(t=>setTimeout(t,e))}function tn(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let a;t&&(a=await e({unpoll:o}));const c=await(n==null?void 0:n(a))??r;await Cs(c);const u=async()=>{s&&(await e({unpoll:o}),await Cs(r),u())};u()})(),o}const wf=new Map,vf=new Map;function xf(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:i=>o.set(s,i)}),n=t(e,wf),r=t(e,vf);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Ef(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=xf(t),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const i=await o;return r.response.set({created:new Date,data:i}),i}finally{r.promise.clear()}}const Tf=e=>`blockNumber.${e}`;async function Yn(e,{cacheTime:t=e.cacheTime}={}){const n=await Ef(()=>e.request({method:"eth_blockNumber"}),{cacheKey:Tf(e.uid),cacheTime:t});return BigInt(n)}async function Sr(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>Ke(o));return!("abi"in t)||!t.abi?s:oo({abi:t.abi,logs:s,strict:n})}async function $r(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function Pf(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:i,fromBlock:a,onError:c,onLogs:u,poll:d,pollingInterval:l=e.pollingInterval,strict:f}=t;return(typeof d<"u"?d:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const w=f??!1,y=Y(["watchContractEvent",r,s,o,e.uid,i,l,w,a]);return Xe(y,{onLogs:u,onError:c},v=>{let g;a!==void 0&&(g=a-1n);let b,x=!1;const C=tn(async()=>{var A;if(!x){try{b=await L(e,ya,"createContractEventFilter")({abi:n,address:r,args:s,eventName:i,strict:w,fromBlock:a})}catch{}x=!0;return}try{let P;if(b)P=await L(e,Sr,"getFilterChanges")({filter:b});else{const k=await L(e,Yn,"getBlockNumber")({});g&&g<k?P=await L(e,ja,"getContractEvents")({abi:n,address:r,args:s,eventName:i,fromBlock:g+1n,toBlock:k,strict:w}):P=[],g=k}if(P.length===0)return;if(o)v.onLogs(P);else for(const k of P)v.onLogs([k])}catch(P){b&&P instanceof Et&&(x=!1),(A=v.onError)==null||A.call(v,P)}},{emitOnBegin:!0,interval:l});return async()=>{b&&await L(e,$r,"uninstallFilter")({filter:b}),C()}})})():(()=>{const w=f??!1,y=Y(["watchContractEvent",r,s,o,e.uid,i,l,w]);let v=!0,g=()=>v=!1;return Xe(y,{onLogs:u,onError:c},b=>((async()=>{try{const x=(()=>{if(e.transport.type==="fallback"){const P=e.transport.transports.find(k=>k.config.type==="webSocket"||k.config.type==="ipc");return P?P.value:e.transport}return e.transport})(),C=i?jn({abi:n,eventName:i,args:s}):[],{unsubscribe:A}=await x.subscribe({params:["logs",{address:r,topics:C}],onData(P){var O;if(!v)return;const k=P.result;try{const{eventName:B,args:M}=so({abi:n,data:k.data,topics:k.topics,strict:f}),N=Ke(k,{args:M,eventName:B});b.onLogs([N])}catch(B){let M,N;if(B instanceof ln||B instanceof yr){if(f)return;M=B.abiItem.name,N=(O=B.abiItem.inputs)==null?void 0:O.some($=>!("name"in $&&$.name))}const j=Ke(k,{args:N?[]:{},eventName:M});b.onLogs([j])}},onError(P){var k;(k=b.onError)==null||k.call(b,P)}});g=A,v||g()}catch(x){c==null||c(x)}})(),()=>g()))})()}class lt extends T{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class wt extends T{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function ho({chain:e,currentChainId:t}){if(!e)throw new ff;if(t!==e.id)throw new lf({chain:e,currentChainId:t})}function mo(e,{docsPath:t,...n}){const r=(()=>{const s=Er(e,n);return s instanceof Gn?e:s})();return new Ll(r,{docsPath:t,...n})}async function yo(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const Vr=new Ln(128);async function Br(e,t){var v,g,b,x;const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:o,blobs:i,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:p,type:h,value:m,...w}=t;if(typeof n>"u")throw new lt({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?V(n):null;try{dt(t);const C=await(async()=>{if(t.to)return t.to;if(t.to!==null&&o&&o.length>0)return await xr({authorization:o[0]}).catch(()=>{throw new T("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let A;r!==null&&(A=await L(e,Bt,"getChainId")({}),ho({currentChainId:A,chain:r}));const P=(b=(g=(v=e.chain)==null?void 0:v.formatters)==null?void 0:g.transactionRequest)==null?void 0:b.format,O=(P||$t)({...Hn(w,{format:P}),accessList:s,authorizationList:o,blobs:i,chainId:A,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:p,to:C,type:h,value:m},"sendTransaction"),B=Vr.get(e.uid),M=B?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:M,params:[O]},{retryCount:0})}catch(N){if(B===!1)throw N;const j=N;if(j.name==="InvalidInputRpcError"||j.name==="InvalidParamsRpcError"||j.name==="MethodNotFoundRpcError"||j.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then($=>(Vr.set(e.uid,!0),$)).catch($=>{const S=$;throw S.name==="MethodNotFoundRpcError"||S.name==="MethodNotSupportedRpcError"?(Vr.set(e.uid,!1),j):S});throw j}}if((y==null?void 0:y.type)==="local"){const A=await L(e,qn,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:o,blobs:i,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:p,nonceManager:y.nonceManager,parameters:[...no,"sidecars"],type:h,value:m,...w,to:C}),P=(x=r==null?void 0:r.serializers)==null?void 0:x.transaction,k=await y.signTransaction(A,{serializer:P});return await L(e,yo,"sendRawTransaction")({serializedTransaction:k})}throw(y==null?void 0:y.type)==="smart"?new wt({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new wt({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(C){throw C instanceof wt?C:mo(C,{...t,account:y,chain:t.chain||void 0})}}async function Rn(e,t){return Rn.internal(e,Br,"sendTransaction",t)}(function(e){async function t(n,r,s,o){const{abi:i,account:a=n.account,address:c,args:u,dataSuffix:d,functionName:l,...f}=o;if(typeof a>"u")throw new lt({docsPath:"/docs/contract/writeContract"});const p=a?V(a):null,h=he({abi:i,args:u,functionName:l});try{return await L(n,r,s)({data:`${h}${d?d.replace("0x",""):""}`,to:c,account:p,...f})}catch(m){throw Tt(m,{abi:i,address:c,args:u,docsPath:"/docs/contract/writeContract",functionName:l,sender:p==null?void 0:p.address})}}e.internal=t})(Rn||(Rn={}));class Af extends T{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}function fr(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{const i=async({count:a=0}={})=>{const c=async({error:u})=>{const d=typeof t=="function"?t({count:a,error:u}):t;d&&await Cs(d),i({count:a+1})};try{const u=await e();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});o(u)}};i()})}const lc={"0x0":"reverted","0x1":"success"};function fc(e,t){const n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>Ke(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Ee(e.transactionIndex):null,status:e.status?lc[e.status]:null,type:e.type?ka[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}const pc="0x5792579257925792579257925792579257925792579257925792579257925792",hc=z(0,{size:32});async function mc(e,t){const{account:n=e.account,capabilities:r,chain:s=e.chain,experimental_fallback:o,experimental_fallbackDelay:i=32,forceAtomic:a=!1,id:c,version:u="2.0.0"}=t,d=n?V(n):null,l=t.calls.map(f=>{const p=f,h=p.abi?he({abi:p.abi,functionName:p.functionName,args:p.args}):p.data;return{data:p.dataSuffix&&h?ve([h,p.dataSuffix]):h,to:p.to,value:p.value?z(p.value):void 0}});try{const f=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:l,capabilities:r,chainId:z(s.id),from:d==null?void 0:d.address,id:c,version:u}]},{retryCount:0});return typeof f=="string"?{id:f}:f}catch(f){const p=f;if(o&&(p.name==="MethodNotFoundRpcError"||p.name==="MethodNotSupportedRpcError"||p.name==="UnknownRpcError"||p.details.toLowerCase().includes("does not exist / is not available")||p.details.toLowerCase().includes("missing or invalid. request()")||p.details.toLowerCase().includes("did not match any variant of untagged enum")||p.details.toLowerCase().includes("account upgraded to unsupported contract")||p.details.toLowerCase().includes("eip-7702 not supported")||p.details.toLowerCase().includes("unsupported wc_ method")||p.details.toLowerCase().includes("feature toggled misconfigured"))){if(r&&Object.values(r).some(v=>!v.optional)){const v="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Zt(new T(v,{details:v}))}if(a&&l.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Jt(new T(y,{details:y}))}const h=[];for(const y of l){const v=Br(e,{account:d,chain:s,data:y.data,to:y.to,value:y.value?fe(y.value):void 0});h.push(v),i>0&&await new Promise(g=>setTimeout(g,i))}const m=await Promise.allSettled(h);if(m.every(y=>y.status==="rejected"))throw m[0].reason;const w=m.map(y=>y.status==="fulfilled"?y.value:hc);return{id:ve([...w,z(s.id,{size:32}),pc])}}throw mo(f,{...t,account:d,chain:t.chain})}}async function yc(e,t){async function n(d){if(d.endsWith(pc.slice(2))){const f=ct(ds(d,-64,-32)),p=ds(d,0,-64).slice(2).match(/.{1,64}/g),h=await Promise.all(p.map(w=>hc.slice(2)!==w?e.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),m=h.some(w=>w===null)?100:h.every(w=>(w==null?void 0:w.status)==="0x1")?200:h.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Ee(f),receipts:h.filter(Boolean),status:m,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[d]})}const{atomic:r=!1,chainId:s,receipts:o,version:i="2.0.0",...a}=await n(t.id),[c,u]=(()=>{const d=a.status;return d>=100&&d<200?["pending",d]:d>=200&&d<300?["success",d]:d>=300&&d<700?["failure",d]:d==="CONFIRMED"?["success",200]:d==="PENDING"?["pending",100]:[void 0,d]})();return{...a,atomic:r,chainId:s?Ee(s):void 0,receipts:(o==null?void 0:o.map(d=>({...d,blockNumber:fe(d.blockNumber),gasUsed:fe(d.gasUsed),status:lc[d.status]})))??[],statusCode:u,status:c,version:i}}async function bc(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:s=({statusCode:m})=>m===200||m>=300,retryCount:o=4,retryDelay:i=({count:m})=>~~(1<<m)*200,timeout:a=6e4,throwOnFailure:c=!1}=t,u=Y(["waitForCallsStatus",e.uid,n]),{promise:d,resolve:l,reject:f}=po();let p;const h=Xe(u,{resolve:l,reject:f},m=>{const w=tn(async()=>{const y=v=>{clearTimeout(p),w(),v(),h()};try{const v=await fr(async()=>{const g=await L(e,yc,"getCallsStatus")({id:n});if(c&&g.status==="failure")throw new Af(g);return g},{retryCount:o,delay:i});if(!s(v))return;y(()=>m.resolve(v))}catch(v){y(()=>m.reject(v))}},{interval:r,emitOnBegin:!0});return w});return p=a?setTimeout(()=>{h(),clearTimeout(p),f(new Cf({id:n}))},a):void 0,await d}class Cf extends T{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const Is=256;let nr=Is,rr;function gc(e=11){if(!rr||nr+e>Is*2){rr="",nr=0;for(let t=0;t<Is;t++)rr+=(256+Math.random()*256|0).toString(16).substring(1)}return rr.substring(nr,nr+++e)}function wc(e){const{batch:t,chain:n,ccipRead:r,key:s="base",name:o="Base Client",type:i="base"}=e,a=e.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),d=e.pollingInterval??u,l=e.cacheTime??d,f=e.account?V(e.account):void 0,{config:p,request:h,value:m}=e.transport({chain:n,pollingInterval:d}),w={...p,...m},y={account:f,batch:t,cacheTime:l,ccipRead:r,chain:n,key:s,name:o,pollingInterval:d,request:h,transport:w,type:i,uid:gc(),...a?{experimental_blockTag:a}:{}};function v(g){return b=>{const x=b(g);for(const A in y)delete x[A];const C={...g,...x};return Object.assign(C,{extend:v(C)})}}return Object.assign(y,{extend:v(y)})}function bo(e){var n,r,s,o,i,a;if(!(e instanceof T))return!1;const t=e.walk(c=>c instanceof ps);return t instanceof ps?((n=t.data)==null?void 0:n.errorName)==="HttpError"||((r=t.data)==null?void 0:r.errorName)==="ResolverError"||((s=t.data)==null?void 0:s.errorName)==="ResolverNotContract"||((o=t.data)==null?void 0:o.errorName)==="ResolverNotFound"||((i=t.data)==null?void 0:i.errorName)==="ReverseAddressMismatch"||((a=t.data)==null?void 0:a.errorName)==="UnsupportedResolverProfile":!1}function If(e){const{abi:t,data:n}=e,r=Vt(n,0,4),s=t.find(o=>o.type==="function"&&r===_n(xe(o)));if(!s)throw new pd(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Un(s.inputs,Vt(n,4)):void 0}}const Wr="/docs/contract/encodeErrorResult";function yi(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const c=St({abi:t,args:r,name:n});if(!c)throw new zo(n,{docsPath:Wr});s=c}if(s.type!=="error")throw new zo(void 0,{docsPath:Wr});const o=xe(s),i=_n(o);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new ld(s.name,{docsPath:Wr});a=It(s.inputs,r)}return Qt([i,a])}const Zr="/docs/contract/encodeFunctionResult";function Sf(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const i=St({abi:t,name:n});if(!i)throw new Dt(n,{docsPath:Zr});s=i}if(s.type!=="function")throw new Dt(void 0,{docsPath:Zr});if(!s.outputs)throw new Ki(s.name,{docsPath:Zr});const o=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Xi(r)})();return It(s.outputs,o)}const kr="x-batch-gateway:true";async function $f(e){const{data:t,ccipRequest:n}=e,{args:[r]}=If({abi:Ps,data:t}),s=[],o=[];return await Promise.all(r.map(async(i,a)=>{try{o[a]=i.urls.includes(kr)?await $f({data:i.data,ccipRequest:n}):await n(i),s[a]=!1}catch(c){s[a]=!0,o[a]=Bf(c)}})),Sf({abi:Ps,functionName:"query",result:[s,o]})}function Bf(e){return e.name==="HttpRequestError"&&e.status?yi({abi:Ps,errorName:"HttpError",args:[e.status,e.shortMessage]}):yi({abi:[ba],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function vc(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return Re(t)?t:null}function Ss(e){let t=new Uint8Array(32).fill(0);if(!e)return K(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=vc(n[r]),o=s?Xt(s):ee(bt(n[r]),"bytes");t=ee(ve([t,o]),"bytes")}return K(t)}function kf(e){return`[${e.slice(2)}]`}function Nf(e){const t=new Uint8Array(32).fill(0);return e?vc(e)||ee(bt(e)):K(t)}function go(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(bt(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let i=bt(s[o]);i.byteLength>255&&(i=bt(kf(Nf(s[o])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function Mf(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:o,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return en({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),d=c==null?void 0:c.ensTlds;if(d&&!d.some(f=>o.endsWith(f)))return null;const l=s!=null?[Ss(o),BigInt(s)]:[Ss(o)];try{const f=he({abi:pi,functionName:"addr",args:l}),p={address:u,abi:sc,functionName:"resolveWithGateways",args:[Ye(go(o)),f,i??[kr]],blockNumber:n,blockTag:r},m=await L(e,Ae,"readContract")(p);if(m[0]==="0x")return null;const w=kt({abi:pi,args:l,functionName:"addr",data:m[0]});return w==="0x"||ct(w)==="0x00"?null:w}catch(f){if(a)throw f;if(bo(f))return null;throw f}}class Rf extends T{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class an extends T{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class wo extends T{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Ff extends T{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Of=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Lf=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,zf=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,_f=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function jf(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function bi(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function xc({uri:e,gatewayUrls:t}){const n=zf.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=bi(t==null?void 0:t.ipfs,"https://ipfs.io"),s=bi(t==null?void 0:t.arweave,"https://arweave.net"),o=e.match(Of),{protocol:i,subpath:a,target:c,subtarget:u=""}=(o==null?void 0:o.groups)||{},d=i==="ipns:/"||a==="ipns/",l=i==="ipfs:/"||a==="ipfs/"||Lf.test(e);if(e.startsWith("http")&&!d&&!l){let p=e;return t!=null&&t.arweave&&(p=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:p,isOnChain:!1,isEncoded:!1}}if((d||l)&&c)return{uri:`${r}/${d?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=e.replace(_f,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new wo({uri:e})}function Ec(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Rf({data:e});return e.image||e.image_url||e.image_data}async function Uf({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await vo({gatewayUrls:e,uri:Ec(n)})}catch{throw new wo({uri:t})}}async function vo({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=xc({uri:t,gatewayUrls:e});if(r||await jf(n))return n;throw new wo({uri:t})}function Df(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,i]=n.split(":"),[a,c]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new an({reason:"Only EIP-155 supported"});if(!i)throw new an({reason:"Chain ID not found"});if(!c)throw new an({reason:"Contract address not found"});if(!s)throw new an({reason:"Token ID not found"});if(!a)throw new an({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Gf(e,{nft:t}){if(t.namespace==="erc721")return Ae(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Ae(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Ff({namespace:t.namespace})}async function Hf(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?qf(e,{gatewayUrls:t,record:n}):vo({uri:n,gatewayUrls:t})}async function qf(e,{gatewayUrls:t,record:n}){const r=Df(n),s=await Gf(e,{nft:r}),{uri:o,isOnChain:i,isEncoded:a}=xc({uri:s,gatewayUrls:t});if(i&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=a?atob(o.replace("data:application/json;base64,","")):o,d=JSON.parse(u);return vo({uri:Ec(d),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Uf({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,c)})}async function Tc(e,t){const{blockNumber:n,blockTag:r,key:s,name:o,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return en({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),d=c==null?void 0:c.ensTlds;if(d&&!d.some(l=>o.endsWith(l)))return null;try{const l={address:u,abi:sc,args:[Ye(go(o)),he({abi:fi,functionName:"text",args:[Ss(o),s]}),i??[kr]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},p=await L(e,Ae,"readContract")(l);if(p[0]==="0x")return null;const h=kt({abi:fi,functionName:"text",data:p[0]});return h===""?null:h}catch(l){if(a)throw l;if(bo(l))return null;throw l}}async function Vf(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){const c=await L(e,Tc,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:o,strict:i});if(!c)return null;try{return await Hf(e,{record:c,gatewayUrls:r})}catch{return null}}async function Wf(e,t){const{address:n,blockNumber:r,blockTag:s,coinType:o=60n,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return en({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const d={address:u,abi:af,args:[n,o,i??[kr]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},l=L(e,Ae,"readContract"),[f]=await l(d);return f||null}catch(d){if(a)throw d;if(bo(d))return null;throw d}}async function Zf(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:o}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return en({blockNumber:n,chain:o,contract:"ensUniversalResolver"})})(),a=o==null?void 0:o.ensTlds;if(a&&!a.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);const[c]=await L(e,Ae,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ye(go(s))],blockNumber:n,blockTag:r});return c}async function Pc(e,t){var w,y,v;const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:o,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:l,to:f,value:p,...h}=t,m=n?V(n):void 0;try{dt(t);const b=(typeof r=="bigint"?z(r):void 0)||s,x=(v=(y=(w=e.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:v.format,A=(x||$t)({...Hn(h,{format:x}),from:m==null?void 0:m.address,blobs:o,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:l,to:f,value:p},"createAccessList"),P=await e.request({method:"eth_createAccessList",params:[A,b]});return{accessList:P.accessList,gasUsed:BigInt(P.gasUsed)}}catch(g){throw cc(g,{...t,account:m,chain:e.chain})}}async function Jf(e){const t=wr(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function Ac(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:i,toBlock:a}={}){const c=s??(r?[r]:void 0),u=wr(e,{method:"eth_newFilter"});let d=[];c&&(d=[c.flatMap(p=>jn({abi:[p],eventName:p.name,args:n}))],r&&(d=d[0]));const l=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?z(o):o,toBlock:typeof a=="bigint"?z(a):a,...d.length?{topics:d}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:o,id:l,request:u(l),strict:!!i,toBlock:a,type:"event"}}async function Cc(e){const t=wr(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function Yf(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?z(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function Kf(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Xf(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?z(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Ee(o)}async function $s(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?z(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}class Qf extends T{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function ep(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,i,a,c,u,d,l]=await L(e,Ae,"readContract")({abi:tp,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:u,salt:d},extensions:l,fields:o}}catch(o){const i=o;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Qf({address:n}):i}}const tp=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function np(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function rp(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=typeof n=="bigint"?z(n):void 0,i=await e.request({method:"eth_feeHistory",params:[z(t),o||r,s]},{dedupe:!!o});return np(i)}async function sp(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>Ke(o));return t.abi?oo({abi:t.abi,logs:s,strict:n}):s}async function op({address:e,authorization:t,signature:n}){return Vn(Gs(e),await xr({authorization:t,signature:n}))}const sr=new Ln(8192);function ip(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(sr.get(n))return sr.get(n);const r=e().finally(()=>sr.delete(n));return sr.set(n,r),r}function ap(e,t={}){return async(n,r={})=>{var l;const{dedupe:s=!1,methods:o,retryDelay:i=150,retryCount:a=3,uid:c}={...t,...r},{method:u}=n;if((l=o==null?void 0:o.exclude)!=null&&l.includes(u))throw new mt(new Error("method not supported"),{method:u});if(o!=null&&o.include&&!o.include.includes(u))throw new mt(new Error("method not supported"),{method:u});const d=s?Gt(`${c}.${Y(n)}`):void 0;return ip(()=>fr(async()=>{try{return await e(n)}catch(f){const p=f;switch(p.code){case hn.code:throw new hn(p);case mn.code:throw new mn(p);case yn.code:throw new yn(p,{method:n.method});case bn.code:throw new bn(p);case xt.code:throw new xt(p);case Et.code:throw new Et(p);case gn.code:throw new gn(p);case wn.code:throw new wn(p);case vn.code:throw new vn(p);case mt.code:throw new mt(p,{method:n.method});case Wt.code:throw new Wt(p);case xn.code:throw new xn(p);case _t.code:throw new _t(p);case En.code:throw new En(p);case Tn.code:throw new Tn(p);case Pn.code:throw new Pn(p);case An.code:throw new An(p);case Cn.code:throw new Cn(p);case Zt.code:throw new Zt(p);case In.code:throw new In(p);case Sn.code:throw new Sn(p);case $n.code:throw new $n(p);case Bn.code:throw new Bn(p);case kn.code:throw new kn(p);case Jt.code:throw new Jt(p);case 5e3:throw new _t(p);default:throw f instanceof T?f:new Gl(p)}}},{delay:({count:f,error:p})=>{var h;if(p&&p instanceof cn){const m=(h=p==null?void 0:p.headers)==null?void 0:h.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m,10)*1e3}return~~(1<<f)*i},retryCount:a,shouldRetry:({error:f})=>cp(f)}),{enabled:s,id:d})}}function cp(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===Wt.code||e.code===xt.code:e instanceof cn&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function up(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,o)=>{(async()=>{let i;try{const a=new AbortController;n>0&&(i=setTimeout(()=>{r&&a.abort()},n)),s(await e({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&o(t),o(a)}finally{clearTimeout(i)}})()})}function dp(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const gi=dp();function lp(e,t={}){return{async request(n){var f;const{body:r,fetchFn:s=t.fetchFn??fetch,onRequest:o=t.onRequest,onResponse:i=t.onResponse,timeout:a=t.timeout??1e4}=n,c={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:u,method:d,signal:l}=c;try{const p=await up(async({signal:m})=>{const w={...c,body:Array.isArray(r)?Y(r.map(b=>({jsonrpc:"2.0",id:b.id??gi.take(),...b}))):Y({jsonrpc:"2.0",id:r.id??gi.take(),...r}),headers:{"Content-Type":"application/json",...u},method:d||"POST",signal:l||(a>0?m:null)},y=new Request(e,w),v=await(o==null?void 0:o(y,w))??{...w,url:e};return await s(v.url??e,v)},{errorInstance:new Xo({body:r,url:e}),timeout:a,signal:!0});i&&await i(p);let h;if((f=p.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))h=await p.json();else{h=await p.text();try{h=JSON.parse(h||"{}")}catch(m){if(p.ok)throw m;h={error:h}}}if(!p.ok)throw new cn({body:r,details:Y(h.error)||p.statusText,headers:p.headers,status:p.status,url:e});return h}catch(p){throw p instanceof cn||p instanceof Xo?p:new cn({body:r,cause:p,url:e})}}}}const fp=`Ethereum Signed Message:
`;function pp(e){const t=typeof e=="string"?Gt(e):typeof e.raw=="string"?e.raw:K(e.raw),n=Gt(`${fp}${q(t)}`);return ve([n,t])}function Ic(e,t){return ee(pp(e),t)}class hp extends T{constructor({domain:t}){super(`Invalid domain "${Y(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class mp extends T{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class yp extends T{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function bp(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(c,u)=>{const d={...u};for(const l of c){const{name:f,type:p}=l;p==="address"&&(d[f]=d[f].toLowerCase())}return d},i=s.EIP712Domain?t?o(s.EIP712Domain,t):{}:{},a=(()=>{if(r!=="EIP712Domain")return o(s[r],n)})();return Y({domain:i,message:a,primaryType:r,types:s})}function Sc(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(i,a)=>{for(const c of i){const{name:u,type:d}=c,l=a[u],f=d.match(ha);if(f&&(typeof l=="number"||typeof l=="bigint")){const[m,w,y]=f;z(l,{signed:w==="int",size:Number.parseInt(y,10)/8})}if(d==="address"&&typeof l=="string"&&!we(l))throw new ut({address:l});const p=d.match(il);if(p){const[m,w]=p;if(w&&q(l)!==Number.parseInt(w,10))throw new md({expectedSize:Number.parseInt(w,10),givenSize:q(l)})}const h=s[d];h&&(gp(d),o(h,l))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new hp({domain:t});o(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])o(s[r],n);else throw new mp({primaryType:r,types:s})}function $c({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function gp(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new yp({type:e})}function wp(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:$c({domain:t}),...e.types};Sc({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(vp({domain:t,types:s})),r!=="EIP712Domain"&&o.push(Bc({data:n,primaryType:r,types:s})),ee(ve(o))}function vp({domain:e,types:t}){return Bc({data:e,primaryType:"EIP712Domain",types:t})}function Bc({data:e,primaryType:t,types:n}){const r=kc({data:e,primaryType:t,types:n});return ee(r)}function kc({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[xp({primaryType:t,types:n})];for(const o of n[t]){const[i,a]=Mc({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(i),s.push(a)}return It(r,s)}function xp({primaryType:e,types:t}){const n=Ye(Ep({primaryType:e,types:t}));return ee(n)}function Ep({primaryType:e,types:t}){let n="";const r=Nc({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return n}function Nc({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])Nc({primaryType:o.type,types:t},n);return n}function Mc({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},ee(kc({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ee(r)];if(n==="string")return[{type:"bytes32"},ee(Ye(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(i=>Mc({name:t,type:s,types:e,value:i}));return[{type:"bytes32"},ee(It(o.map(([i])=>i),o.map(([,i])=>i)))]}return[{type:n},r]}class Tp extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Pp={checksum:new Tp(8192)},Jr=Pp.checksum;function Rc(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=ua(j0(e));return n==="Bytes"?r:Pe(r)}const Ap=/^0x[a-fA-F0-9]{40}$/;function Nr(e,t={}){const{strict:n=!0}=t;if(!Ap.test(e))throw new wi({address:e,cause:new Cp});if(n){if(e.toLowerCase()===e)return;if(Fc(e)!==e)throw new wi({address:e,cause:new Ip})}}function Fc(e){if(Jr.has(e))return Jr.get(e);Nr(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=Rc(D0(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const s=`0x${r.join("")}`;return Jr.set(e,s),s}function Bs(e,t={}){const{strict:n=!0}=t??{};try{return Nr(e,{strict:n}),!0}catch{return!1}}class wi extends D{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Cp extends D{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Ip extends D{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Sp=/^(.*)\[([0-9]*)\]$/,$p=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Oc=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,vi=2n**256n-1n;function Ut(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=To(t.type);if(o){const[i,a]=o;return kp(e,{...t,type:a},{checksumAddress:r,length:i,staticPosition:s})}if(t.type==="tuple")return Fp(e,t,{checksumAddress:r,staticPosition:s});if(t.type==="address")return Bp(e,{checksum:r});if(t.type==="bool")return Np(e);if(t.type.startsWith("bytes"))return Mp(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Rp(e,t);if(t.type==="string")return Op(e,{staticPosition:s});throw new Ao(t.type)}const xi=32,ks=32;function Bp(e,t={}){const{checksum:n=!1}=t,r=e.readBytes(32);return[(o=>n?Fc(o):o)(Pe(H0(r,-20))),32]}function kp(e,t,n){const{checksumAddress:r,length:s,staticPosition:o}=n;if(!s){const c=Ze(e.readBytes(ks)),u=o+c,d=u+xi;e.setPosition(u);const l=Ze(e.readBytes(xi)),f=Fn(t);let p=0;const h=[];for(let m=0;m<l;++m){e.setPosition(d+(f?m*32:p));const[w,y]=Ut(e,t,{checksumAddress:r,staticPosition:d});p+=y,h.push(w)}return e.setPosition(o+32),[h,32]}if(Fn(t)){const c=Ze(e.readBytes(ks)),u=o+c,d=[];for(let l=0;l<s;++l){e.setPosition(u+l*32);const[f]=Ut(e,t,{checksumAddress:r,staticPosition:u});d.push(f)}return e.setPosition(o+32),[d,32]}let i=0;const a=[];for(let c=0;c<s;++c){const[u,d]=Ut(e,t,{checksumAddress:r,staticPosition:o+i});i+=d,a.push(u)}return[a,i]}function Np(e){return[V0(e.readBytes(32),{size:32}),32]}function Mp(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=Ze(e.readBytes(32));e.setPosition(n+i);const a=Ze(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[Pe(c),32]}return[Pe(e.readBytes(Number.parseInt(s,10),32)),32]}function Rp(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?q0(s,{signed:n}):Ze(s,{signed:n}),32]}function Fp(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=t.components.length===0||t.components.some(({name:c})=>!c),i=o?[]:{};let a=0;if(Fn(t)){const c=Ze(e.readBytes(ks)),u=s+c;for(let d=0;d<t.components.length;++d){const l=t.components[d];e.setPosition(u+a);const[f,p]=Ut(e,l,{checksumAddress:r,staticPosition:u});a+=p,i[o?d:l==null?void 0:l.name]=f}return e.setPosition(s+32),[i,32]}for(let c=0;c<t.components.length;++c){const u=t.components[c],[d,l]=Ut(e,u,{checksumAddress:r,staticPosition:s});i[o?c:u==null?void 0:u.name]=d,a+=l}return[i,a]}function Op(e,{staticPosition:t}){const n=Ze(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Ze(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=W0(Ya(o));return e.setPosition(t+32),[i,32]}function Lp({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(xo({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function xo({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=To(r.type);if(s){const[o,i]=s;return _p(n,{checksumAddress:e,length:o,parameter:{...r,type:i}})}if(r.type==="tuple")return Hp(n,{checksumAddress:e,parameter:r});if(r.type==="address")return zp(n,{checksum:e});if(r.type==="bool")return Up(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const o=r.type.startsWith("int"),[,,i="256"]=Oc.exec(r.type)??[];return Dp(n,{signed:o,size:Number(i)})}if(r.type.startsWith("bytes"))return jp(n,{type:r.type});if(r.type==="string")return Gp(n);throw new Ao(r.type)}function Eo(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?t+=32:t+=pe(a)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?(n.push(ne(t+s,{size:32})),r.push(a),s+=pe(a)):n.push(a)}return Te(...n,...r)}function zp(e,t){const{checksum:n=!1}=t;return Nr(e,{strict:n}),{dynamic:!1,encoded:Pt(e.toLowerCase())}}function _p(e,t){const{checksumAddress:n,length:r,parameter:s}=t,o=r===null;if(!Array.isArray(e))throw new Qp(e);if(!o&&e.length!==r)throw new Xp({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let i=!1;const a=[];for(let c=0;c<e.length;c++){const u=xo({checksumAddress:n,parameter:s,value:e[c]});u.dynamic&&(i=!0),a.push(u)}if(o||i){const c=Eo(a);if(o){const u=ne(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Te(u,c):u}}if(i)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Te(...a.map(({encoded:c})=>c))}}function jp(e,{type:t}){const[,n]=t.split("bytes"),r=pe(e);if(!n){let s=e;return r%32!==0&&(s=At(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:Te(Pt(ne(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new zc({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:At(e)}}function Up(e){if(typeof e!="boolean")throw new D(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Pt(Ka(e))}}function Dp(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new ec({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:ne(e,{size:32,signed:t})}}function Gp(e){const t=lo(e),n=Math.ceil(pe(t)/32),r=[];for(let s=0;s<n;s++)r.push(At(Me(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:Te(At(ne(pe(t),{size:32})),...r)}}function Hp(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const o=[];for(let i=0;i<r.components.length;i++){const a=r.components[i],c=Array.isArray(e)?i:a.name,u=xo({checksumAddress:n,parameter:a,value:e[c]});o.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Eo(o):Te(...o.map(({encoded:i})=>i))}}function To(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Fn(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(Fn);const n=To(e.type);return!!(n&&Fn({...e,type:n[1]}))}const qp={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Zp({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Wp({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Ei({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Ei({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Vp(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(qp);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}class Ei extends D{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class Wp extends D{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class Zp extends D{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function Jp(e,t,n={}){const{as:r="Array",checksumAddress:s=!1}=n,o=typeof t=="string"?Ja(t):t,i=Vp(o);if(Ot(o)===0&&e.length>0)throw new Kp;if(Ot(o)&&Ot(o)<32)throw new Yp({data:typeof t=="string"?t:Pe(t),parameters:e,size:Ot(o)});let a=0;const c=r==="Array"?[]:{};for(let u=0;u<e.length;++u){const d=e[u];i.setPosition(a);const[l,f]=Ut(i,d,{checksumAddress:s,staticPosition:0});a+=f,r==="Array"?c.push(l):c[d.name??u]=l}return c}function Po(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new _c({expectedLength:e.length,givenLength:t.length});const s=Lp({checksumAddress:r,parameters:e,values:t}),o=Eo(s);return o.length===0?"0x":o}function Ns(e,t){if(e.length!==t.length)throw new _c({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(Ns.encode(s,o))}return Te(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const c=r;return Nr(c),Pt(c.toLowerCase(),s?32:0)}if(n==="string")return lo(r);if(n==="bytes")return r;if(n==="bool")return Pt(Ka(r),s?32:1);const o=n.match(Oc);if(o){const[c,u,d="256"]=o,l=Number.parseInt(d,10)/8;return ne(r,{size:s?32:l,signed:u==="int"})}const i=n.match($p);if(i){const[c,u]=i;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new zc({expectedSize:Number.parseInt(u,10),value:r});return At(r,s?32:0)}const a=n.match(Sp);if(a&&Array.isArray(r)){const[c,u]=a,d=[];for(let l=0;l<r.length;l++)d.push(t(u,r[l],!0));return d.length===0?"0x":Te(...d)}throw new Ao(n)}e.encode=t})(Ns||(Ns={}));function Lc(e){return Array.isArray(e)&&typeof e[0]=="string"||typeof e=="string"?Oo(e):e}class Yp extends D{constructor({data:t,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Rt(n)})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class Kp extends D{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class Xp extends D{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class zc extends D{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${pe(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class _c extends D{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Qp extends D{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Ao extends D{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class jc extends Us{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Ld(t);const r=br(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),qt(o)}update(t){return Ht(this),this.iHash.update(t),this}digestInto(t){Ht(this),vt(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Uc=(e,t,n)=>new jc(e,t).update(n).digest();Uc.create=(e,t)=>new jc(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ae=BigInt(0),re=BigInt(1),yt=BigInt(2),eh=BigInt(3),Dc=BigInt(4),Gc=BigInt(5),Hc=BigInt(8);function ie(e,t){const n=e%t;return n>=ae?n:t+n}function be(e,t,n){let r=e;for(;t-- >ae;)r*=r,r%=n;return r}function Ms(e,t){if(e===ae)throw new Error("invert: expected non-zero number");if(t<=ae)throw new Error("invert: expected positive modulus, got "+t);let n=ie(e,t),r=t,s=ae,o=re;for(;n!==ae;){const a=r/n,c=r%n,u=s-o*a;r=n,n=c,s=o,o=u}if(r!==re)throw new Error("invert: does not exist");return ie(s,t)}function qc(e,t){const n=(e.ORDER+re)/Dc,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function th(e,t){const n=(e.ORDER-Gc)/Hc,r=e.mul(t,yt),s=e.pow(r,n),o=e.mul(t,s),i=e.mul(e.mul(o,yt),s),a=e.mul(o,e.sub(i,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function nh(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-re,n=0;for(;t%yt===ae;)t/=yt,n++;let r=yt;const s=Co(e);for(;Ti(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return qc;let o=s.pow(r,t);const i=(t+re)/yt;return function(c,u){if(c.is0(u))return u;if(Ti(c,u)!==1)throw new Error("Cannot find square root");let d=n,l=c.mul(c.ONE,o),f=c.pow(u,t),p=c.pow(u,i);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let h=1,m=c.sqr(f);for(;!c.eql(m,c.ONE);)if(h++,m=c.sqr(m),h===d)throw new Error("Cannot find square root");const w=re<<BigInt(d-h-1),y=c.pow(l,w);d=h,l=c.sqr(y),f=c.mul(f,l),p=c.mul(p,y)}return p}}function rh(e){return e%Dc===eh?qc:e%Hc===Gc?th:nh(e)}const sh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oh(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=sh.reduce((r,s)=>(r[s]="function",r),t);return Pr(e,n)}function ih(e,t,n){if(n<ae)throw new Error("invalid exponent, negatives unsupported");if(n===ae)return e.ONE;if(n===re)return t;let r=e.ONE,s=t;for(;n>ae;)n&re&&(r=e.mul(r,s)),s=e.sqr(s),n>>=re;return r}function Vc(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((i,a,c)=>e.is0(a)?i:(r[c]=i,e.mul(i,a)),e.ONE),o=e.inv(s);return t.reduceRight((i,a,c)=>e.is0(a)?i:(r[c]=e.mul(i,r[c]),e.mul(i,a)),o),r}function Ti(e,t){const n=(e.ORDER-re)/yt,r=e.pow(t,n),s=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),i=e.eql(r,e.neg(e.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function Wc(e,t){t!==void 0&&fn(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Co(e,t,n=!1,r={}){if(e<=ae)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:o}=Wc(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const a=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:o,MASK:Tr(s),ZERO:ae,ONE:re,create:c=>ie(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ae<=c&&c<e},is0:c=>c===ae,isOdd:c=>(c&re)===re,neg:c=>ie(-c,e),eql:(c,u)=>c===u,sqr:c=>ie(c*c,e),add:(c,u)=>ie(c+u,e),sub:(c,u)=>ie(c-u,e),mul:(c,u)=>ie(c*u,e),pow:(c,u)=>ih(a,c,u),div:(c,u)=>ie(c*Ms(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Ms(c,e),sqrt:r.sqrt||(c=>(i||(i=rh(e)),i(a,c))),toBytes:c=>n?Ha(c,o):Zn(c,o),fromBytes:c=>{if(c.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+c.length);return n?Ga(c):gt(c)},invertBatch:c=>Vc(a,c),cmov:(c,u,d)=>d?u:c});return Object.freeze(a)}function Zc(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Jc(e){const t=Zc(e);return t+Math.ceil(t/2)}function ah(e,t,n=!1){const r=e.length,s=Zc(t),o=Jc(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const i=n?Ga(e):gt(e),a=ie(i,t-re)+re;return n?Ha(a,s):Zn(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pi=BigInt(0),Rs=BigInt(1);function Yr(e,t){const n=t.negate();return e?n:t}function Yc(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Kr(e,t){Yc(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,o=Tr(e),i=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:s,shiftBy:i}}function Ai(e,t,n){const{windowSize:r,mask:s,maxNumber:o,shiftBy:i}=n;let a=Number(e&s),c=e>>i;a>r&&(a-=o,c+=Rs);const u=t*r,d=u+Math.abs(a)-1,l=a===0,f=a<0,p=t%2!==0;return{nextN:c,offset:d,isZero:l,isNeg:f,isNegF:p,offsetF:u}}function ch(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function uh(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Xr=new WeakMap,Kc=new WeakMap;function Qr(e){return Kc.get(e)||1}function dh(e,t){return{constTimeNegate:Yr,hasPrecomputes(n){return Qr(n)!==1},unsafeLadder(n,r,s=e.ZERO){let o=n;for(;r>Pi;)r&Rs&&(s=s.add(o)),o=o.double(),r>>=Rs;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=Kr(r,t),i=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,i.push(c);for(let d=1;d<o;d++)c=c.add(a),i.push(c);a=c.double()}return i},wNAF(n,r,s){let o=e.ZERO,i=e.BASE;const a=Kr(n,t);for(let c=0;c<a.windows;c++){const{nextN:u,offset:d,isZero:l,isNeg:f,isNegF:p,offsetF:h}=Ai(s,c,a);s=u,l?i=i.add(Yr(p,r[h])):o=o.add(Yr(f,r[d]))}return{p:o,f:i}},wNAFUnsafe(n,r,s,o=e.ZERO){const i=Kr(n,t);for(let a=0;a<i.windows&&s!==Pi;a++){const{nextN:c,offset:u,isZero:d,isNeg:l}=Ai(s,a,i);if(s=c,!d){const f=r[u];o=o.add(l?f.negate():f)}}return o},getPrecomputes(n,r,s){let o=Xr.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Xr.set(r,s(o))),o},wNAFCached(n,r,s){const o=Qr(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const i=Qr(n);return i===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(i,this.getPrecomputes(i,n,s),r,o)},setWindowSize(n,r){Yc(r,t),Kc.set(n,r),Xr.delete(n)}}}function lh(e,t,n,r){ch(n,e),uh(r,t);const s=n.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=$0(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Tr(c),d=new Array(Number(u)+1).fill(i),l=Math.floor((t.BITS-1)/c)*c;let f=i;for(let p=l;p>=0;p-=c){d.fill(i);for(let m=0;m<o;m++){const w=r[m],y=Number(w>>BigInt(p)&u);d[y]=d[y].add(n[m])}let h=i;for(let m=d.length-1,w=i;m>0;m--)w=w.add(d[m]),h=h.add(w);if(f=f.add(h),p!==0)for(let m=0;m<c;m++)f=f.double()}return f}function Xc(e){return oh(e.Fp),Pr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Wc(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ci(e){e.lowS!==void 0&&Nn("lowS",e.lowS),e.prehash!==void 0&&Nn("prehash",e.prehash)}function fh(e){const t=Xc(e);Pr(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class ph extends Error{constructor(t=""){super(t)}}const qe={Err:ph,_tlv:{encode:(e,t)=>{const{Err:n}=qe;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=tr(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?tr(s.length/2|128):"";return tr(e)+o+s+t},decode(e,t){const{Err:n}=qe;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let i=0;if(!o)i=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of u)i=i<<8|d;if(r+=c,i<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=qe;if(e<Ve)throw new t("integer: negative integers are not allowed");let n=tr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=qe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return gt(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=qe,s=ge("signature",e),{v:o,l:i}=r.decode(48,s);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,o),{v:u,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=qe,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}};function es(e,t){return Mn(Zn(e,t))}const Ve=BigInt(0),Q=BigInt(1);BigInt(2);const ts=BigInt(3),hh=BigInt(4);function mh(e){const t=fh(e),{Fp:n}=t,r=Co(t.n,t.nBitLength),s=t.toBytes||((g,b,x)=>{const C=b.toAffine();return dr(Uint8Array.from([4]),n.toBytes(C.x),n.toBytes(C.y))}),o=t.fromBytes||(g=>{const b=g.subarray(1),x=n.fromBytes(b.subarray(0,n.BYTES)),C=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x,y:C}});function i(g){const{a:b,b:x}=t,C=n.sqr(g),A=n.mul(C,g);return n.add(n.add(A,n.mul(g,b)),x)}function a(g,b){const x=n.sqr(b),C=i(g);return n.eql(x,C)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(t.a,ts),hh),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function d(g){return uo(g,Q,t.n)}function l(g){const{allowedPrivateKeyLengths:b,nByteLength:x,wrapPrivateKey:C,n:A}=t;if(b&&typeof g!="bigint"){if(Wn(g)&&(g=Mn(g)),typeof g!="string"||!b.includes(g.length))throw new Error("invalid private key");g=g.padStart(x*2,"0")}let P;try{P=typeof g=="bigint"?g:gt(ge("private key",g,x))}catch{throw new Error("invalid private key, expected hex or "+x+" bytes, got "+typeof g)}return C&&(P=ie(P,A)),jt("private key",P,Q,A),P}function f(g){if(!(g instanceof m))throw new Error("ProjectivePoint expected")}const p=ci((g,b)=>{const{px:x,py:C,pz:A}=g;if(n.eql(A,n.ONE))return{x,y:C};const P=g.is0();b==null&&(b=P?n.ONE:n.inv(A));const k=n.mul(x,b),O=n.mul(C,b),B=n.mul(A,b);if(P)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x:k,y:O}}),h=ci(g=>{if(g.is0()){if(t.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:b,y:x}=g.toAffine();if(!n.isValid(b)||!n.isValid(x))throw new Error("bad point: x or y not FE");if(!a(b,x))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(b,x,C){if(b==null||!n.isValid(b))throw new Error("x required");if(x==null||!n.isValid(x)||n.is0(x))throw new Error("y required");if(C==null||!n.isValid(C))throw new Error("z required");this.px=b,this.py=x,this.pz=C,Object.freeze(this)}static fromAffine(b){const{x,y:C}=b||{};if(!b||!n.isValid(x)||!n.isValid(C))throw new Error("invalid affine point");if(b instanceof m)throw new Error("projective point not allowed");const A=P=>n.eql(P,n.ZERO);return A(x)&&A(C)?m.ZERO:new m(x,C,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const x=Vc(n,b.map(C=>C.pz));return b.map((C,A)=>C.toAffine(x[A])).map(m.fromAffine)}static fromHex(b){const x=m.fromAffine(o(ge("pointHex",b)));return x.assertValidity(),x}static fromPrivateKey(b){return m.BASE.multiply(l(b))}static msm(b,x){return lh(m,r,b,x)}_setWindowSize(b){v.setWindowSize(this,b)}assertValidity(){h(this)}hasEvenY(){const{y:b}=this.toAffine();if(n.isOdd)return!n.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:x,py:C,pz:A}=this,{px:P,py:k,pz:O}=b,B=n.eql(n.mul(x,O),n.mul(P,A)),M=n.eql(n.mul(C,O),n.mul(k,A));return B&&M}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:b,b:x}=t,C=n.mul(x,ts),{px:A,py:P,pz:k}=this;let O=n.ZERO,B=n.ZERO,M=n.ZERO,N=n.mul(A,A),j=n.mul(P,P),$=n.mul(k,k),S=n.mul(A,P);return S=n.add(S,S),M=n.mul(A,k),M=n.add(M,M),O=n.mul(b,M),B=n.mul(C,$),B=n.add(O,B),O=n.sub(j,B),B=n.add(j,B),B=n.mul(O,B),O=n.mul(S,O),M=n.mul(C,M),$=n.mul(b,$),S=n.sub(N,$),S=n.mul(b,S),S=n.add(S,M),M=n.add(N,N),N=n.add(M,N),N=n.add(N,$),N=n.mul(N,S),B=n.add(B,N),$=n.mul(P,k),$=n.add($,$),N=n.mul($,S),O=n.sub(O,N),M=n.mul($,j),M=n.add(M,M),M=n.add(M,M),new m(O,B,M)}add(b){f(b);const{px:x,py:C,pz:A}=this,{px:P,py:k,pz:O}=b;let B=n.ZERO,M=n.ZERO,N=n.ZERO;const j=t.a,$=n.mul(t.b,ts);let S=n.mul(x,P),R=n.mul(C,k),I=n.mul(A,O),F=n.add(x,C),_=n.add(P,k);F=n.mul(F,_),_=n.add(S,R),F=n.sub(F,_),_=n.add(x,A);let U=n.add(P,O);return _=n.mul(_,U),U=n.add(S,I),_=n.sub(_,U),U=n.add(C,A),B=n.add(k,O),U=n.mul(U,B),B=n.add(R,I),U=n.sub(U,B),N=n.mul(j,_),B=n.mul($,I),N=n.add(B,N),B=n.sub(R,N),N=n.add(R,N),M=n.mul(B,N),R=n.add(S,S),R=n.add(R,S),I=n.mul(j,I),_=n.mul($,_),R=n.add(R,I),I=n.sub(S,I),I=n.mul(j,I),_=n.add(_,I),S=n.mul(R,_),M=n.add(M,S),S=n.mul(U,_),B=n.mul(F,B),B=n.sub(B,S),S=n.mul(F,R),N=n.mul(U,N),N=n.add(N,S),new m(B,M,N)}subtract(b){return this.add(b.negate())}is0(){return this.equals(m.ZERO)}wNAF(b){return v.wNAFCached(this,b,m.normalizeZ)}multiplyUnsafe(b){const{endo:x,n:C}=t;jt("scalar",b,Ve,C);const A=m.ZERO;if(b===Ve)return A;if(this.is0()||b===Q)return this;if(!x||v.hasPrecomputes(this))return v.wNAFCachedUnsafe(this,b,m.normalizeZ);let{k1neg:P,k1:k,k2neg:O,k2:B}=x.splitScalar(b),M=A,N=A,j=this;for(;k>Ve||B>Ve;)k&Q&&(M=M.add(j)),B&Q&&(N=N.add(j)),j=j.double(),k>>=Q,B>>=Q;return P&&(M=M.negate()),O&&(N=N.negate()),N=new m(n.mul(N.px,x.beta),N.py,N.pz),M.add(N)}multiply(b){const{endo:x,n:C}=t;jt("scalar",b,Q,C);let A,P;if(x){const{k1neg:k,k1:O,k2neg:B,k2:M}=x.splitScalar(b);let{p:N,f:j}=this.wNAF(O),{p:$,f:S}=this.wNAF(M);N=v.constTimeNegate(k,N),$=v.constTimeNegate(B,$),$=new m(n.mul($.px,x.beta),$.py,$.pz),A=N.add($),P=j.add(S)}else{const{p:k,f:O}=this.wNAF(b);A=k,P=O}return m.normalizeZ([A,P])[0]}multiplyAndAddUnsafe(b,x,C){const A=m.BASE,P=(O,B)=>B===Ve||B===Q||!O.equals(A)?O.multiplyUnsafe(B):O.multiply(B),k=P(this,x).add(P(b,C));return k.is0()?void 0:k}toAffine(b){return p(this,b)}isTorsionFree(){const{h:b,isTorsionFree:x}=t;if(b===Q)return!0;if(x)return x(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:x}=t;return b===Q?this:x?x(m,this):this.multiplyUnsafe(t.h)}toRawBytes(b=!0){return Nn("isCompressed",b),this.assertValidity(),s(m,this,b)}toHex(b=!0){return Nn("isCompressed",b),Mn(this.toRawBytes(b))}}m.BASE=new m(t.Gx,t.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const{endo:w,nBitLength:y}=t,v=dh(m,w?Math.ceil(y/2):y);return{CURVE:t,ProjectivePoint:m,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:d}}function yh(e){const t=Xc(e);return Pr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function bh(e){const t=yh(e),{Fp:n,n:r,nByteLength:s,nBitLength:o}=t,i=n.BYTES+1,a=2*n.BYTES+1;function c($){return ie($,r)}function u($){return Ms($,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:f,isWithinCurveOrder:p}=mh({...t,toBytes($,S,R){const I=S.toAffine(),F=n.toBytes(I.x),_=dr;return Nn("isCompressed",R),R?_(Uint8Array.from([S.hasEvenY()?2:3]),F):_(Uint8Array.from([4]),F,n.toBytes(I.y))},fromBytes($){const S=$.length,R=$[0],I=$.subarray(1);if(S===i&&(R===2||R===3)){const F=gt(I);if(!uo(F,Q,n.ORDER))throw new Error("Point is not on curve");const _=f(F);let U;try{U=n.sqrt(_)}catch(J){const W=J instanceof Error?": "+J.message:"";throw new Error("Point is not on curve"+W)}const H=(U&Q)===Q;return(R&1)===1!==H&&(U=n.neg(U)),{x:F,y:U}}else if(S===a&&R===4){const F=n.fromBytes(I.subarray(0,n.BYTES)),_=n.fromBytes(I.subarray(n.BYTES,2*n.BYTES));return{x:F,y:_}}else{const F=i,_=a;throw new Error("invalid Point, expected length of "+F+", or uncompressed "+_+", got "+S)}}});function h($){const S=r>>Q;return $>S}function m($){return h($)?c(-$):$}const w=($,S,R)=>gt($.slice(S,R));class y{constructor(S,R,I){jt("r",S,Q,r),jt("s",R,Q,r),this.r=S,this.s=R,I!=null&&(this.recovery=I),Object.freeze(this)}static fromCompact(S){const R=s;return S=ge("compactSignature",S,R*2),new y(w(S,0,R),w(S,R,2*R))}static fromDER(S){const{r:R,s:I}=qe.toSig(ge("DER",S));return new y(R,I)}assertValidity(){}addRecoveryBit(S){return new y(this.r,this.s,S)}recoverPublicKey(S){const{r:R,s:I,recovery:F}=this,_=A(ge("msgHash",S));if(F==null||![0,1,2,3].includes(F))throw new Error("recovery id invalid");const U=F===2||F===3?R+t.n:R;if(U>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=(F&1)===0?"02":"03",Z=d.fromHex(H+es(U,n.BYTES)),J=u(U),W=c(-_*J),X=c(I*J),Ie=d.BASE.multiplyAndAddUnsafe(Z,W,X);if(!Ie)throw new Error("point at infinify");return Ie.assertValidity(),Ie}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return ur(this.toDERHex())}toDERHex(){return qe.hexFromSig(this)}toCompactRawBytes(){return ur(this.toCompactHex())}toCompactHex(){const S=s;return es(this.r,S)+es(this.s,S)}}const v={isValidPrivateKey($){try{return l($),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const $=Jc(t.n);return ah(t.randomBytes($),t.n)},precompute($=8,S=d.BASE){return S._setWindowSize($),S.multiply(BigInt(3)),S}};function g($,S=!0){return d.fromPrivateKey($).toRawBytes(S)}function b($){if(typeof $=="bigint")return!1;if($ instanceof d)return!0;const R=ge("key",$).length,I=n.BYTES,F=I+1,_=2*I+1;if(!(t.allowedPrivateKeyLengths||s===F))return R===F||R===_}function x($,S,R=!0){if(b($)===!0)throw new Error("first arg must be private key");if(b(S)===!1)throw new Error("second arg must be public key");return d.fromHex(S).multiply(l($)).toRawBytes(R)}const C=t.bits2int||function($){if($.length>8192)throw new Error("input is too large");const S=gt($),R=$.length*8-o;return R>0?S>>BigInt(R):S},A=t.bits2int_modN||function($){return c(C($))},P=Tr(o);function k($){return jt("num < 2^"+o,$,Ve,P),Zn($,s)}function O($,S,R=B){if(["recovered","canonical"].some(Oe=>Oe in R))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:F}=t;let{lowS:_,prehash:U,extraEntropy:H}=R;_==null&&(_=!0),$=ge("msgHash",$),Ci(R),U&&($=ge("prehashed msgHash",I($)));const Z=A($),J=l(S),W=[k(J),k(Z)];if(H!=null&&H!==!1){const Oe=H===!0?F(n.BYTES):H;W.push(ge("extraEntropy",Oe))}const X=dr(...W),Ie=Z;function nt(Oe){const Le=C(Oe);if(!p(Le))return;const nn=u(Le),ht=d.BASE.multiply(Le).toAffine(),ze=c(ht.x);if(ze===Ve)return;const _e=c(nn*c(Ie+ze*J));if(_e===Ve)return;let rt=(ht.x===ze?0:2)|Number(ht.y&Q),je=_e;return _&&h(_e)&&(je=m(_e),rt^=1),new y(ze,je,rt)}return{seed:X,k2sig:nt}}const B={lowS:t.lowS,prehash:!1},M={lowS:t.lowS,prehash:!1};function N($,S,R=B){const{seed:I,k2sig:F}=O($,S,R),_=t;return B0(_.hash.outputLen,_.nByteLength,_.hmac)(I,F)}d.BASE._setWindowSize(8);function j($,S,R,I=M){var rt;const F=$;S=ge("msgHash",S),R=ge("publicKey",R);const{lowS:_,prehash:U,format:H}=I;if(Ci(I),"strict"in I)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const Z=typeof F=="string"||Wn(F),J=!Z&&!H&&typeof F=="object"&&F!==null&&typeof F.r=="bigint"&&typeof F.s=="bigint";if(!Z&&!J)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,X;try{if(J&&(W=new y(F.r,F.s)),Z){try{H!=="compact"&&(W=y.fromDER(F))}catch(je){if(!(je instanceof qe.Err))throw je}!W&&H!=="der"&&(W=y.fromCompact(F))}X=d.fromHex(R)}catch{return!1}if(!W||_&&W.hasHighS())return!1;U&&(S=t.hash(S));const{r:Ie,s:nt}=W,Oe=A(S),Le=u(nt),nn=c(Oe*Le),ht=c(Ie*Le),ze=(rt=d.BASE.multiplyAndAddUnsafe(X,nn,ht))==null?void 0:rt.toAffine();return ze?c(ze.x)===Ie:!1}return{CURVE:t,getPublicKey:g,getSharedSecret:x,sign:N,verify:j,ProjectivePoint:d,Signature:y,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gh(e){return{hash:e,hmac:(t,...n)=>Uc(e,t,Gd(...n)),randomBytes:Hd}}function wh(e,t){const n=r=>bh({...e,...gh(r)});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ii=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),vh=BigInt(0),xh=BigInt(1),Fs=BigInt(2),Si=(e,t)=>(e+t/Fs)/t;function Eh(e){const t=Qc,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,l=be(d,n,t)*d%t,f=be(l,n,t)*d%t,p=be(f,Fs,t)*u%t,h=be(p,s,t)*p%t,m=be(h,o,t)*h%t,w=be(m,a,t)*m%t,y=be(w,c,t)*w%t,v=be(y,a,t)*m%t,g=be(v,n,t)*d%t,b=be(g,i,t)*h%t,x=be(b,r,t)*u%t,C=be(x,Fs,t);if(!Os.eql(Os.sqr(C),e))throw new Error("Cannot find square root");return C}const Os=Co(Qc,void 0,void 0,{sqrt:Eh}),eu=wh({a:vh,b:BigInt(7),Fp:Os,n:Ii,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ii,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-xh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),a=Si(o*e,t),c=Si(-r*e,t);let u=ie(e-a*n-c*s,t),d=ie(-a*r-c*o,t);const l=u>i,f=d>i;if(l&&(u=t-u),f&&(d=t-d),u>i||d>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:f,k2:d}}}},La),Th=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:eu},Symbol.toStringTag,{value:"Module"}));function tu(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new ns({signature:e});if(typeof e.s>"u")throw new ns({signature:e});if(n&&typeof e.yParity>"u")throw new ns({signature:e});if(e.r<0n||e.r>vi)throw new Bh({value:e.r});if(e.s<0n||e.s>vi)throw new kh({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new So({value:e.yParity})}function Ph(e){return nu(Pe(e))}function nu(e){if(e.length!==130&&e.length!==132)throw new $h({signature:e});const t=BigInt(Me(e,0,32)),n=BigInt(Me(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return Io(s)}catch{throw new So({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function Ah(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return Ch(e)}function Ch(e){const t=typeof e=="string"?nu(e):e instanceof Uint8Array?Ph(e):typeof e.r=="string"?Sh(e):e.v?Ih(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return tu(t),t}function Ih(e){return{r:e.r,s:e.s,yParity:Io(e.v)}}function Sh(e){const t=(()=>{const n=e.v?Number(e.v):void 0;let r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=Io(n)),typeof r!="number")throw new So({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Io(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Nh({value:e})}class $h extends D{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${pe(tf(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class ns extends D{constructor({signature:t}){super(`Signature \`${Za(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class Bh extends D{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class kh extends D{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class So extends D{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Nh extends D{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function Mh(e,t={}){return typeof e.chainId=="string"?Rh(e):{...e,...t.signature}}function Rh(e){const{address:t,chainId:n,nonce:r}=e,s=Ah(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...s}}const Fh="0x8010801080108010801080108010801080108010801080108010801080108010",Oh=Lc("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function ru(e){if(typeof e=="string"){if(Me(e,-32)!==Fh)throw new _h(e)}else tu(e.authorization)}function Lh(e){ru(e);const t=Qa(Me(e,-64,-32)),n=Me(e,-t-64,-64),r=Me(e,0,-t-64),[s,o,i]=Jp(Oh,n);return{authorization:Mh({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...i&&i!=="0x"?{data:i,to:o}:{}}}function zh(e){try{return ru(e),!0}catch{return!1}}let _h=class extends D{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};class jh extends T{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function $o(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new jh({value:e});let[n,r="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[o,i,a]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],c=Math.round(+`${i}.${a}`);c>9?r=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):r=`${o}${c}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}function Uh(e,t="wei"){return $o(e,va[t])}function Dh(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function Gh(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?Ee(e.nonce):void 0,storageProof:e.storageProof?Dh(e.storageProof):void 0}}async function Hh(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",i=n!==void 0?z(n):void 0,a=await e.request({method:"eth_getProof",params:[t,s,i||o]});return Gh(a)}async function qh(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?z(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function Bo(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){var d,l,f;const i=r||"latest",a=n!==void 0?z(n):void 0;let c=null;if(s?c=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,z(o)]},{dedupe:!0}):c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||i,z(o)]},{dedupe:!!a}),!c)throw new Ea({blockHash:t,blockNumber:n,blockTag:i,hash:s,index:o});return(((f=(l=(d=e.chain)==null?void 0:d.formatters)==null?void 0:l.transaction)==null?void 0:f.format)||Na)(c,"getTransaction")}async function Vh(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([L(e,Yn,"getBlockNumber")({}),t?L(e,Bo,"getTransaction")({hash:t}):void 0]),o=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return o?r-o+1n:0n}async function or(e,{hash:t}){var s,o,i;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new Ta({hash:t});return(((i=(o=(s=e.chain)==null?void 0:s.formatters)==null?void 0:o.transactionReceipt)==null?void 0:i.format)||fc)(n,"getTransactionReceipt")}async function Wh(e,t){var v;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:o,blockOverrides:i,blockTag:a,stateOverride:c}=t,u=t.contracts,{batchSize:d=t.batchSize??1024,deployless:l=t.deployless??!1}=typeof((v=e.batch)==null?void 0:v.multicall)=="object"?e.batch.multicall:{},f=(()=>{if(t.multicallAddress)return t.multicallAddress;if(l)return null;if(e.chain)return en({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),p=[[]];let h=0,m=0;for(let g=0;g<u.length;g++){const{abi:b,address:x,args:C,functionName:A}=u[g];try{const P=he({abi:b,args:C,functionName:A});m+=(P.length-2)/2,d>0&&m>d&&p[h].length>0&&(h++,m=(P.length-2)/2,p[h]=[]),p[h]=[...p[h],{allowFailure:!0,callData:P,target:x}]}catch(P){const k=Tt(P,{abi:b,address:x,args:C,docsPath:"/docs/contract/multicall",functionName:A,sender:n});if(!s)throw k;p[h]=[...p[h],{allowFailure:!0,callData:"0x",target:x}]}}const w=await Promise.allSettled(p.map(g=>L(e,Ae,"readContract")({...f===null?{code:fo}:{address:f},abi:lr,account:n,args:[g],authorizationList:r,blockNumber:o,blockOverrides:i,blockTag:a,functionName:"aggregate3",stateOverride:c}))),y=[];for(let g=0;g<w.length;g++){const b=w[g];if(b.status==="rejected"){if(!s)throw b.reason;for(let C=0;C<p[g].length;C++)y.push({status:"failure",error:b.reason,result:void 0});continue}const x=b.value;for(let C=0;C<x.length;C++){const{returnData:A,success:P}=x[C],{callData:k}=p[g][C],{abi:O,address:B,functionName:M,args:N}=u[y.length];try{if(k==="0x")throw new On;if(!P)throw new vr({data:A});const j=kt({abi:O,args:N,data:A,functionName:M});y.push(s?{result:j,status:"success"}:j)}catch(j){const $=Tt(j,{abi:O,address:B,args:N,docsPath:"/docs/contract/multicall",functionName:M});if(!s)throw $;y.push({error:$,result:void 0,status:"failure"})}}}if(y.length!==u.length)throw new T("multicall results mismatch");return y}async function Ls(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:s,returnFullTransactions:o,traceTransfers:i,validation:a}=t;try{const c=[];for(const f of s){const p=f.blockOverrides?nc(f.blockOverrides):void 0,h=f.calls.map(w=>{const y=w,v=y.account?V(y.account):void 0,g=y.abi?he(y):y.data,b={...y,data:y.dataSuffix?ve([g||"0x",y.dataSuffix]):g,from:y.from??(v==null?void 0:v.address)};return dt(b),$t(b)}),m=f.stateOverrides?Ks(f.stateOverrides):void 0;c.push({blockOverrides:p,calls:h,stateOverrides:m})}const d=(typeof n=="bigint"?z(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:o,traceTransfers:i,validation:a},d]})).map((f,p)=>({...Ma(f),calls:f.calls.map((h,m)=>{var O,B;const{abi:w,args:y,functionName:v,to:g}=s[p].calls[m],b=((O=h.error)==null?void 0:O.data)??h.returnData,x=BigInt(h.gasUsed),C=(B=h.logs)==null?void 0:B.map(M=>Ke(M)),A=h.status==="0x1"?"success":"failure",P=w&&A==="success"&&b!=="0x"?kt({abi:w,data:b,functionName:v}):null,k=(()=>{var N;if(A==="success")return;let M;if(((N=h.error)==null?void 0:N.data)==="0x"?M=new On:h.error&&(M=new vr(h.error)),!!M)return Tt(M,{abi:w??[],address:g??"0x",args:y,functionName:v??"<unknown>"})})();return{data:b,gasUsed:x,logs:C,status:A,...A==="success"?{result:P}:{error:k}}})}))}catch(c){const u=c,d=Er(u,{});throw d instanceof Gn?u:d}}function zs(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){o=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!o)throw new D("Unable to normalize signature.");return s}function _s(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Bs(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>_s(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>_s(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function su(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return su(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Bs(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?Bs(n[r],{strict:!1}):!1)return i}}function ou(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?Fo(e):e;return{...r,...n?{hash:Lt(r)}:{}}}function Mr(e,t,n){const{args:r=[],prepare:s=!0}=n??{},o=nf(t,{strict:!1}),i=e.filter(u=>o?u.type==="function"||u.type==="error"?iu(u)===Me(t,0,4):u.type==="event"?Lt(u)===t:!1:"name"in u&&u.name===t);if(i.length===0)throw new pr({name:t});if(i.length===1)return{...i[0],...s?{hash:Lt(i[0])}:{}};let a;for(const u of i){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Lt(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((l,f)=>{const p="inputs"in u&&u.inputs[f];return p?_s(l,p):!1})){if(a&&"inputs"in a&&a.inputs){const l=su(u.inputs,a.inputs,r);if(l)throw new Jh({abiItem:u,type:l[0]},{abiItem:a,type:l[1]})}a=u}}const c=(()=>{if(a)return a;const[u,...d]=i;return{...u,overloads:d}})();if(!c)throw new pr({name:t});return{...c,...s?{hash:Lt(c)}:{}}}function iu(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return Mr(n,r)}return e[0]})();return Me(Lt(t),0,4)}function Zh(...e){const t=(()=>{if(Array.isArray(e[0])){const[r,s]=e;return Mr(r,s)}return e[0]})(),n=typeof t=="string"?t:ir(t);return zs(n)}function Lt(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return Mr(n,r)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:Rc(lo(Zh(t)))}class Jh extends D{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${zs(ir(t.abiItem))}\`, and`,`\`${n.type}\` in \`${zs(ir(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class pr extends D{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function Yh(...e){var o;const[t,n]=(()=>{if(Array.isArray(e[0])){const[i,a]=e;return[Xh(i),a]}return e})(),{bytecode:r,args:s}=n;return Te(r,(o=t.inputs)!=null&&o.length&&(s!=null&&s.length)?Po(t.inputs,s):"0x")}function Kh(e){return ou(e)}function Xh(e){const t=e.find(n=>n.type==="constructor");if(!t)throw new pr({name:"constructor"});return t}function Qh(...e){const[t,n=[]]=(()=>{if(Array.isArray(e[0])){const[u,d,l]=e;return[$i(u,d,{args:l}),l]}const[a,c]=e;return[a,c]})(),{overloads:r}=t,s=r?$i([t,...r],t.name,{args:n}):t,o=em(s),i=n.length>0?Po(s.inputs,n):void 0;return i?Te(o,i):o}function Mt(e,t={}){return ou(e,t)}function $i(e,t,n){const r=Mr(e,t,n);if(r.type!=="function")throw new pr({name:t,type:"function"});return r}function em(e){return iu(e)}const tm="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",$e="0x0000000000000000000000000000000000000000",nm="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function rm(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:i,traceTransfers:a,validation:c}=t,u=t.account?V(t.account):void 0;if(i&&!u)throw new T("`account` is required when `traceAssetChanges` is true");const d=u?Yh(Kh("constructor(bytes, bytes)"),{bytecode:ic,args:[nm,Qh(Mt("function getBalance(address)"),[u.address])]}):void 0,l=i?await Promise.all(t.calls.map(async I=>{if(!I.data&&!I.abi)return;const{accessList:F}=await Pc(e,{account:u.address,...I,data:I.abi?he(I):I.data});return F.map(({address:_,storageKeys:U})=>U.length>0?_:null)})).then(I=>I.flat().filter(Boolean)):[],f=await Ls(e,{blockNumber:n,blockTag:r,blocks:[...i?[{calls:[{data:d}],stateOverrides:o},{calls:l.map((I,F)=>({abi:[Mt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:I,from:$e,nonce:F})),stateOverrides:[{address:$e,nonce:0}]}]:[],{calls:[...s,{}].map(I=>({...I,from:u==null?void 0:u.address})),stateOverrides:o},...i?[{calls:[{data:d}]},{calls:l.map((I,F)=>({abi:[Mt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:I,from:$e,nonce:F})),stateOverrides:[{address:$e,nonce:0}]},{calls:l.map((I,F)=>({to:I,abi:[Mt("function decimals() returns (uint256)")],functionName:"decimals",from:$e,nonce:F})),stateOverrides:[{address:$e,nonce:0}]},{calls:l.map((I,F)=>({to:I,abi:[Mt("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:$e,nonce:F})),stateOverrides:[{address:$e,nonce:0}]},{calls:l.map((I,F)=>({to:I,abi:[Mt("function symbol() returns (string)")],functionName:"symbol",from:$e,nonce:F})),stateOverrides:[{address:$e,nonce:0}]}]:[]],traceTransfers:a,validation:c}),p=i?f[2]:f[0],[h,m,,w,y,v,g,b]=i?f:[],{calls:x,...C}=p,A=x.slice(0,-1)??[],P=(h==null?void 0:h.calls)??[],k=(m==null?void 0:m.calls)??[],O=[...P,...k].map(I=>I.status==="success"?fe(I.data):null),B=(w==null?void 0:w.calls)??[],M=(y==null?void 0:y.calls)??[],N=[...B,...M].map(I=>I.status==="success"?fe(I.data):null),j=((v==null?void 0:v.calls)??[]).map(I=>I.status==="success"?I.result:null),$=((b==null?void 0:b.calls)??[]).map(I=>I.status==="success"?I.result:null),S=((g==null?void 0:g.calls)??[]).map(I=>I.status==="success"?I.result:null),R=[];for(const[I,F]of N.entries()){const _=O[I];if(typeof F!="bigint"||typeof _!="bigint")continue;const U=j[I-1],H=$[I-1],Z=S[I-1],J=I===0?{address:tm,decimals:18,symbol:"ETH"}:{address:l[I-1],decimals:Z||U?Number(U??1):void 0,symbol:H??void 0};R.some(W=>W.token.address===J.address)||R.push({token:J,value:{pre:_,post:F,diff:F-_}})}return{assetChanges:R,block:C,results:A}}const au="0x6492649264926492649264926492649264926492649264926492649264926492";function sm(e){if(Me(e,-32)!==au)throw new am(e)}function om(e){const{data:t,signature:n,to:r}=e;return Te(Po(Lc("address, bytes, bytes"),[r,t,n]),au)}function im(e){try{return sm(e),!0}catch{return!1}}class am extends D{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function cm({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new eu.Signature(fe(e),fe(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?i:Fe(i)}async function Rr(e,t){var a,c,u,d,l,f;const{address:n,hash:r,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??((u=(c=(a=e.chain)==null?void 0:a.contracts)==null?void 0:c.erc6492Verifier)==null?void 0:u.address),multicallAddress:o=t.multicallAddress??((f=(l=(d=e.chain)==null?void 0:d.contracts)==null?void 0:l.multicall3)==null?void 0:f.address)}=t,i=(()=>{const p=t.signature;return Re(p)?p:typeof p=="object"&&"r"in p&&"s"in p?cm(p):K(p)})();try{return zh(i)?await um(e,{...t,multicallAddress:o,signature:i}):await dm(e,{...t,verifierAddress:s,signature:i})}catch(p){try{if(Vn(Gs(n),await Ia({hash:r,signature:i})))return!0}catch{}if(p instanceof Ct)return!1;throw p}}async function um(e,t){var w;const{address:n,blockNumber:r,blockTag:s,hash:o,multicallAddress:i}=t,{authorization:a,data:c,signature:u,to:d}=Lh(t.signature);if(await $s(e,{address:n,blockNumber:r,blockTag:s})===Qt(["0xef0100",a.address]))return await lm(e,{address:n,blockNumber:r,blockTag:s,hash:o,signature:u});const f={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:z(a.r,{size:32}),s:z(a.s,{size:32}),yParity:a.yParity};if(!await op({address:n,authorization:f}))throw new Ct;const h=await L(e,Ae,"readContract")({...i?{address:i}:{code:fo},authorizationList:[f],abi:lr,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:d??n,callData:c}]:[],{allowFailure:!0,target:n,callData:he({abi:oc,functionName:"isValidSignature",args:[o,u]})}]]}),m=(w=h[h.length-1])==null?void 0:w.returnData;if(m!=null&&m.startsWith("0x1626ba7e"))return!0;throw new Ct}async function dm(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:i,verifierAddress:a,...c}=t,u=await(async()=>!r&&!s||im(i)?i:om({data:s,signature:i,to:r}))(),d=a?{to:a,data:he({abi:hi,functionName:"isValidSig",args:[n,o,u]}),...c}:{data:Cr({abi:hi,args:[n,o,u],bytecode:df}),...c},{data:l}=await L(e,Ir,"call")(d).catch(f=>{throw f instanceof Pa?new Ct:f});if(Pd(l??"0x0"))return!0;throw new Ct}async function lm(e,t){const{address:n,blockNumber:r,blockTag:s,hash:o,signature:i}=t;if((await L(e,Ae,"readContract")({address:n,abi:oc,args:[o,i],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof Aa?new Ct:c})).startsWith("0x1626ba7e"))return!0;throw new Ct}class Ct extends Error{}async function fm(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...i}){const a=Ic(n);return Rr(e,{address:t,factory:r,factoryData:s,hash:a,signature:o,...i})}async function pm(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:i,primaryType:a,types:c,domain:u,...d}=t,l=wp({message:i,primaryType:a,types:c,domain:u});return Rr(e,{address:n,factory:r,factoryData:s,hash:l,signature:o,...d})}function cu(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:i=e.pollingInterval}){const a=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const l=Y(["watchBlockNumber",e.uid,t,n,i]);return Xe(l,{onBlockNumber:r,onError:s},f=>tn(async()=>{var p;try{const h=await L(e,Yn,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(h===c)return;if(h-c>1&&n)for(let m=c+1n;m<h;m++)f.onBlockNumber(m,c),c=m}(c===void 0||h>c)&&(f.onBlockNumber(h,c),c=h)}catch(h){(p=f.onError)==null||p.call(f,h)}},{emitOnBegin:t,interval:i}))})():(()=>{const l=Y(["watchBlockNumber",e.uid,t,n]);return Xe(l,{onBlockNumber:r,onError:s},f=>{let p=!0,h=()=>p=!1;return(async()=>{try{const m=(()=>{if(e.transport.type==="fallback"){const y=e.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return y?y.value:e.transport}return e.transport})(),{unsubscribe:w}=await m.subscribe({params:["newHeads"],onData(y){var g;if(!p)return;const v=fe((g=y.result)==null?void 0:g.number);f.onBlockNumber(v,c),c=v},onError(y){var v;(v=f.onError)==null||v.call(f,y)}});h=w,p||h()}catch(m){s==null||s(m)}})(),()=>h()})})()}async function uu(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:o,retryCount:i=6,retryDelay:a=({count:x})=>~~(1<<x)*200,timeout:c=18e4}=t,u=Y(["waitForTransactionReceipt",e.uid,s]),d=(()=>{var x;return t.pollingInterval?t.pollingInterval:(x=e.chain)!=null&&x.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval})();let l,f,p,h=!1,m,w;const{promise:y,resolve:v,reject:g}=po(),b=c?setTimeout(()=>{w==null||w(),m==null||m(),g(new zl({hash:s}))},c):void 0;return m=Xe(u,{onReplaced:o,resolve:v,reject:g},async x=>{if(p=await L(e,or,"getTransactionReceipt")({hash:s}).catch(()=>{}),p&&r<=1){clearTimeout(b),x.resolve(p),m==null||m();return}w=L(e,cu,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:d,async onBlockNumber(C){const A=k=>{clearTimeout(b),w==null||w(),k(),m==null||m()};let P=C;if(!h)try{if(p){if(r>1&&(!p.blockNumber||P-p.blockNumber+1n<r))return;A(()=>x.resolve(p));return}if(n&&!l&&(h=!0,await fr(async()=>{l=await L(e,Bo,"getTransaction")({hash:s}),l.blockNumber&&(P=l.blockNumber)},{delay:a,retryCount:i}),h=!1),p=await L(e,or,"getTransactionReceipt")({hash:s}),r>1&&(!p.blockNumber||P-p.blockNumber+1n<r))return;A(()=>x.resolve(p))}catch(k){if(k instanceof Ea||k instanceof Ta){if(!l){h=!1;return}try{f=l,h=!0;const O=await fr(()=>L(e,Ne,"getBlock")({blockNumber:P,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:N})=>N instanceof Ba});h=!1;const B=O.transactions.find(({from:N,nonce:j})=>N===f.from&&j===f.nonce);if(!B||(p=await L(e,or,"getTransactionReceipt")({hash:B.hash}),r>1&&(!p.blockNumber||P-p.blockNumber+1n<r)))return;let M="replaced";B.to===f.to&&B.value===f.value&&B.input===f.input?M="repriced":B.from===B.to&&B.value===0n&&(M="cancelled"),A(()=>{var N;(N=x.onReplaced)==null||N.call(x,{reason:M,replacedTransaction:f,transaction:B,transactionReceipt:p}),x.resolve(p)})}catch(O){A(()=>x.reject(O))}}else A(()=>x.reject(k))}}})}),y}function hm(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){const u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),d=i??!1;let l;return u?(()=>{const h=Y(["watchBlocks",e.uid,t,n,r,d,c]);return Xe(h,{onBlock:s,onError:o},m=>tn(async()=>{var w;try{const y=await L(e,Ne,"getBlock")({blockTag:t,includeTransactions:d});if(y.number!==null&&(l==null?void 0:l.number)!=null){if(y.number===l.number)return;if(y.number-l.number>1&&n)for(let v=(l==null?void 0:l.number)+1n;v<y.number;v++){const g=await L(e,Ne,"getBlock")({blockNumber:v,includeTransactions:d});m.onBlock(g,l),l=g}}((l==null?void 0:l.number)==null||t==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>l.number)&&(m.onBlock(y,l),l=y)}catch(y){(w=m.onError)==null||w.call(m,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let h=!0,m=!0,w=()=>h=!1;return(async()=>{try{r&&L(e,Ne,"getBlock")({blockTag:t,includeTransactions:d}).then(g=>{h&&m&&(s(g,void 0),m=!1)}).catch(o);const y=(()=>{if(e.transport.type==="fallback"){const g=e.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return g?g.value:e.transport}return e.transport})(),{unsubscribe:v}=await y.subscribe({params:["newHeads"],async onData(g){var x;if(!h)return;const b=await L(e,Ne,"getBlock")({blockNumber:(x=g.result)==null?void 0:x.number,includeTransactions:d}).catch(()=>{});h&&(s(b,l),m=!1,l=b)},onError(g){o==null||o(g)}});w=v,h||w()}catch(y){o==null||o(y)}})(),()=>w()})()}function mm(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:i,onError:a,onLogs:c,poll:u,pollingInterval:d=e.pollingInterval,strict:l}){const f=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),p=l??!1;return f?(()=>{const w=Y(["watchEvent",t,n,r,e.uid,s,d,i]);return Xe(w,{onLogs:c,onError:a},y=>{let v;i!==void 0&&(v=i-1n);let g,b=!1;const x=tn(async()=>{var C;if(!b){try{g=await L(e,Ac,"createEventFilter")({address:t,args:n,event:s,events:o,strict:p,fromBlock:i})}catch{}b=!0;return}try{let A;if(g)A=await L(e,Sr,"getFilterChanges")({filter:g});else{const P=await L(e,Yn,"getBlockNumber")({});v&&v!==P?A=await L(e,io,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:v+1n,toBlock:P}):A=[],v=P}if(A.length===0)return;if(r)y.onLogs(A);else for(const P of A)y.onLogs([P])}catch(A){g&&A instanceof Et&&(b=!1),(C=y.onError)==null||C.call(y,A)}},{emitOnBegin:!0,interval:d});return async()=>{g&&await L(e,$r,"uninstallFilter")({filter:g}),x()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const v=(()=>{if(e.transport.type==="fallback"){const C=e.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return C?C.value:e.transport}return e.transport})(),g=o??(s?[s]:void 0);let b=[];g&&(b=[g.flatMap(A=>jn({abi:[A],eventName:A.name,args:n}))],s&&(b=b[0]));const{unsubscribe:x}=await v.subscribe({params:["logs",{address:t,topics:b}],onData(C){var P;if(!w)return;const A=C.result;try{const{eventName:k,args:O}=so({abi:g??[],data:A.data,topics:A.topics,strict:p}),B=Ke(A,{args:O,eventName:k});c([B])}catch(k){let O,B;if(k instanceof ln||k instanceof yr){if(l)return;O=k.abiItem.name,B=(P=k.abiItem.inputs)==null?void 0:P.some(N=>!("name"in N&&N.name))}const M=Ke(A,{args:B?[]:{},eventName:O});c([M])}},onError(C){a==null||a(C)}});y=x,w||y()}catch(v){a==null||a(v)}})(),()=>y()})()}function ym(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=Y(["watchPendingTransactions",e.uid,t,o]);return Xe(u,{onTransactions:r,onError:n},d=>{let l;const f=tn(async()=>{var p;try{if(!l)try{l=await L(e,Cc,"createPendingTransactionFilter")({});return}catch(m){throw f(),m}const h=await L(e,Sr,"getFilterChanges")({filter:l});if(h.length===0)return;if(t)d.onTransactions(h);else for(const m of h)d.onTransactions([m])}catch(h){(p=d.onError)==null||p.call(d,h)}},{emitOnBegin:!0,interval:o});return async()=>{l&&await L(e,$r,"uninstallFilter")({filter:l}),f()}})})():(()=>{let u=!0,d=()=>u=!1;return(async()=>{try{const{unsubscribe:l}=await e.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;const p=f.result;r([p])},onError(f){n==null||n(f)}});d=l,u||d()}catch(l){n==null||n(l)}})(),()=>d()})()}function bm(e){var l,f,p;const{scheme:t,statement:n,...r}=((l=e.match(gm))==null?void 0:l.groups)??{},{chainId:s,expirationTime:o,issuedAt:i,notBefore:a,requestId:c,...u}=((f=e.match(wm))==null?void 0:f.groups)??{},d=(p=e.split("Resources:")[1])==null?void 0:p.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...d?{resources:d}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const gm=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,wm=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function vm(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:i=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||!we(r.address,{strict:!1})||t&&!Vn(r.address,t))return!1}catch{return!1}return!0}async function xm(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:i,signature:a,time:c=new Date,...u}=t,d=bm(s);if(!d.address||!vm({address:n,domain:r,message:d,nonce:o,scheme:i,time:c}))return!1;const f=Ic(s);return Rr(e,{address:d.address,hash:f,signature:a,...u})}async function ko(e,{serializedTransaction:t,timeout:n}){var o,i,a;const r=await e.request({method:"eth_sendRawTransactionSync",params:n?[t,z(n)]:[t]},{retryCount:0});return(((a=(i=(o=e.chain)==null?void 0:o.formatters)==null?void 0:i.transactionReceipt)==null?void 0:a.format)||fc)(r)}function Em(e){return{call:t=>Ir(e,t),createAccessList:t=>Pc(e,t),createBlockFilter:()=>Jf(e),createContractEventFilter:t=>ya(e,t),createEventFilter:t=>Ac(e,t),createPendingTransactionFilter:()=>Cc(e),estimateContractGas:t=>A0(e,t),estimateGas:t=>ro(e,t),getBalance:t=>Yf(e,t),getBlobBaseFee:()=>Kf(e),getBlock:t=>Ne(e,t),getBlockNumber:t=>Yn(e,t),getBlockTransactionCount:t=>Xf(e,t),getBytecode:t=>$s(e,t),getChainId:()=>Bt(e),getCode:t=>$s(e,t),getContractEvents:t=>ja(e,t),getEip712Domain:t=>ep(e,t),getEnsAddress:t=>Mf(e,t),getEnsAvatar:t=>Vf(e,t),getEnsName:t=>Wf(e,t),getEnsResolver:t=>Zf(e,t),getEnsText:t=>Tc(e,t),getFeeHistory:t=>rp(e,t),estimateFeesPerGas:t=>u0(e,t),getFilterChanges:t=>Sr(e,t),getFilterLogs:t=>sp(e,t),getGasPrice:()=>Qs(e),getLogs:t=>io(e,t),getProof:t=>Hh(e,t),estimateMaxPriorityFeePerGas:t=>c0(e,t),getStorageAt:t=>qh(e,t),getTransaction:t=>Bo(e,t),getTransactionConfirmations:t=>Vh(e,t),getTransactionCount:t=>eo(e,t),getTransactionReceipt:t=>or(e,t),multicall:t=>Wh(e,t),prepareTransactionRequest:t=>qn(e,t),readContract:t=>Ae(e,t),sendRawTransaction:t=>yo(e,t),sendRawTransactionSync:t=>ko(e,t),simulate:t=>Ls(e,t),simulateBlocks:t=>Ls(e,t),simulateCalls:t=>rm(e,t),simulateContract:t=>bf(e,t),verifyHash:t=>Rr(e,t),verifyMessage:t=>fm(e,t),verifySiweMessage:t=>xm(e,t),verifyTypedData:t=>pm(e,t),uninstallFilter:t=>$r(e,t),waitForTransactionReceipt:t=>uu(e,t),watchBlocks:t=>hm(e,t),watchBlockNumber:t=>cu(e,t),watchContractEvent:t=>Pf(e,t),watchEvent:t=>mm(e,t),watchPendingTransactions:t=>ym(e,t)}}function Tm(e){const{key:t="public",name:n="Public Client"}=e;return wc({...e,key:t,name:n,type:"publicClient"}).extend(Em)}async function Pm(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:o,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:z(n),chainName:r,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:i?Object.values(i).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Am(e,t){const{abi:n,args:r,bytecode:s,...o}=t,i=Cr({abi:n,args:r,bytecode:s});return Br(e,{...o,...o.authorizationList?{to:null}:{},data:i})}async function Cm(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(r=>zn(r))}async function Im(e,t={}){const{account:n=e.account,chainId:r}=t,s=n?V(n):void 0,o=r?[s==null?void 0:s.address,[z(r)]]:[s==null?void 0:s.address],i=await e.request({method:"wallet_getCapabilities",params:o}),a={};for(const[c,u]of Object.entries(i)){a[Number(c)]={};for(let[d,l]of Object.entries(u))d==="addSubAccount"&&(d="unstable_addSubAccount"),a[Number(c)][d]=l}return typeof r=="number"?a[r]:a}async function Sm(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function du(e,t){var c;const{account:n=e.account,chainId:r,nonce:s}=t;if(!n)throw new lt({docsPath:"/docs/eip7702/prepareAuthorization"});const o=V(n),i=(()=>{if(t.executor)return t.executor==="self"?t.executor:V(t.executor)})(),a={address:t.contractAddress??t.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=e.chain)==null?void 0:c.id)??await L(e,Bt,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await L(e,eo,"getTransactionCount")({address:o.address,blockTag:"pending"}),(i==="self"||i!=null&&i.address&&Vn(i.address,o.address))&&(a.nonce+=1)),a}async function $m(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Gs(n))}async function Bm(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function km(e,t){const{chain:n=e.chain}=t,r=t.timeout??Math.max(((n==null?void 0:n.blockTime)??0)*3,5e3),s=await mc(e,t);return await bc(e,{...t,id:s.id,timeout:r})}const rs=new Ln(128);async function lu(e,t){var b,x,C,A;const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:o,blobs:i,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:p,pollingInterval:h,type:m,value:w,...y}=t,v=t.timeout??Math.max(((r==null?void 0:r.blockTime)??0)*3,5e3);if(typeof n>"u")throw new lt({docsPath:"/docs/actions/wallet/sendTransactionSync"});const g=n?V(n):null;try{dt(t);const P=await(async()=>{if(t.to)return t.to;if(t.to!==null&&o&&o.length>0)return await xr({authorization:o[0]}).catch(()=>{throw new T("`to` is required. Could not infer from `authorizationList`.")})})();if((g==null?void 0:g.type)==="json-rpc"||g===null){let k;r!==null&&(k=await L(e,Bt,"getChainId")({}),ho({currentChainId:k,chain:r}));const O=(C=(x=(b=e.chain)==null?void 0:b.formatters)==null?void 0:x.transactionRequest)==null?void 0:C.format,M=(O||$t)({...Hn(y,{format:O}),accessList:s,authorizationList:o,blobs:i,chainId:k,data:a,from:g==null?void 0:g.address,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:p,to:P,type:m,value:w},"sendTransaction"),N=rs.get(e.uid),j=N?"wallet_sendTransaction":"eth_sendTransaction",$=await(async()=>{try{return await e.request({method:j,params:[M]},{retryCount:0})}catch(S){if(N===!1)throw S;const R=S;if(R.name==="InvalidInputRpcError"||R.name==="InvalidParamsRpcError"||R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[M]},{retryCount:0}).then(I=>(rs.set(e.uid,!0),I)).catch(I=>{const F=I;throw F.name==="MethodNotFoundRpcError"||F.name==="MethodNotSupportedRpcError"?(rs.set(e.uid,!1),R):F});throw R}})();return L(e,uu,"waitForTransactionReceipt")({checkReplacement:!1,hash:$,pollingInterval:h,timeout:v})}if((g==null?void 0:g.type)==="local"){const k=await L(e,qn,"prepareTransactionRequest")({account:g,accessList:s,authorizationList:o,blobs:i,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:p,nonceManager:g.nonceManager,parameters:[...no,"sidecars"],type:m,value:w,...y,to:P}),O=(A=r==null?void 0:r.serializers)==null?void 0:A.transaction,B=await g.signTransaction(k,{serializer:O});return await L(e,ko,"sendRawTransactionSync")({serializedTransaction:B})}throw(g==null?void 0:g.type)==="smart"?new wt({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new wt({docsPath:"/docs/actions/wallet/sendTransactionSync",type:g==null?void 0:g.type})}catch(P){throw P instanceof wt?P:mo(P,{...t,account:g,chain:t.chain||void 0})}}async function Nm(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function Mm(e,t){const{account:n=e.account}=t;if(!n)throw new lt({docsPath:"/docs/eip7702/signAuthorization"});const r=V(n);if(!r.signAuthorization)throw new wt({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await du(e,t);return r.signAuthorization(s)}async function Rm(e,{account:t=e.account,message:n}){if(!t)throw new lt({docsPath:"/docs/actions/wallet/signMessage"});const r=V(t);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Gt(n):n.raw instanceof Uint8Array?Ye(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Fm(e,t){var u,d,l,f;const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new lt({docsPath:"/docs/actions/wallet/signTransaction"});const o=V(n);dt({account:o,...t});const i=await L(e,Bt,"getChainId")({});r!==null&&ho({currentChainId:i,chain:r});const a=(r==null?void 0:r.formatters)||((u=e.chain)==null?void 0:u.formatters),c=((d=a==null?void 0:a.transactionRequest)==null?void 0:d.format)||$t;return o.signTransaction?o.signTransaction({...s,chainId:i},{serializer:(f=(l=e.chain)==null?void 0:l.serializers)==null?void 0:f.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(s,"signTransaction"),chainId:z(i),from:o.address}]},{retryCount:0})}async function Om(e,t){const{account:n=e.account,domain:r,message:s,primaryType:o}=t;if(!n)throw new lt({docsPath:"/docs/actions/wallet/signTypedData"});const i=V(n),a={EIP712Domain:$c({domain:r}),...t.types};if(Sc({domain:r,message:s,primaryType:o,types:a}),i.signTypedData)return i.signTypedData({domain:r,message:s,primaryType:o,types:a});const c=bp({domain:r,message:s,primaryType:o,types:a});return e.request({method:"eth_signTypedData_v4",params:[i.address,c]},{retryCount:0})}async function Lm(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:z(t)}]},{retryCount:0})}async function zm(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function _m(e,t){return Rn.internal(e,lu,"sendTransactionSync",t)}function jm(e){return{addChain:t=>Pm(e,t),deployContract:t=>Am(e,t),getAddresses:()=>Cm(e),getCallsStatus:t=>yc(e,t),getCapabilities:t=>Im(e,t),getChainId:()=>Bt(e),getPermissions:()=>Sm(e),prepareAuthorization:t=>du(e,t),prepareTransactionRequest:t=>qn(e,t),requestAddresses:()=>$m(e),requestPermissions:t=>Bm(e,t),sendCalls:t=>mc(e,t),sendCallsSync:t=>km(e,t),sendRawTransaction:t=>yo(e,t),sendRawTransactionSync:t=>ko(e,t),sendTransaction:t=>Br(e,t),sendTransactionSync:t=>lu(e,t),showCallsStatus:t=>Nm(e,t),signAuthorization:t=>Mm(e,t),signMessage:t=>Rm(e,t),signTransaction:t=>Fm(e,t),signTypedData:t=>Om(e,t),switchChain:t=>Lm(e,t),waitForCallsStatus:t=>bc(e,t),watchAsset:t=>zm(e,t),writeContract:t=>Rn(e,t),writeContractSync:t=>_m(e,t)}}function Bi(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return wc({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(jm)}function fu({key:e,methods:t,name:n,request:r,retryCount:s=3,retryDelay:o=150,timeout:i,type:a},c){const u=gc();return{config:{key:e,methods:t,name:n,request:r,retryCount:s,retryDelay:o,timeout:i,type:a},request:ap(r,{methods:t,retryCount:s,retryDelay:o,uid:u}),value:c}}function ki(e,t={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:o}=t;return({retryCount:i})=>fu({key:n,methods:r,name:s,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:o,type:"custom"})}class Um extends T{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Dm(e,t={}){const{batch:n,fetchFn:r,fetchOptions:s,key:o="http",methods:i,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:d,raw:l}=t;return({chain:f,retryCount:p,timeout:h})=>{const{batchSize:m=1e3,wait:w=0}=typeof n=="object"?n:{},y=t.retryCount??p,v=h??t.timeout??1e4,g=f==null?void 0:f.rpcUrls.default.http[0];if(!g)throw new Um;const b=lp(g,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:u,timeout:v});return fu({key:o,methods:i,name:a,async request({method:x,params:C}){const A={method:x,params:C},{schedule:P}=uc({id:g,wait:w,shouldSplitBatch(M){return M.length>m},fn:M=>b.request({body:M}),sort:(M,N)=>M.id-N.id}),k=async M=>n?P(M):[await b.request({body:M})],[{error:O,result:B}]=await k(A);if(l)return{error:O,result:B};if(O)throw new Ys({body:A,error:O,url:g});return B},retryCount:y,retryDelay:d,timeout:v,type:"http"},{fetchOptions:s,url:g})}}let un=null,dn=null;async function Gm(){var n,r,s,o;if(typeof window>"u")throw new Error("Browser only");if(!window.ethereum)throw new Error("No injected provider (MetaMask required)");const e=Bi({transport:ki(window.ethereum),chain:ss});un=e;const[t]=await e.requestAddresses();dn=t;try{(r=(n=window.ethereum).on)==null||r.call(n,"accountsChanged",i=>{dn=i[0]??null,un=Bi({transport:ki(window.ethereum),chain:ss})}),(o=(s=window.ethereum).on)==null||o.call(s,"chainChanged",()=>{un=null,dn=null})}catch(i){console.error("Error setting up wallet listeners:",i)}return{client:e,address:t}}function tt(){return un}function ft(){return dn}function Hm(){un=null,dn=null}const pt=JSON.parse('[{"type":"constructor","inputs":[{"name":"_tourmentScoresAddress","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"checkTime","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"timeRemaining","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"checkTournamentStatus","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"canStart","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"getPayableTournamentData","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"t","type":"tuple","internalType":"struct Staking.payableTournament","components":[{"name":"NofPlayers","type":"uint256","internalType":"uint256"},{"name":"user_ids","type":"uint256[8]","internalType":"uint256[8]"},{"name":"min_stake","type":"uint256","internalType":"uint256"},{"name":"stake_goal","type":"uint256","internalType":"uint256"},{"name":"is_finished","type":"bool","internalType":"bool"},{"name":"has_started","type":"bool","internalType":"bool"},{"name":"is_reimbursed","type":"bool","internalType":"bool"},{"name":"created_at","type":"uint256","internalType":"uint256"}]}],"stateMutability":"view"},{"type":"function","name":"getUserbyId","inputs":[{"name":"user_id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"u","type":"tuple","internalType":"struct Staking.user","components":[{"name":"user_id","type":"uint256","internalType":"uint256"},{"name":"username","type":"string","internalType":"string"},{"name":"user_wallet","type":"address","internalType":"address"}]}],"stateMutability":"view"},{"type":"function","name":"hasAllPlayers","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"hasAll","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isGoalReached","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"isReached","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isTournamentFinished","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"isFinished","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"reimburseIfFailedStart","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"},{"name":"user_id","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"reimbursePlayer","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"},{"name":"user_id","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"saveResultsAndTransferToken","inputs":[{"name":"user_scores","type":"uint256[8]","internalType":"uint256[8]"},{"name":"user_ids","type":"uint256[8]","internalType":"uint256[8]"},{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"stake","inputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"},{"name":"_user_id","type":"uint256","internalType":"uint256"},{"name":"_username","type":"string","internalType":"string"},{"name":"_user_wallet","type":"address","internalType":"address"}],"outputs":[{"name":"currPlayerIdx","type":"uint256","internalType":"uint256"}],"stateMutability":"payable"},{"type":"function","name":"startPayableTournament","inputs":[{"name":"_NofPlayers","type":"uint256","internalType":"uint256"},{"name":"_user_id","type":"uint256","internalType":"uint256"},{"name":"_username","type":"string","internalType":"string"},{"name":"_user_wallet","type":"address","internalType":"address"},{"name":"_min_stake","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"stateMutability":"payable"},{"type":"function","name":"testReturn","inputs":[],"outputs":[{"name":"curr_tour","type":"uint256","internalType":"uint256"},{"name":"message","type":"string","internalType":"string"},{"name":"owner_addr","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"threshold","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"tournamentScoresContract","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"event","name":"StakeGoalReached","inputs":[{"name":"msg1","type":"string","indexed":false,"internalType":"string"},{"name":"id_tournament","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"msg2","type":"string","indexed":false,"internalType":"string"},{"name":"amount_staked","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"StakeSuccess","inputs":[{"name":"msg1","type":"string","indexed":false,"internalType":"string"},{"name":"id_tournament","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"msg2","type":"string","indexed":false,"internalType":"string"},{"name":"amount_staked","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"reimbursedStakes","inputs":[{"name":"msg","type":"string","indexed":false,"internalType":"string"}],"anonymous":false},{"type":"event","name":"restTransferToOwner","inputs":[{"name":"msg","type":"string","indexed":false,"internalType":"string"}],"anonymous":false},{"type":"event","name":"timeForStakePassed","inputs":[{"name":"msg","type":"string","indexed":false,"internalType":"string"}],"anonymous":false},{"type":"event","name":"tournamentCreated","inputs":[{"name":"msg1","type":"string","indexed":false,"internalType":"string"},{"name":"id_tournament","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"msg2","type":"string","indexed":false,"internalType":"string"},{"name":"amount_staked","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"tournamentStarted","inputs":[{"name":"msg","type":"string","indexed":false,"internalType":"string"},{"name":"tour_id","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"ReentrancyGuardReentrantCall","inputs":[]},{"type":"error","name":"indexOutOfBounds","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"passedIndex","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"insufficientAmount","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"amount","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"numberToHigh","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"NofPlayers","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"timePassed","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"tour_id","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"tournamentAlreadyFinished","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"tournament_id","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"tournamentInProgress","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"tournament_id","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"wrongUser","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"user_id","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"wrongUsersPassed","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"user_ids","type":"uint256[8]","internalType":"uint256[8]"}]}]'),Kn=JSON.parse('[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"approve","inputs":[{"name":"to","type":"address","internalType":"address"},{"name":"tokenId","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"balanceOf","inputs":[{"name":"owner","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"game_registry","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"game_id","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getApproved","inputs":[{"name":"tokenId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"getGameData","inputs":[{"name":"game_id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"g","type":"tuple","internalType":"struct TournamentScores.game","components":[{"name":"user_ids","type":"uint256[8]","internalType":"uint256[8]"},{"name":"user_wallets","type":"address[8]","internalType":"address[8]"},{"name":"user_scores","type":"uint256[8]","internalType":"uint256[8]"},{"name":"winner_ids","type":"uint256[8]","internalType":"uint256[8]"},{"name":"game_id","type":"uint256","internalType":"uint256"}]}],"stateMutability":"view"},{"type":"function","name":"getTournamentData","inputs":[{"name":"tournamentIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256[8]","internalType":"uint256[8]"},{"name":"","type":"uint256[8]","internalType":"uint256[8]"},{"name":"","type":"uint256[8]","internalType":"uint256[8]"},{"name":"","type":"string","internalType":"string"},{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getUserGames","inputs":[{"name":"userAddress","type":"address","internalType":"address"}],"outputs":[{"name":"gameIds","type":"uint256[]","internalType":"uint256[]"}],"stateMutability":"view"},{"type":"function","name":"isApprovedForAll","inputs":[{"name":"owner","type":"address","internalType":"address"},{"name":"operator","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"mint","inputs":[{"name":"gameId","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"name","inputs":[],"outputs":[{"name":"","type":"string","internalType":"string"}],"stateMutability":"view"},{"type":"function","name":"ownerOf","inputs":[{"name":"tokenId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"safeTransferFrom","inputs":[{"name":"from","type":"address","internalType":"address"},{"name":"to","type":"address","internalType":"address"},{"name":"tokenId","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"safeTransferFrom","inputs":[{"name":"from","type":"address","internalType":"address"},{"name":"to","type":"address","internalType":"address"},{"name":"tokenId","type":"uint256","internalType":"uint256"},{"name":"data","type":"bytes","internalType":"bytes"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"saveGameData","inputs":[{"name":"_user_ids","type":"uint256[8]","internalType":"uint256[8]"},{"name":"_user_wallets","type":"address[8]","internalType":"address[8]"},{"name":"_user_scores","type":"uint256[8]","internalType":"uint256[8]"}],"outputs":[{"name":"match_id","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"saveTournamentData","inputs":[{"name":"_NofPlayers","type":"uint256","internalType":"uint256"},{"name":"_user_ids","type":"uint256[8]","internalType":"uint256[8]"},{"name":"_user_scores","type":"uint256[8]","internalType":"uint256[8]"},{"name":"_winner_ids","type":"uint256[8]","internalType":"uint256[8]"},{"name":"_winner_names","type":"string","internalType":"string"},{"name":"_tournament_id","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setApprovalForAll","inputs":[{"name":"operator","type":"address","internalType":"address"},{"name":"approved","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"supportsInterface","inputs":[{"name":"interfaceId","type":"bytes4","internalType":"bytes4"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"symbol","inputs":[],"outputs":[{"name":"","type":"string","internalType":"string"}],"stateMutability":"view"},{"type":"function","name":"tokenURI","inputs":[{"name":"tokenId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"string","internalType":"string"}],"stateMutability":"view"},{"type":"function","name":"tournament_registry","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"winner_names","type":"string","internalType":"string"},{"name":"tournament_id","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"transferFrom","inputs":[{"name":"from","type":"address","internalType":"address"},{"name":"to","type":"address","internalType":"address"},{"name":"tokenId","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"Approval","inputs":[{"name":"owner","type":"address","indexed":true,"internalType":"address"},{"name":"approved","type":"address","indexed":true,"internalType":"address"},{"name":"tokenId","type":"uint256","indexed":true,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"ApprovalForAll","inputs":[{"name":"owner","type":"address","indexed":true,"internalType":"address"},{"name":"operator","type":"address","indexed":true,"internalType":"address"},{"name":"approved","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},{"type":"event","name":"BatchMetadataUpdate","inputs":[{"name":"_fromTokenId","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"_toTokenId","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"MetadataUpdate","inputs":[{"name":"_tokenId","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Transfer","inputs":[{"name":"from","type":"address","indexed":true,"internalType":"address"},{"name":"to","type":"address","indexed":true,"internalType":"address"},{"name":"tokenId","type":"uint256","indexed":true,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"gameDataSaved","inputs":[{"name":"msg","type":"string","indexed":false,"internalType":"string"},{"name":"match_id","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"tournamentDataSaved","inputs":[{"name":"msg","type":"string","indexed":false,"internalType":"string"},{"name":"tournament_id","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"ERC721IncorrectOwner","inputs":[{"name":"sender","type":"address","internalType":"address"},{"name":"tokenId","type":"uint256","internalType":"uint256"},{"name":"owner","type":"address","internalType":"address"}]},{"type":"error","name":"ERC721InsufficientApproval","inputs":[{"name":"operator","type":"address","internalType":"address"},{"name":"tokenId","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC721InvalidApprover","inputs":[{"name":"approver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC721InvalidOperator","inputs":[{"name":"operator","type":"address","internalType":"address"}]},{"type":"error","name":"ERC721InvalidOwner","inputs":[{"name":"owner","type":"address","internalType":"address"}]},{"type":"error","name":"ERC721InvalidReceiver","inputs":[{"name":"receiver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC721InvalidSender","inputs":[{"name":"sender","type":"address","internalType":"address"}]},{"type":"error","name":"ERC721NonexistentToken","inputs":[{"name":"tokenId","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"indexOutOfBounds","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"passedIndex","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"numberToHigh","inputs":[{"name":"msg","type":"string","internalType":"string"},{"name":"NofPlayers","type":"uint256","internalType":"uint256"}]}]'),Qe="0x9B156F400389cC4eCe359fcC2DD9f8897995E2e0",Xn="0x3D8d32Bf14848158837d4C54068E932D6a908f83",ye=Tm({chain:ss,transport:Dm()});async function qm(e){try{return await ye.readContract({address:Xn,abi:Kn,functionName:"getTournamentData",args:[BigInt(e)]})}catch(t){throw console.error("Error fetching tournament data:",t),t}}async function Vm(e){try{return await ye.readContract({address:Xn,abi:Kn,functionName:"getGameData",args:[BigInt(e)]})}catch(t){throw console.error("Error fetching game data:",t),t}}async function Wm(e){try{return await ye.readContract({address:Xn,abi:Kn,functionName:"getUserGames",args:[e]})}catch(t){throw console.error("Error fetching user games:",t),t}}async function Zm(e,t,n){const r=tt(),s=ft();if(!r||!s)throw new Error("Wallet not connected. Please connect MetaMask first.");try{const{request:o,result:i}=await ye.simulateContract({account:s,address:Xn,abi:Kn,functionName:"saveGameData",args:[e,t,n]});return await r.writeContract(o),i}catch(o){throw console.error("Error saving game data:",o),o}}async function Jm(e){const t=tt(),n=ft();if(!t||!n)throw new Error("Wallet not connected. Please connect MetaMask first.");try{const{request:r}=await ye.simulateContract({account:n,address:Xn,abi:Kn,functionName:"mint",args:[BigInt(e)],value:Uh("0.000006")});await t.writeContract(r)}catch(r){throw console.error("Error minting NFT:",r),r}}async function Ym(e){try{return await ye.readContract({address:Qe,abi:pt,functionName:"checkTime",args:[BigInt(e)]})}catch(t){throw console.error("Error checking time:",t),t}}async function Km(e){try{return await ye.readContract({address:Qe,abi:pt,functionName:"checkTournamentStatus",args:[BigInt(e)]})}catch(t){throw console.error("Error checking tournament status:",t),t}}async function Xm(){try{const e=await ye.readContract({address:Qe,abi:pt,functionName:"testReturn",args:[]});console.log("contract addr: ",Qe);const t=tt();return e}catch(e){throw console.error("Error in test return:",e),e}}async function Qm(e,t,n,r,s){const o=tt(),i=ft();if(!o||!i)throw new Error("Wallet not connected. Please connect MetaMask first.");try{const a=$o(s,18),{request:c,result:u}=await ye.simulateContract({account:i,address:Qe,abi:pt,functionName:"stake",args:[e,t,n,r],value:a});return await o.writeContract(c),u}catch(a){throw console.error("Error staking:",a),a}}async function e1(e,t,n,r,s){const o=tt(),i=ft();if(!o||!i)throw new Error("Wallet not connected. Please connect MetaMask first.");try{const a=$o(s,18),{request:c,result:u}=await ye.simulateContract({account:i,address:Qe,abi:pt,functionName:"startPayableTournament",args:[e,t,n,r,a],value:a});return await o.writeContract(c),u}catch(a){throw console.error("Error starting payable tournament:",a),a}}async function t1(e,t){const n=tt(),r=ft();if(!n||!r)throw new Error("Wallet not connected. Please connect MetaMask first.");try{const{request:s}=await ye.simulateContract({account:r,address:Qe,abi:pt,functionName:"reimbursePlayer",args:[e,t]});await n.writeContract(s)}catch(s){throw console.error("Error reimbursing player:",s),s}}async function n1(e,t){const n=tt(),r=ft();if(!n||!r)throw new Error("Wallet not connected. Please connect MetaMask first.");try{const{request:s}=await ye.simulateContract({account:r,address:Qe,abi:pt,functionName:"reimburseIfFailedStart",args:[e,t]});await n.writeContract(s)}catch(s){throw console.error("Error reimbursing failed start:",s),s}}async function r1(e,t,n){const r=tt(),s=ft();if(!r||!s)throw new Error("Wallet not connected. Please connect MetaMask first.");try{const{request:o}=await ye.simulateContract({account:s,address:Qe,abi:pt,functionName:"saveResultsAndTransferToken",args:[e,t,n]});await r.writeContract(o)}catch(o){throw console.error("Error saving results and transferring token:",o),o}}class s1{constructor(){this.walletState={isConnected:!1,address:null,chainId:null},this.listeners=new Set}async connect(){try{const{address:t}=await Gm();return this.walletState={isConnected:!0,address:t,chainId:43113},this.notifyListeners(),{address:t,success:!0}}catch(t){return console.error("Failed to connect wallet:",t),{address:"",success:!1,error:t.message||"Failed to connect wallet"}}}disconnect(){Hm(),this.walletState={isConnected:!1,address:null,chainId:null},this.notifyListeners()}getWalletState(){const t=ft(),n=tt();return t&&n&&(this.walletState={isConnected:!0,address:t,chainId:43113}),this.walletState}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notifyListeners(){this.listeners.forEach(t=>t(this.walletState))}async saveGame(t){try{if(!this.walletState.isConnected)throw new Error("Wallet not connected");const n=[...t.user_ids],r=[...t.user_wallets],s=[...t.user_scores];for(;n.length<8;)n.push(0);for(;r.length<8;)r.push("0x0000000000000000000000000000000000000000");for(;s.length<8;)s.push(0);return{success:!0,gameId:(await Zm(n,r,s)).toString()}}catch(n){return console.error("Failed to save game to blockchain:",n),{success:!1,error:n.message||"Failed to save game"}}}async getUserGames(t){try{const n=t||this.walletState.address;return n?await Wm(n):(console.warn("No wallet address provided"),[])}catch(n){return console.error("Failed to fetch user games:",n),[]}}async getGameData(t){try{return await Vm(t)}catch(n){return console.error("Failed to fetch game data:",n),null}}async mintGameNFT(t){try{if(!this.walletState.isConnected)throw new Error("Wallet not connected");return await Jm(t),{success:!0}}catch(n){return console.error("Failed to mint NFT:",n),{success:!1,error:n.message||"Failed to mint NFT"}}}formatAddress(t){return t?`${t.slice(0,6)}...${t.slice(-4)}`:""}isMetaMaskInstalled(){return typeof window<"u"&&typeof window.ethereum<"u"}async getTournamentData(t){try{return await qm(t)}catch(n){return console.error("Failed to get tournament data:",n),null}}async checkTime(t){try{return await Ym(t)}catch(n){return console.error("Failed to check time:",n),null}}async checkTournamentStatus(t){try{return await Km(t)}catch(n){return console.error("Failed to check tournament status:",n),null}}async testReturn(){try{return await Xm()}catch(t){return console.error("Failed to test return:",t),null}}async stake(t,n,r,s){try{if(!this.walletState.isConnected||!this.walletState.address)throw new Error("Wallet not connected");return await Qm(t,n,r,this.walletState.address,s),{success:!0}}catch(o){return console.error("Failed to stake:",o),{success:!1,error:o.message||"Failed to stake"}}}async startPayableTournament(t,n,r,s){try{if(!this.walletState.isConnected||!this.walletState.address)throw new Error("Wallet not connected");return{success:!0,tournamentId:(await e1(t,n,r,this.walletState.address,s)).toString()}}catch(o){return console.error("Failed to start tournament:",o),{success:!1,error:o.message||"Failed to start tournament"}}}async reimbursePlayer(t,n){try{if(!this.walletState.isConnected)throw new Error("Wallet not connected");return await t1(t,n),{success:!0}}catch(r){return console.error("Failed to reimburse player:",r),{success:!1,error:r.message||"Failed to reimburse player"}}}async reimburseIfFailedStart(t,n){try{if(!this.walletState.isConnected)throw new Error("Wallet not connected");return await n1(t,n),{success:!0}}catch(r){return console.error("Failed to reimburse failed start:",r),{success:!1,error:r.message||"Failed to reimburse failed start"}}}async saveResultsAndTransferToken(t,n,r){try{if(!this.walletState.isConnected)throw new Error("Wallet not connected");return await r1(t,n,r),{success:!0}}catch(s){return console.error("Failed to save results:",s),{success:!1,error:s.message||"Failed to save results"}}}}const it=new s1,He={primary:"#E67923",dark:"#2A2A2A",white:"#ffffff"};class o1{constructor(){this.isVisible=!1}async show(t){if(this.isVisible)return;this.isVisible=!0;let n=t;if(!n){const{user:r}=G.getState();if(r!=null&&r.id)try{const s=await oe.getStats(Number(r.id));if(s&&Array.isArray(s)&&s.length>0){const o=s[0];n={matchesPlayed:0,matchesWon:0,matchesLost:0,goalsScored:o.goal_scored||0,tournamentsWon:o.tournament_won||0,rank:0}}else throw new Error("No stats found")}catch(s){console.error("Errore nel caricamento delle statistiche:",s),n={matchesPlayed:0,matchesWon:0,matchesLost:0,goalsScored:0,tournamentsWon:0,rank:0}}}this.modalElement=this.createModal(n),document.body.appendChild(this.modalElement)}hide(){!this.isVisible||!this.modalElement||(this.isVisible=!1,document.body.removeChild(this.modalElement),this.modalElement=void 0)}createModal(t){const{user:n}=G.getState(),s=t||{matchesPlayed:0,matchesWon:0,matchesLost:0,goalsScored:0,tournamentsWon:0,rank:0},o=E("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:"background-color: rgba(0, 0, 0, 0.5);"}),i=E("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden flex flex-col p-8 relative",style:`background-color: ${He.dark};`}),a=te(`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>`,"absolute top-4 right-4 hover:opacity-70 transition-opacity focus:outline-none",()=>this.hide());a.style.color=He.primary;const c=E("h2",{className:"text-2xl font-bold mb-6 text-center",innerHTML:`Profilo: ${(n==null?void 0:n.username)||"Giocatore"}`,style:`color: ${He.primary};`}),u=E("div",{className:"flex flex-col items-center",style:`color: ${He.white};`}),d=E("div",{className:"w-full max-w-lg mb-8"}),l=E("table",{className:"w-full mb-4 border-separate border-spacing-10"}),f=E("tbody"),p=E("tr"),h=E("td",{className:"align-middle w-32"}),m=new gu(n==null?void 0:n.profileImage,Qn=>{});h.appendChild(m.getElement());const w=E("td",{className:"align-middle"}),y=E("div",{className:"space-y-5"}),v=E("div",{className:"text-sm text-left",innerHTML:`<span><strong>Mail:</strong> ${(n==null?void 0:n.mail)||"N/A"}</span>`}),g=E("div",{className:"text-sm text-left"}),b=E("div",{className:"flex items-center gap-2"}),x=E("span",{className:"text-sm font-medium",innerHTML:"<strong>Wallet:</strong>"}),C=it.getWalletState();if(C.isConnected&&C.address){this.walletAddressElement=E("span",{className:"text-xs font-mono bg-gray-700 px-2 py-1 rounded",innerHTML:it.formatAddress(C.address)});const Qn=te("â","text-red-400 hover:text-red-300 px-2 py-1 text-sm transition-colors focus:outline-none",async()=>{it.disconnect(),this.hide(),await this.show(t)}),No=te("ð My Games","text-white px-3 py-1 rounded text-sm hover:opacity-90 transition-opacity focus:outline-none ml-2",async()=>this.showUserGames(C.address));No.style.backgroundColor="#10B981",b.appendChild(x),b.appendChild(this.walletAddressElement),b.appendChild(Qn),b.appendChild(No)}else this.walletButtonElement=te(it.isMetaMaskInstalled()?"ð¦ Connect MetaMask":"â ï¸ Install MetaMask","text-white px-3 py-1 rounded text-sm hover:opacity-90 transition-opacity focus:outline-none",async()=>this.handleWalletConnect()),this.walletButtonElement.style.backgroundColor=it.isMetaMaskInstalled()?He.primary:"#6B7280",b.appendChild(x),b.appendChild(this.walletButtonElement);g.appendChild(b),y.appendChild(v),y.appendChild(g),w.appendChild(y),p.appendChild(h),p.appendChild(w),f.appendChild(p),l.appendChild(f),d.appendChild(l);const A=E("div",{className:"w-full max-w-lg mb-8"}),P=E("div",{className:"grid grid-cols-3 gap-6 mb-8"}),k=E("div",{className:"text-center"});k.innerHTML=`
      <div class="text-2xl font-bold" style="color: ${He.primary};">#${s.rank||1}</div>
      <div class="text-sm">Posizione</div>
    `;const O=E("div",{className:"text-center"}),B=(s.matchesWon/Math.max(s.matchesPlayed,1)*100).toFixed(1);O.innerHTML=`
      <div class="text-2xl font-bold text-green-400">${B}%</div>
      <div class="text-sm">Win Rate</div>
    `;const M=E("div",{className:"text-center"});M.innerHTML=`
      <div class="text-2xl font-bold" style="color: ${He.primary};">${s.tournamentsWon}</div>
      <div class="text-sm">Tornei</div>
    `,P.appendChild(k),P.appendChild(O),P.appendChild(M),A.appendChild(P);const N=E("div",{className:"grid grid-cols-4 gap-6 mb-8"}),j=E("div",{className:"text-center p-4 rounded",style:"background-color: rgba(34, 197, 94, 0.1);"}),$=(s.goalsScored/Math.max(s.matchesPlayed,1)).toFixed(1);j.innerHTML=`
      <div class="text-sm text-green-400 mb-2">ð¯ Goal Fatti</div>
      <div class="text-3xl font-bold mb-1">${s.goalsScored}</div>
      <div class="text-xs">Media: ${$} per partita</div>
    `;const S=E("div",{className:"text-center p-4 rounded",style:"background-color: rgba(239, 68, 68, 0.1);"}),R=Math.floor(s.goalsScored*.7),I=(R/Math.max(s.matchesPlayed,1)).toFixed(1);S.innerHTML=`
      <div class="text-sm text-red-400 mb-2">ð¥ Goal Ricevuti</div>
      <div class="text-3xl font-bold mb-1">${R}</div>
      <div class="text-xs">Media: ${I} per partita</div>
    `;const F=E("div",{className:"text-center p-4 rounded",style:"background-color: rgba(59, 130, 246, 0.1);"});F.innerHTML=`
      <div class="text-sm text-blue-400 mb-2">ð® Partite Totali</div>
      <div class="text-3xl font-bold mb-1">${s.matchesPlayed}</div>
      <div class="text-xs">Esperienza di gioco</div>
    `;const _=E("div",{className:"text-center p-4 rounded",style:"background-color: rgba(251, 191, 36, 0.1);"});_.innerHTML=`
      <div class="text-sm text-yellow-400 mb-2">ð Tornei Vinti</div>
      <div class="text-3xl font-bold mb-1">${s.tournamentsWon}</div>
      <div class="text-xs">Campione</div>
    `,N.appendChild(j),N.appendChild(S),N.appendChild(F),N.appendChild(_);const U=E("div",{className:"w-full max-w-lg"}),H=E("h3",{className:"text-lg font-bold mb-6",innerHTML:"Risultati Partite",style:`color: ${He.primary};`}),Z=E("div",{className:"space-y-6"}),J=E("div",{className:"flex justify-between items-center py-4"}),W=(s.matchesWon/Math.max(s.matchesPlayed,1)*100).toFixed(1);J.innerHTML=`
      <span class="text-sm">ð Partite Vinte</span>
      <div class="flex items-center justify-end flex-1 ml-4">
        <span class="text-2xl font-bold text-green-400 mr-3">${s.matchesWon}</span>
        <span class="text-sm">${W}% win rate</span>
      </div>
    `;const X=E("div",{className:"flex justify-between items-center py-4"}),Ie=(s.matchesLost/Math.max(s.matchesPlayed,1)*100).toFixed(1);X.innerHTML=`
      <span class="text-sm">ð Partite Perse</span>
      <div class="flex items-center justify-end flex-1 ml-4">
        <span class="text-2xl font-bold text-red-400 mr-3">${s.matchesLost}</span>
        <span class="text-sm">${Ie}% loss rate</span>
      </div>
    `,Z.appendChild(J),Z.appendChild(X);const nt=E("div",{className:"mt-8"}),Oe=E("h4",{className:"text-md font-bold mb-4",innerHTML:"Analisi Goal",style:`color: ${He.primary};`}),Le=E("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-4"}),nn=s.goalsScored+R,ht=Math.min(s.goalsScored/Math.max(nn,1)*100,100),ze=E("div",{className:"bg-green-400 h-3 rounded-full",style:`width: ${ht}%;`});Le.appendChild(ze);const _e=E("div",{className:"flex justify-between text-sm"}),rt=E("div",{className:"text-center"});rt.innerHTML=`
      <div class="text-2xl font-bold text-green-400">${s.goalsScored}</div>
      <div class="text-sm">Segnati</div>
    `;const je=E("div",{className:"text-center"});return je.innerHTML=`
      <div class="text-2xl font-bold text-red-400">${R}</div>
      <div class="text-sm">Subiti</div>
    `,_e.appendChild(rt),_e.appendChild(je),nt.appendChild(Oe),nt.appendChild(Le),nt.appendChild(_e),U.appendChild(H),U.appendChild(Z),U.appendChild(nt),u.appendChild(d),u.appendChild(A),u.appendChild(N),u.appendChild(U),i.appendChild(a),i.appendChild(c),i.appendChild(u),o.appendChild(i),o.addEventListener("click",Qn=>{Qn.target===o&&this.hide()}),o}async handleWalletConnect(){if(!it.isMetaMaskInstalled()){alert(`Please install MetaMask to use blockchain features!
Visit: https://metamask.io`);return}const t=await it.connect();t.success?(this.hide(),await this.show()):alert(`Failed to connect wallet: ${t.error||"Unknown error"}`)}async showUserGames(t){try{const n=await it.getUserGames(t);if(n.length===0){alert("No games found for this wallet address");return}let r=`Your Games (${n.length} total):

`;n.slice(0,10).forEach((s,o)=>{r+=`Game #${s}
`}),n.length>10&&(r+=`
...and ${n.length-10} more`),alert(r)}catch(n){console.error("Error fetching games:",n),alert("Failed to fetch games from blockchain")}}destroy(){this.unsubscribeWallet&&this.unsubscribeWallet(),this.hide()}}const Be={primary:"#E67923",dark:"#2A2A2A",white:"#ffffff"};class i1{constructor(){this.isVisible=!1,this.selectedFriend=null,this.newMessage="",this.friendIdInput="",this.friends=[],this.messages={1:[{id:1,sender:"alice",content:"Ciao! Come va?",timestamp:new Date(Date.now()-3e5)},{id:2,sender:"Tu",content:"Tutto bene, grazie! Tu?",timestamp:new Date(Date.now()-24e4)},{id:3,sender:"alice",content:"Perfetto! Hai voglia di fare una partita?",timestamp:new Date(Date.now()-18e4)}],2:[{id:4,sender:"bob",content:"Hey, sei disponibile per giocare?",timestamp:new Date(Date.now()-6e5)}],3:[{id:5,sender:"charlie",content:"Ottima partita!",timestamp:new Date(Date.now()-12e4)},{id:6,sender:"Tu",content:"Grazie, anche tu hai giocato benissimo!",timestamp:new Date(Date.now()-6e4)}]}}async show(){if(this.isVisible)return;this.isVisible=!0;const{user:t}=G.getState();if(t!=null&&t.id)try{this.friends=await oe.getFriends(Number(t.id))}catch(n){console.error("Errore nel caricamento degli amici:",n),this.friends=[]}this.modalElement=this.createModal(),document.body.appendChild(this.modalElement)}hide(){!this.isVisible||!this.modalElement||(this.isVisible=!1,document.body.removeChild(this.modalElement),this.modalElement=void 0,this.selectedFriend=null,this.newMessage="")}createModal(){const{user:t}=G.getState(),n=E("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:"background-color: rgba(0, 0, 0, 0.5);"}),r=E("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl mx-4 overflow-hidden flex flex-col p-8 relative h-3/4",style:`background-color: ${Be.dark};`}),s=te(`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>`,"absolute top-4 right-4 hover:opacity-70 transition-opacity focus:outline-none",()=>this.hide());s.style.color=Be.primary;const o=E("h2",{className:"text-2xl font-bold mb-6 text-center",innerHTML:"Social",style:`color: ${Be.primary};`}),i=E("div",{className:"flex-1 overflow-hidden",style:`color: ${Be.white};`}),a=E("table",{className:"w-full h-full border-separate border-spacing-4"}),c=E("tbody"),u=E("tr",{className:"h-full"}),d=E("td",{className:"w-1/3 align-top"}),l=E("div",{className:"h-full flex flex-col"}),f=E("h3",{className:"text-lg font-bold mb-4",innerHTML:"Amici",style:`color: ${Be.primary};`}),p=E("div",{className:"flex-1 overflow-y-auto space-y-2 mb-4"});this.friends.forEach(v=>{var b,x;const g=E("div",{className:`p-3 rounded cursor-pointer transition-colors ${((b=this.selectedFriend)==null?void 0:b.id)===v.id?"bg-opacity-30":"bg-opacity-10"}`,style:((x=this.selectedFriend)==null?void 0:x.id)===v.id?`background-color: ${Be.primary}30;`:"background-color: rgba(255, 255, 255, 0.1);"});g.innerHTML=`
        <div class="flex items-center justify-between">
          <span class="font-medium">${v.username}</span>
          <span class="w-3 h-3 rounded-full bg-gray-400"></span>
        </div>
      `,g.addEventListener("click",()=>{this.selectedFriend=v,this.refreshModal()}),p.appendChild(g)});const h=te("+ Aggiungi Amico","text-white px-4 py-2 rounded text-sm hover:opacity-90 transition-opacity focus:outline-none w-full",()=>this.handleAddFriend());h.style.backgroundColor=Be.primary;const m=E("input",{className:"bg-gray-800 text-white px-4 py-2 rounded text-sm w-full mt-2",placeholder:"id amico"});m.addEventListener("input",v=>{this.friendIdInput=v.target.value}),l.appendChild(f),l.appendChild(p),l.appendChild(h),l.appendChild(m),d.appendChild(l);const w=E("td",{className:"w-2/3 align-top"}),y=this.createChatContent(t);return w.appendChild(y),u.appendChild(d),u.appendChild(w),c.appendChild(u),a.appendChild(c),i.appendChild(a),r.appendChild(s),r.appendChild(o),r.appendChild(i),n.appendChild(r),n.addEventListener("click",v=>{v.target===n&&this.hide()}),n}createChatContent(t){const n=E("div",{className:"h-full flex flex-col"});if(this.selectedFriend){const r=E("div",{className:"flex items-center mb-4"}),s=E("h3",{className:"text-lg font-bold",innerHTML:`Chat con ${this.selectedFriend.username}`,style:`color: ${Be.primary};`}),o=E("span",{className:"ml-3 w-3 h-3 rounded-full bg-gray-400"});r.appendChild(s),r.appendChild(o);const i=E("div",{className:"flex-1 overflow-y-auto bg-gray-800 rounded p-4 mb-4 space-y-3"}),a=this.messages[Number(this.selectedFriend.id)]||[],c=(t==null?void 0:t.username)||"Tu";a.forEach(f=>{const p=E("div",{className:`flex ${f.sender===c?"justify-end":"justify-start"}`}),h=E("div",{className:`max-w-xs px-3 py-2 rounded text-sm ${f.sender===c?"text-white":"bg-gray-600 text-white"}`});f.sender===c&&(h.style.backgroundColor=Be.primary),h.innerHTML=`
          <div class="font-medium text-xs mb-1 opacity-70">${f.sender}</div>
          <div>${f.content}</div>
        `,p.appendChild(h),i.appendChild(p)});const u=E("div",{className:"flex gap-2"}),d=E("input",{className:"flex-1 px-3 py-2 rounded bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Scrivi un messaggio..."});d.value=this.newMessage,d.addEventListener("input",f=>{this.newMessage=f.target.value}),d.addEventListener("keypress",f=>{f.key==="Enter"&&this.sendMessage(c)});const l=te("Invia","text-white px-4 py-2 rounded hover:opacity-90 transition-opacity focus:outline-none",()=>this.sendMessage(c));l.style.backgroundColor=Be.primary,u.appendChild(d),u.appendChild(l),n.appendChild(r),n.appendChild(i),n.appendChild(u)}else{const r=E("div",{className:"h-full flex items-center justify-center"}),s=E("p",{className:"text-gray-400 text-center",innerHTML:"Seleziona un amico per iniziare a chattare"});r.appendChild(s),n.appendChild(r)}return n}sendMessage(t){if(!this.selectedFriend||!this.newMessage.trim())return;const n={id:Date.now(),sender:t,content:this.newMessage,timestamp:new Date},r=Number(this.selectedFriend.id);this.messages[r]||(this.messages[r]=[]),this.messages[r].push(n),this.newMessage="",this.refreshModal()}async handleAddFriend(){const{user:t}=G.getState();if(!(t!=null&&t.id)||!this.friendIdInput){alert("Inserisci un ID amico valido");return}const n=Number(this.friendIdInput);if(isNaN(n)){alert("ID amico non valido");return}try{await oe.addFriend(Number(t.id),n),alert("Amico aggiunto con successo!"),this.friendIdInput="",this.friends=await oe.getFriends(Number(t.id)),this.refreshModal()}catch(r){alert(`Errore nell'aggiunta dell'amico: ${r.message}`)}}refreshModal(){this.modalElement&&(document.body.removeChild(this.modalElement),this.modalElement=this.createModal(),document.body.appendChild(this.modalElement))}destroy(){this.hide()}}class a1{constructor(){this.profileModal=new o1,this.socialModal=new i1,this.element=this.createNavbar(),this.bindAuthState()}bindAuthState(){this.unsubscribe=G.subscribe(()=>{this.updateNavbar()})}createNavbar(){const t=E("nav",{className:"min-h-screen w-44 py-6 px-4 flex flex-col shadow-lg",style:"background-color: #3B2E27;"});return this.element=t,this.updateNavbar(),t}updateNavbar(){const{user:t}=G.getState();for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);const n=E("div",{className:"mb-8"}),r=te(`<svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
      </svg>
      <span class="text-sm">Home</span>`,"text-white font-semibold text-lg flex flex-col items-center gap-2 hover:text-orange-300 transition-colors w-full p-4",()=>ke.navigate("/"));r.style.color="#E67923",n.appendChild(r),this.element.appendChild(n);const s=E("div",{className:"flex-1 flex flex-col justify-center"});t&&s.appendChild(this.createAuthenticatedButtons(t)),this.element.appendChild(s)}createAuthenticatedButtons(t){const n=E("div",{className:"flex flex-col gap-4 w-full"}),r=E("div",{className:"text-white text-center text-sm mb-4 px-2",innerHTML:`Ciao, ${t.username}!`}),s=te("Profilo","text-white px-3 py-2 rounded transition-all focus:outline-none w-full text-center",async()=>await this.profileModal.show());s.style.backgroundColor="#E67923",s.addEventListener("mouseenter",()=>{s.style.backgroundColor="#D16A1E"}),s.addEventListener("mouseleave",()=>{s.style.backgroundColor="#E67923"});const o=te("Play","text-white px-3 py-2 rounded-md transition-all w-full text-center bg-orange-500 hover:bg-orange-600 focus:outline-none",()=>ke.navigate("/play")),i=te("Social","text-white px-3 py-2 rounded-md transition-all w-full text-center bg-orange-500 hover:bg-orange-600 focus:outline-none",async()=>await this.socialModal.show()),a=te("Logout","text-white px-3 py-2 rounded transition-all focus:outline-none w-full text-center",()=>{G.logout(),ke.navigate("/")});return a.style.backgroundColor="#6B7280",a.addEventListener("mouseenter",()=>{a.style.backgroundColor="#4B5563"}),a.addEventListener("mouseleave",()=>{a.style.backgroundColor="#6B7280"}),n.appendChild(r),n.appendChild(s),n.appendChild(o),n.appendChild(i),n.appendChild(a),n}getElement(){return this.element}destroy(){this.unsubscribe&&this.unsubscribe(),this.profileModal.destroy(),this.socialModal.destroy()}}const c1="575747097249-3bu3g738p6s49pisr9ael83r4p5p1urv.apps.googleusercontent.com";class u1{constructor(){this.isInitialized=!1}async initialize(){if(!this.isInitialized)return new Promise((t,n)=>{if(window.googleAuthCallback=this.handleCredentialResponse.bind(this),window.google)this.initializeGoogleAuth(),this.isInitialized=!0,t();else{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.onload=()=>{this.initializeGoogleAuth(),this.isInitialized=!0,t()},r.onerror=()=>n(new Error("Failed to load Google Identity Services")),document.head.appendChild(r)}})}initializeGoogleAuth(){window.google.accounts.id.initialize({client_id:c1,callback:window.googleAuthCallback})}async handleCredentialResponse(t){try{await G.googleAuth(t.credential)}catch(n){console.error("Google auth error:",n)}}renderButton(t){if(!this.isInitialized){console.error("Google Auth not initialized");return}window.google.accounts.id.renderButton(t,{theme:"outline",size:"large",width:"100%",text:"continue_with"})}}const Ni=new u1,se={primary:"#E67923",dark:"#2A2A2A",darkText:"#3C3C3C",loginButton:"#B20000",loginButtonHover:"#D32F2F",white:"#ffffff",lightGray:"#f5f5f5"},d1=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;class l1{constructor(t=!0){this.isVisible=!1,this.activeTab="login",this.formData={email:"",username:"",password:"",confirmPassword:""},this.errors={},this.showCloseButton=!0,this.showCloseButton=t,this.bindAuthState(),this.initializeGoogleAuth()}async initializeGoogleAuth(){try{await Ni.initialize()}catch(t){console.error("Failed to initialize Google Auth:",t)}}bindAuthState(){this.unsubscribe=G.subscribe(()=>{this.updateErrorDisplay()})}show(){this.isVisible||(this.isVisible=!0,this.modalElement=this.createModal(),document.body.appendChild(this.modalElement))}hide(){!this.isVisible||!this.modalElement||(this.isVisible=!1,document.body.removeChild(this.modalElement),this.modalElement=void 0,this.resetForm())}createModal(){const t=E("div",{className:"fixed inset-0 flex items-center justify-center z-50"});this.showCloseButton&&t.addEventListener("click",i=>{i.target===t&&this.hide()});const n=E("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 h-[500px] overflow-hidden flex flex-col",style:`background-color: ${se.dark};`});if(n.addEventListener("click",i=>i.stopPropagation()),this.showCloseButton){const i=E("div",{className:"relative px-6 pt-4 pb-4"}),a=te("Ã","absolute top-4 right-4 hover:opacity-70 transition-opacity focus:outline-none text-2xl",()=>this.hide());a.style.color=se.primary,i.appendChild(a),n.appendChild(i)}const r=this.createTabs();n.appendChild(r);const s=E("div",{className:"flex-1 flex flex-col"}),o=this.createForm();return s.appendChild(o),n.appendChild(s),t.appendChild(n),t}createTabs(){const t=E("div",{className:"px-6 mt-4"});return[{id:"login",label:"Log In"},{id:"register",label:"Sign Up"}].forEach(r=>{const s=te(r.label,"pb-3 px-1 text-lg font-semibold border-b-2 transition-all mr-8 focus:outline-none hover:opacity-70",()=>this.switchTab(r.id));s.style.color=this.activeTab===r.id?se.primary:se.darkText,s.style.borderBottomColor=this.activeTab===r.id?se.primary:"transparent",t.appendChild(s)}),t}createForm(){const t=E("form",{className:"flex flex-col gap-5 pt-4 px-8 pb-6 flex-1 min-h-[300px] items-center"});t.addEventListener("submit",i=>this.handleSubmit(i));const n=E("div",{className:"w-full max-w-sm mb-4"});this.updateMessageContainer(n);const r=E("div",{className:"flex flex-col gap-6 flex-grow w-full max-w-sm"});r.appendChild(this.createField("email","Email Address","email","Enter your email address...")),this.activeTab==="register"&&r.appendChild(this.createField("username","Username","text","Enter your username...")),r.appendChild(this.createField("password","Password","password",this.activeTab==="login"?"Enter your password...":"Create a password...")),this.activeTab==="register"&&r.appendChild(this.createField("confirmPassword","Confirm Password","password","Confirm your password...")),this.activeTab==="login"&&r.appendChild(E("div",{className:"h-16"}));const s=this.createDivider(),o=this.createButtons();return t.appendChild(n),t.appendChild(r),t.appendChild(s),t.appendChild(o),t}createField(t,n,r,s){const o=E("div",{className:"flex flex-col items-center"}),i=E("label",{className:"block text-sm font-medium text-white text-center mb-2 w-full",innerHTML:n}),a=pu(r,s,`w-4/5 px-4 py-3 border rounded-lg outline-none transition-all text-center text-black placeholder-gray-500 ${this.errors[t]?"border-red-500":"border-gray-700"} bg-gray-100`);a.value=this.formData[t],a.addEventListener("input",u=>this.handleInputChange(t,u.target.value));const c=E("p",{className:"text-red-500 text-sm mt-1 text-center",innerHTML:this.errors[t]||""});return o.appendChild(i),o.appendChild(a),this.errors[t]&&o.appendChild(c),o}createDivider(){const t=E("div",{className:"relative my-6 w-full max-w-sm"}),n=E("div",{className:"absolute inset-0 flex items-center"}),r=E("div",{className:"w-full border-t",style:`border-color: ${se.darkText};`}),s=E("div",{className:"relative flex justify-center text-sm"}),o=E("span",{className:"px-4 text-white",innerHTML:"or",style:`background-color: ${se.dark};`});return n.appendChild(r),s.appendChild(o),t.appendChild(n),t.appendChild(s),t}createButtons(){const t=E("div",{className:"mt-auto w-full max-w-sm"}),n=E("div",{className:"flex gap-3 mb-4 h-12"}),{isLoading:r}=G.getState(),s=te(r?"Loading...":this.activeTab==="login"?"Log in":"Create Account","flex-1 text-white py-3 px-4 rounded-lg font-semibold transition-all flex items-center justify-center focus:outline-none disabled:opacity-50",()=>this.handleFormSubmit());s.style.backgroundColor=se.loginButton,s.disabled=r,s.addEventListener("mouseenter",()=>{r||(s.style.backgroundColor=se.loginButtonHover)}),s.addEventListener("mouseleave",()=>{r||(s.style.backgroundColor=se.loginButton)});const o=this.createGoogleButton();return n.appendChild(s),n.appendChild(o),t.appendChild(n),t}createGoogleButton(){const t=E("div",{className:"w-full"}),n=E("div",{className:"w-full",id:"google-signin-button"});return t.appendChild(n),setTimeout(()=>{try{Ni.renderButton(n)}catch(r){console.error("Error rendering Google button:",r),this.createFallbackGoogleButton(n)}},100),t}createFallbackGoogleButton(t){t.innerHTML="";const n=te(`<svg class="w-5 h-5 mr-3" viewBox="0 0 24 24">
        <path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
        <path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
        <path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
        <path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
      </svg>
      Continue with Google`,"flex items-center justify-center px-4 py-3 border rounded-lg font-semibold cursor-pointer h-12 whitespace-nowrap transition-all focus:outline-none text-black w-full");n.style.backgroundColor=se.white,n.style.borderColor=se.darkText,n.style.color="#000000",n.addEventListener("mouseenter",()=>{n.style.backgroundColor=se.lightGray}),n.addEventListener("mouseleave",()=>{n.style.backgroundColor=se.white}),t.appendChild(n)}handleInputChange(t,n){this.formData[t]=n,this.errors[t]&&delete this.errors[t],G.clearError(),G.clearSuccessMessage()}switchTab(t){this.activeTab=t,this.resetForm(),this.refreshModal()}resetForm(){this.formData={email:"",username:"",password:"",confirmPassword:""},this.errors={}}refreshModal(){if(this.modalElement&&this.modalElement.parentNode){const t=this.createModal();this.modalElement.parentNode.replaceChild(t,this.modalElement),this.modalElement=t}}updateMessageContainer(t){const{error:n,successMessage:r}=G.getState();if(t.innerHTML="",n){const s=E("p",{className:"text-red-500 text-sm text-center bg-red-100 p-2 rounded",innerHTML:n});t.appendChild(s)}if(r){const s=E("p",{className:"text-green-500 text-sm text-center bg-green-100 p-2 rounded",innerHTML:r});t.appendChild(s)}}updateErrorDisplay(){if(this.modalElement){const t=this.modalElement.querySelector(".w-full.max-w-sm.mb-4");t&&this.updateMessageContainer(t)}}validateForm(){const t={};return d1.test(this.formData.email)||(t.email="Please enter a valid email address"),this.activeTab==="register"&&!this.formData.username.trim()&&(t.username="Username is required"),this.formData.password.length<6&&(t.password="Password must be at least 6 characters"),this.activeTab==="register"&&this.formData.password!==this.formData.confirmPassword&&(t.confirmPassword="Passwords do not match"),this.errors=t,Object.keys(t).length===0}handleSubmit(t){t.preventDefault(),this.handleFormSubmit()}async handleFormSubmit(){if(!this.validateForm()){this.refreshModal();return}try{this.activeTab==="login"?await G.login(this.formData.email,this.formData.password):await G.register(this.formData.email,this.formData.username,this.formData.password),this.hide()}catch(t){console.error("Auth error:",t)}}destroy(){this.hide(),this.unsubscribe&&this.unsubscribe()}}class f1{constructor(t){this.container=t,this.authModal=new l1(!1),this.bindAuthState(),this.checkAuthState()}bindAuthState(){this.unsubscribe=G.subscribe(()=>{this.checkAuthState()})}checkAuthState(){const{isAuthenticated:t,isLoading:n}=G.getState();n?this.showLoading():t?this.authModal.hide():this.authModal.show()}showLoading(){}setContent(t){const{isAuthenticated:n}=G.getState();n&&(this.currentContent=t,Mi(t,this.container))}destroy(){this.unsubscribe&&this.unsubscribe(),this.authModal.destroy()}}class p1{constructor(){this.element=this.createPage()}createPage(){const t=E("div",{className:"p-6"}),n=E("h1",{className:"text-3xl font-bold text-gray-800 mb-6",innerHTML:"Benvenuto a ft_transcendence"}),r=E("div",{className:"bg-white rounded-lg shadow-md p-8"}),s=E("p",{className:"text-gray-600 text-lg mb-8",innerHTML:"Il classico gioco Pong reimplementato con tecnologie moderne. Sfida i tuoi amici o gioca contro l'IA!"}),o=E("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"});return[{title:"Gioco Locale",description:"Due giocatori sullo stesso computer",bgClass:"bg-blue-50",textClass:"text-blue-800"},{title:"Gioco Online",description:"Sfida giocatori da tutto il mondo",bgClass:"bg-green-50",textClass:"text-green-800"},{title:"VS Intelligenza Artificiale",description:"Metti alla prova le tue abilitÃ  contro l'IA",bgClass:"bg-purple-50",textClass:"text-purple-800"},{title:"Torneo",description:"Partecipa a tornei competitivi",bgClass:"bg-orange-50",textClass:"text-orange-800"}].forEach(a=>{const c=E("div",{className:`${a.bgClass} p-6 rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer`}),u=E("h3",{className:`font-semibold ${a.textClass} mb-2`,innerHTML:a.title}),d=E("p",{className:"text-gray-600 text-sm",innerHTML:a.description});c.appendChild(u),c.appendChild(d),o.appendChild(c)}),r.appendChild(s),r.appendChild(o),t.appendChild(n),t.appendChild(r),t}getElement(){return this.element}destroy(){}}class h1{constructor(){this.element=this.createPage()}createPage(){const t=E("div",{className:"h-full flex flex-col"}),n=E("h1",{className:"text-3xl font-bold text-gray-800 p-4 bg-white shadow-sm",innerHTML:"Gioca - Pong Game"}),r=E("div",{className:"flex-1 flex min-h-0"}),s=E("div",{className:"w-1/3 bg-gray-50 p-4 border-r-4 border-blue-500 overflow-y-auto"}),o=E("h2",{className:"text-xl font-semibold text-gray-800 mb-4",innerHTML:"Controlli di Gioco"}),i=E("div",{className:"space-y-3 text-gray-700"});["W / S - Giocatore 1 (sinistra)","Frecce Su/GiÃ¹ - Giocatore 2 (destra)","Spacebar - Pausa/Resume","ESC - Menu principale"].forEach(f=>{const p=E("div",{className:"bg-white p-3 rounded-lg border border-gray-200",innerHTML:`<code class="text-blue-600 font-mono">${f}</code>`});i.appendChild(p)});const c=E("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",innerHTML:`
        <h3 class="font-semibold text-blue-800 mb-2">ModalitÃ  di Gioco</h3>
        <ul class="text-sm text-blue-700 space-y-1">
          <li>â¢ <strong>Local:</strong> Due giocatori sullo stesso computer</li>
          <li>â¢ <strong>Remote:</strong> Gioco online</li>
          <li>â¢ <strong>VS Bot:</strong> Contro l'intelligenza artificiale</li>
          <li>â¢ <strong>Tournament:</strong> Torneo con piÃ¹ giocatori</li>
        </ul>
      `});s.appendChild(o),s.appendChild(i),s.appendChild(c);const u=E("div",{className:"w-2/3 bg-white relative min-h-0"}),d=E("iframe",{src:"https://localhost/game/",className:"w-full h-full border-0",style:"min-height: 500px;"}),l=E("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",innerHTML:`
        <div class="text-center">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
          <p class="text-gray-600">Caricamento gioco...</p>
        </div>
      `});return d.onload=()=>{l.style.display="none"},u.appendChild(l),u.appendChild(d),r.appendChild(s),r.appendChild(u),t.appendChild(n),t.appendChild(r),t}getElement(){return this.element}destroy(){}}class m1{constructor(){this.navbar=new a1;const{layout:t,mainContent:n}=this.initializeDOM();this.layout=t,this.mainContent=n,this.authGuard=new f1(this.mainContent),this.setupRoutes(),this.bindAuthState(),ke.start()}initializeDOM(){const t=document.getElementById("app");if(!t)throw new Error("App element not found");const n=E("div",{className:"min-h-screen bg-gray-100 flex"}),r=E("div",{className:"flex-1 p-8 min-h-screen"});return n.appendChild(this.navbar.getElement()),n.appendChild(r),Mi(n,t),{layout:n,mainContent:r}}setupRoutes(){ke.addRoute("/",()=>this.renderPage(new p1)),ke.addRoute("/play",()=>this.renderPage(new h1))}bindAuthState(){this.unsubscribe=G.subscribe(()=>{const{isAuthenticated:t}=G.getState();t?(this.mainContent.style.display="block",this.navbar.getElement().style.display="flex"):(this.mainContent.style.display="none",this.navbar.getElement().style.display="none")})}renderPage(t){const{isAuthenticated:n}=G.getState();this.currentPage&&this.currentPage.destroy(),this.currentPage=t,n&&this.authGuard.setContent(t.getElement())}destroy(){this.unsubscribe&&this.unsubscribe(),this.navbar.destroy(),this.authGuard.destroy(),this.currentPage&&this.currentPage.destroy()}}document.addEventListener("DOMContentLoaded",()=>{new m1});export{T as B,cn as H,$f as a,ve as b,Ir as c,Bl as d,It as e,Re as f,Js as g,Vn as i,kr as l,Y as s};
//# sourceMappingURL=index-BTBRc4Nb.js.map
